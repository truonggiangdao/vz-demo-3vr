{"version":3,"sources":["configs.js","utils/global.utils.js","store/actionTypes.js","consts/hotspotType.const.js","consts/mediaType.const.js","consts/sceneType.const.js","consts/tourMediaType.const.js","utils/mediaHelper.js","utils/jsonHelper.js","utils/apiHelper.js","components/errors/panoError.js","utils/positionHelper.js","utils/textureHelper.js","containers/world/cube360/materials/fadeMaterial.js","containers/world/cube360/cubeEffect.js","containers/world/cube360/index.js","store/actions.js","containers/world/cube360/cube.js","containers/world/cube360/lookUtils.js","containers/world/lensflare/lensflare.js","containers/world/lensflare/lensflareCheck.js","containers/world/lensflare/index.js","containers/world/lensflare/sunflare.js","common/hooks/useAddHotspotHistory.js","common/hooks/useParamsByLocation.js","containers/hotspots/line/utils.js","containers/hotspots/line/Html.js","containers/hotspots/line/hotspotContainer.js","deviceDetect.js","containers/scene.types.js","containers/hotspots/icons/iconAerialMap.js","containers/hotspots/icons/iconAerialScene.js","containers/hotspots/icons/iconGroundScene.js","components/icons/checked.js","utils/distanceHelper.js","containers/hotspots/icons/scene.js","containers/hotspots/icons/iconMediaInfo.js","containers/hotspots/icons/iconMediaVideo.js","containers/hotspots/icons/iconMediaGallery.js","containers/hotspots/icons/iconMediaMatterport.js","containers/hotspots/icons/iconMedia2D.js","containers/hotspots/icons/iconMedia360.js","containers/hotspots/icons/iconMediaTypeForm.js","containers/hotspots/icons/iconMediaSketchFab.js","containers/hotspots/icons/media.js","containers/hotspots/icons/index.js","containers/hotspots/popover/ReadMoreBtn.js","containers/hotspots/popover/popover.info.js","containers/hotspots/line/lineSingle.js","containers/hotspots/line/index.js","common/hooks/useNavigateRoutes.js","containers/world/lineListHandler/index.js","containers/effects/shaders/triangleShader.js","containers/effects/triangleBlurEffect.js","common/hooks/useBlur.js","containers/world/world3d.js","components/errors/domError.js","containers/world/routes/1stRoute.js","containers/world/routes/2ndRoute.js","containers/world/routes/3rdRoute.js","containers/world/routes/4thRoute.js","containers/world/routes/index.js","containers/landing/loadingAnimation.gif","containers/landing/spinner.js","consts/dimention.const.js","utils/menuHelper.js","containers/landing/tip_1.js","containers/landing/tip_2d.js","containers/landing/tip_2m.js","containers/landing/tip_3.js","containers/landing/tip_4.js","containers/landing/introSlider.js","containers/landing/btnGetStarted.js","containers/landing/introImage.js","containers/landing/intro.js","containers/world/index.js","NotFound.js","containers/detectors/size.detector.js","App.js","store/state.js","store/reducers.js","store/middlewares.js","store/sagas.js","store/index.js","reportWebVitals.js","index.js"],"names":["isPreview","indexOf","window","location","hostname","configs","prod","process","baseUrl","apiUrl","viewMode","previewMode","googleApiKey","mapBoxToken","gaTrackingId","singleTour","tourJson","preload","mapRoute","socialRoute","crossfadeSpeed","zoom","min","max","logMessage","console","log","isoDateString","Date","toISOString","waitASecond","sec","Promise","resolve","setTimeout","INITIATE","INITIATED","SET_TOUR_DATA","TOGGLE_MENU","TOGGLE_PANO_MODE","SET_MENU_POSITION","UPDATE_DIMENTIONS","GO_TO_PANO","CLOSE_LANDING","SET_AERIAL_MAP_DATA","TOGGLE_BLUR","SET_AUDIO_AVAILABLE","TOGGLE_AUDIO","GO_TO_VARIANTS","SET_CONTROL_MODE","TOGGLE_LANDING","ADD_HOTSPOT_HISTORY","SET_CENTER_LOOKAT","HOTSPOT_TYPE","SCENE","MEDIA","AUDIO","MEDIA_TYPE","IMAGE","YOUTUBE","GALLERY","MATTERPORT","MAPFLOORPLAN","GOOGLE360","CUSTOM","TYPEFORM","LOGO_OVERRIDE","POPOVER","SKYTAG","CUSTOM_HTML","SKETCH_FAB","VIMEO","VIDEO","TOUR_AUDIO","SCENE_TYPES","AERIAL","LANDING","GROUND","TOUR_MEDIA","TOUR_MEDIA_TYPES","MEDIA_TYPES","emptyFeaturedMedia","map","contact","form","getFeaturedMedia","mediaId","media","find","m","id","getFeaturedHotspotItem","friendlyName","_id","getNewImgUrl","path","imgUrl","newUrl","trim","convertImg","img","newImg","constructor","String","Array","formatJsonImgUrl","url","jsonData","panoList","split","pop","join","getPathFromJsonUrl","brand","logo","forEach","p","Object","keys","images","type","res","index","hotspots","h","icons","unread","read","thumb","formatOldJson","json","data","JSON","parse","stringify","newJson","scenes","hp","x","y","z","distance","sceneLinkId","panoId","mediaLinkId","push","title","text","content","description","imageURL","readMoreURL","moreInfoLink","youtubeID","SCENE_TYPE","toUpperCase","isDefault","default","viewingAngle","defaultOrientation","coordinates","lng","lat","alt","lensFlareLocation","lensflare","noLensFlare","yaw","elevation","previewImgUrl","cubeMapImages","size1024","cube","low","size2048","high","menu","items","i","name","order","panos","j","parseMediaCustom","listMedia","customData","typeForm","logoOverride","skytag","customHtml","html","libraryUrl","scripts","sketchFab","src","sketchFabUrl","soundUrl","loop","videoUrl","vimeoUrl","videoPlatform","videoId","vimeoId","error","youtubeId","fromCustomData","updateFeaturedMedia","featuredMedia","audio","featuredHotspots","featured","isArray","length","mediaType","toLowerCase","handleUpdateArrayFeaturedMedia","mapId","contactId","others","handleUpdateObjectFeaturedMedia","replaceItemIdWithFriendlyName","list","item","mapSceneAndVariantsToArray","s","scene","defaultIndex","sceneVariants","newVariants","variantTitle","variantOrder","isPrimary","useDefaultJumpSpot","useDefaultLensflare","useDefaultMediaSpot","v","variants","mapSceneVariantsToScene","defaultVariantIndex","searchString","search","slice","searchData","qs","PANO_DATA_KEY","cachedPanoUrl","localStorage","getItem","setItem","loadJson","a","fetch","getTime","response","ensureData","customer","tour","brandColor1","logoURL","tagline","companyTagline","menuHighlightColor","lightboxBackgroundColor1","lightboxBackgroundColor2","lightboxBackgroundColor3","lightboxHeaderColor","audioAvailable","angle","defaultViewingAngle","updateDefaultValues","sceneType","updateScenesAndHotspots","g","d","tourGroupId","groups","group","groupId","updateMenuItemsWithScene","websiteUrl","websiteURL","facebookUrl","facebookURL","instagramUrl","instagramURL","twitterUrl","twitterURL","snapchatUrl","snapchatURL","youTubeUrl","youTubeURL","pinterestUrl","pinterestURL","updateSocialData","mediaLogo","mediaLogoOverride","replaceLogoOverrideIdToURL","replaceGroupIdWithFriendlyName","updateItemId","loadFromUrl","jsonUrl","loadTourJson","tourId","PanoErrorBoundary","props","state","hasError","errorInfo","this","children","React","Component","getCameraPositionFromLookAtCoordinates","newX","newY","newZ","Math","abs","getSphericalPosition","w","theta","PI","phi","THREE","cos","sin","get2DScreenPosition","coord","camera","width","height","visible","vector","project","enabled","THREECache","textures","loader","imgLoader","setCrossOrigin","loadTest","date","load","bitMap","loadTexture","anisotropy","hdImgs","reject","dispose","getTextureStatus","texture","cleanLoadTexture","cleanLoadTextures","imgs","imgReqs","all","then","catch","err","SkynavFadeMaterial","uniforms","mixFactor","value","texture1","undefined","texture2","vertexShader","fragmentShader","extend","obj","factor","CubeEffect","position","startTime","useThree","raycaster","controlMode","useSelector","dispatch","useDispatch","useState","setFactor","meshRef","useRef","keepRef","getCenterLookAt","useCallback","current","setFromCamera","intersection","intersectObject","point","getCenterLookAtRef","APP_ACTION","payload","useEffect","gsap","to","duration","onUpdate","ref","scale-x","onClick","e","onPointerDown","onPointerUp","onPointerMove","attach","args","attachArray","side","px","nx","py","ny","pz","nz","indexToSide","Cube360","queue","toClean","processQueue","maxAnisotropy","loadImages","variantIndex","pano","loadImageAsTextures","onSDLoaded","animateCamera","firstLook","setState","cleanHdCache","onShowHotspots","onHDLoaded","loadLinkedImages","loadNonLinkedImages","loadVariantImages","currentVariant","callback","linkedSceneIds","filter","linkedScenes","loadQueue","otherScenes","currQueueScene","imagesToLoad","getCurrentIdIndex","vaIndex","allAtOnce","IdIndex","time","reloadState","reqs","callBack","key","material","remove","material0","material1","curMixFactor","gl","setPixelRatio","devicePixelRatio","capabilities","getMaxAnisotropy","preProps","rotate","vec","qua","setFromAxisAngle","applyQuaternion","moveCloseToY","toCal","normalize","multiplyScalar","add","getCurvePoints","basePoints","start","nRound","stepNum","yStep","dStep","distanceTo","points","ang","curPoint","getPoints","coords","Cube","introClosed","threeContext","isFirst","setIsFirst","useFrame","render","setCamPosition","set","handleLinear","updateLookAt","newPos","onComplete","onChangeLookAt","linearUpdate","firstAnimateCamera","indexing","ease","Power4","easeInOut","round","ceil","floor","cPercent","fPercent","firstLinearUpdate","lookAtCoords","Lensflare","LensflareElement","LensflareComponent","loadLenflare","loadTextures","flareSun","flareRed","flareYellow","flareGreen","flareBlue","flareRainB","color","addElement","light","getLightPosition","aspect","createRef","intensity","decay","getLensflareLocation","curVariant","WebLensflare","lensflareLocation","useMemo","SunFlare","useLoader","curPosition","updatePosition","lookAt","xyLocation","innerWidth","innerHeight","maxVisibleDistance","coord1","coord2","xDiff","yDiff","sqrt","distanceBetween2dCoordinates","opacity","newOpacity","meshPosition","planeArgs","depthWrite","transparent","WebSunFlare","useAddHotspotHistory","hsId","includes","mediaHotspot","useParamsByLocation","pathname","useHistory","sceneId","hotspotId","CANVAS_H","CANVAS_W","tan","OFFSET_X","getCanvasX","diff","offsetX","v1","Vector3","v2","v3","calcXY","halfW","halfH","isVisibleInRange","percent","OPACITY_RANGE","calcOpacityFloor","curPercent","calcOpacityCeil","getOpacityPercent","val","target","calcOpacity","maxPercent","curPercentX","curPercentY","opacityFloor","opacityCeil","checkFloorX","checkCeilX","checkFloorY","checkCeilY","isVisibleCheck","size","isBehind","isSkytag","isBehindCheck","objectPos","cameraPos","setFromMatrixPosition","matrixWorld","deltaCamObj","sub","camDir","getWorldDirection","angleTo","ori","Vector2","ANIMATION_DURATION","getElapsed","drawHsLinePercent","ctx","toX","toY","visibleAt","elapsed","tp","getPercent","drawHsLine","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","onPositionChanged","isVisible","up","cvRef","hsRef","parentNode","style","visibility","getContext","clearRect","hs2d","transform","forwardRef","eps","className","prepend","center","fullscreen","portal","scaleFactor","zIndexRange","hotspotRef","canvasRef","isAerialHs","document","createElement","el","old","domElement","interval","updateMatrixWorld","calculatePosition","cssText","appendChild","removeChild","ReactDOM","unmountComponentAtNode","styles","top","left","calculatePosition1","calculatePosition2","clearInterval","setInterval","scale","PerspectiveCamera","vFOV","fov","dist","OrthographicCamera","objectScale","querySelector","skytagTransition","zIndex","A","far","near","B","objectZIndex","HotspotContainer","memo","detector","MobileDetect","navigator","userAgent","isMobile","mobile","AERIAL_MAP","Icon","bgColor","data-name","xmlns","viewBox","fill","cx","cy","r","CheckBox","rx","ry","strokeWidth","validCoord","Number","feetBetween","lngLat1","LngLat","lngLat2","metersBetween","num","SceneHotspot","hostpostRef","currentSceneCoords","isActiveIcon","setDistance","count","setCount","feet","fts","IconGroundScene","IconAerialMap","IconAerialScene","onClickHotspot","stopPropagation","prevCount","classList","isHover","toggleHover","handleClickOutside","event","contains","addEventListener","removeEventListener","onMouseEnter","hoverIn","onMouseLeave","hoverOut","isMapFloorPlan","calloutHeaderColor","calloutSubHeaderColor","onClickCapture","visited","draggable","strokeMiterlimit","MediaHotspot","IconMediaGallery","IconMediaMatterport","IconMedia2D","IconMediaGoogle360","IconMediaTypeForm","IconMediaInfo","IconSketchFab","IconMediaVideo","getIcon","mediaTypeStr","HotspotIcon","SceneHotspotIcon","MediaHotspotIcon","ReadMoreBtn","href","rel","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","PopOverInfo","bottom","substr","zIndexRange1","zIndexRangeHover","pointerEvents","LineSingle","elRef","setZIndex","setZIndexRange","hovering","setHovering","hoverToggled","Boolean","Html","hotspot","Line","addHotspotHistory","activeHotspot","setActiveHotspot","history","useNavigateRoute","handleUpdateRoute","spots","setHotspots","hotspotHistory","spotHistory","reduce","hs","brandColor","onClickJumpSpot","LineListHandler","params","showHP","restProps","popupOpen","isLandingOpen","TriangleBlurShader","delta","EffectComposer","ShaderPass","RenderPass","RADIUS","rad","TriangleBlurEffect","onBlurStartChanging","onBlurChanged","blur","shouldBlur","setBlur","useBlur","isOn","setIsOn","setRad","renderScene","finalComposer","fstPass","sndPass","addPass","final","setSize","passes","World3D","linkedMedias","interactionOn","lastPanTime","lastPos","onSelectPano","onSwitchPano","onSelectPanoById","gId","sId","updateHotspots","currentPano","allHotspots","selectedHotspots","defaultHotspots","sceneVariantId","defaultJumpSpots","defaultMediaSpots","selectedVariant","enableInteraction","autoRotate","camPos","Consumer","store","fallback","connect","DomErrorBoundary","withRouter","match","Spinner","loaded","onClosing","onClosed","alpha","setAlpha","setOpacity","setEnabled","background","loadingGif","DIMENSION","PORTRAIT","LANDSCAPE","isMenuLeft","dimention","DIMENTIONS","Tip","image","clipPath","IntroSlider","phone","portrait","listRef","slidePerPage","settings","dots","arrows","infinite","adaptiveHeight","speed","slidesToShow","slidesToScroll","BtnGetStarted","introImageUrl","imageStyle","backgroundImage","PHONE","INTRO_STEP","dimentions","spinnerVisible","step","setStep","status","setStatus","onHide","onClickHide","World","initiating","jsonInvalid","isPanning","sdLoaded","hdLoaded","spinner","showSpinner","showIntro","introStatus","defaultScene","panCounter","disableRotate","panTimer","worldEl","trackDeepLink","navigateToRoute","routeParams","dataArrived","cubeMap","googleAnalyticTrackingID","facebookPixelID","setAudioAvailable","getDefaultScene","selectDefaultScene","loadData","setTourData","defaultGroup","selectSceneById","currentScene","loadSceneById","goToScene","setScene","toggleRotate","isAutoRotate","resetTimer","onPointerClick","isNavOpen","toggleMenu","clearTimeout","onImageLoaded","toggleIntro","toggleLanding","onUpdateIntroStep","renderLanding","preState","currentHotspot","panoMode","mapDispatchToProps","setPanoData","isOpen","showHotspot","isMapOpen","isoMetricMap","mapPopupOpen","socialPopupOpen","social","contactPopupOpen","lightboxBlur","NotFound","display","alignItems","justifyContent","textAlign","fontWeight","fontSize","updateDimentions","currDimentions","isClient","getWinSize","DIMENTION","winSize","setWinDim","handleResize","useWindowSize","defaultTexture","App","basename","exact","component","initialState","ready","showLanding","centerLookAt","aerialMapData","aerialDataReady","available","appReducer","action","initiate","result","put","middlewares","handleInit","rootSaga","takeLatest","sagaMiddleware","createSagaMiddleware","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducers","applyMiddleware","run","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","config","autoAddCss","library","fab","fas","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.93f46c58.chunk.js","sourcesContent":["var isPreview = true;\nvar viewHostnames = [\n  'view.skynav.app',\n  'testing.view.skynav.app',\n  'viewskynav-testing.azurewebsites.net',\n];\nif (viewHostnames.indexOf(window.location.hostname) !== -1) {\n  isPreview = false;\n}\n\nconst configs = {\n  prod: process.env.REACT_APP_PROD === 'true',\n  baseUrl: process.env.REACT_APP_BASE_URL || '',\n  apiUrl: process.env.REACT_APP_API_URL || '',\n  viewMode: !isPreview,\n  previewMode: isPreview,\n  googleApiKey: process.env.REACT_APP_GOOGLE_API_KEY || '',\n  mapBoxToken: process.env.REACT_APP_MAPBOX_TOKEN || '',\n  gaTrackingId: process.env.REACT_APP_GA_TRACKING_ID || '',\n  singleTour: process.env.REACT_APP_SINGLE_TOUR === 'true',\n  tourJson: process.env.REACT_APP_TOUR_JSON || '',\n  preload: process.env.REACT_APP_PRELOAD === 'true',\n  mapRoute: 'map-navigation',\n  socialRoute: 'follow-us',\n  crossfadeSpeed: 2,\n  zoom: {\n    min: process.env.REACT_APP_MIN_FOV,\n    max: process.env.REACT_APP_MAX_FOV,\n  },\n};\n\nexport default configs;\n","import configs from '../configs';\n\nconst doNothing = () => null;\nwindow.logMessage = configs.prod ? doNothing : console.log;\nwindow.isoDateString = () => new Date().toISOString();\nwindow.waitASecond = (sec = 1) =>\n  new Promise((resolve) => {\n    window.logMessage(`wait ${sec}s... ${window.isoDateString()}`);\n    setTimeout(() => {\n      resolve(true);\n      window.logMessage(`waited ${sec}s... ${window.isoDateString()}`);\n    }, sec * 1000);\n  });\n","export const INITIATE = 'INITIATE';\nexport const INITIATED = 'INITIATED';\nexport const SET_TOUR_DATA = 'SET_TOUR_DATA';\nexport const TOGGLE_MENU = 'TOGGLE_MENU';\nexport const TOGGLE_PANO_MODE = 'TOGGLE_PANO_MODE';\nexport const SET_MENU_POSITION = 'SET_MENU_POSITION';\nexport const UPDATE_DIMENTIONS = 'UPDATE_DIMENTIONS';\nexport const SET_PANO_DATA = 'SET_PANO_DATA';\nexport const GO_TO_PANO = 'GO_TO_PANO';\nexport const SHOW_HOTSPOT = 'SHOW_HOTSPOT';\nexport const CLOSE_HOTSPOT_POPUP = 'CLOSE_HOTSPOT_POPUP';\nexport const TOGGLE_ISO_METRIC_MAP = 'TOGGLE_ISO_METRIC_MAP';\nexport const TOGGLE_SOCIAL_POPUP = 'TOGGLE_SOCIAL_POPUP';\nexport const TOGGLE_CONTACT_POPUP = 'TOGGLE_CONTACT_POPUP';\nexport const CLOSE_LANDING = 'CLOSE_LANDING';\nexport const SET_AERIAL_MAP_DATA = 'SET_AERIAL_MAP_DATA';\nexport const TOGGLE_BLUR = 'TOGGLE_BLUR';\nexport const SET_AUDIO_AVAILABLE = 'SET_AUDIO_AVAILABLE';\nexport const TOGGLE_AUDIO = 'TOGGLE_AUDIO';\nexport const GO_TO_VARIANTS = 'GO_TO_VARIANTS';\nexport const SET_CONTROL_MODE = 'SET_CONTROL_MODE';\nexport const TOGGLE_LANDING = 'TOGGLE_LANDING';\nexport const ADD_HOTSPOT_HISTORY = 'ADD_HOTSPOT_HISTORY';\nexport const SET_CENTER_LOOKAT = 'SET_CENTER_LOOKAT';\n","const HOTSPOT_TYPE = {\n  SCENE: 'Scene',\n  MEDIA: 'Media',\n  AUDIO: 'Audio',\n};\n\nexport default HOTSPOT_TYPE;\n","const MEDIA_TYPE = {\n  IMAGE: 'Image',\n  YOUTUBE: 'Youtube',\n  AUDIO: 'Audio',\n  GALLERY: 'Gallery',\n  MATTERPORT: 'Matterport',\n  MAPFLOORPLAN: 'MapFloorPlan',\n  GOOGLE360: 'Google360',\n  CUSTOM: 'Custom',\n  TYPEFORM: 'TypeForm',\n  LOGO_OVERRIDE: 'LogoOverride',\n  POPOVER: 'Popover',\n  SKYTAG: 'Skytag',\n  CUSTOM_HTML: 'CustomHtml',\n  SKETCH_FAB: 'SketchFab',\n  VIMEO: 'Vimeo',\n  VIDEO: 'Video',\n  TOUR_AUDIO: 'TourAudio',\n};\n\nexport default MEDIA_TYPE;\n","export const SCENE_TYPES = {\n  AERIAL: 'AERIAL',\n  LANDING: 'LANDING',\n  GROUND: 'GROUND',\n};\n\nexport const isAerial = (type) =>\n  String(type).toUpperCase() === SCENE_TYPES.AERIAL;\n\nexport default SCENE_TYPES;\n","import MEDIA_TYPES from './mediaType.const';\n\nconst TOUR_MEDIA = {\n  AUDIO: 'Audio',\n  MAP: 'Map',\n  FORM: 'Form',\n};\n\nconst TOUR_MEDIA_TYPES = {\n  [MEDIA_TYPES.MAPFLOORPLAN]: TOUR_MEDIA.MAP,\n  [MEDIA_TYPES.TYPEFORM]: TOUR_MEDIA.FORM,\n  [MEDIA_TYPES.TOUR_AUDIO]: TOUR_MEDIA.AUDIO,\n};\n\nexport default TOUR_MEDIA_TYPES;\n","import TOUR_MEDIA_TYPES from 'consts/tourMediaType.const';\nimport MEDIA_TYPES from 'consts/mediaType.const';\n\nconst emptyFeaturedMedia = {\n  map: null,\n  contact: null,\n  form: null,\n};\n\n/**\n * Get feature media from list media\n * @param {String} mediaId Feature Media Id\n * @param {Array} media List of Media\n * @returns {Object}\n *\n * ```js\n * const contact = getFeaturedMedia(contactId, json.media)\n * ```\n */\nconst getFeaturedMedia = (mediaId, media) =>\n  media.find((m) => m.id === mediaId);\n\n/**\n * Get Featured Media by format\n * @param {Object} media featured media\n * @returns {Object} featuredMediaHotspotItem\n *\n * ```js\n * const mapFeaturedHotspot = getFeaturedHotspotItem(media)\n * ```\n */\nconst getFeaturedHotspotItem = (media) => ({\n  id: media.friendlyName,\n  _id: media.id,\n  media,\n});\n\n/**\n * Handle update featuredMedia with Array data type\n * @param {Object} data Tour json data\n * @return {void} void\n *\n * ```js\n * data.featured = [{\n * mediaId: \"611e2761ebcfd24d1ca262d0\"\n * others: null\n * tourId: \"607672c81f63cd04d823597f\"\n * type: \"Map\"\n * }]\n * ```\n */\nexport const handleUpdateArrayFeaturedMedia = (data) => {\n  if (data.featured.length === 0) {\n    data.featuredMedia = { ...emptyFeaturedMedia };\n    return;\n  }\n  data.featured.forEach((media) => {\n    const featuredMedia = getFeaturedMedia(media.mediaId, data.media);\n    if (featuredMedia) {\n      data.featuredHotspots.push(getFeaturedHotspotItem(featuredMedia));\n      const mediaType = TOUR_MEDIA_TYPES[featuredMedia?.type]\n        ? TOUR_MEDIA_TYPES[featuredMedia?.type].toLowerCase()\n        : TOUR_MEDIA_TYPES[MEDIA_TYPES.MAPFLOORPLAN].toLowerCase();\n\n      if (mediaType) {\n        data.featuredMedia[mediaType] = featuredMedia;\n        // HARDCODE\n        if (mediaType === 'form') data.featuredMedia.contact = featuredMedia;\n      }\n    }\n  });\n};\n\n/**\n * Handle update featuredMedia with Object data type\n * @param {Object} data Tour json data\n * @return {void}\n */\nexport const handleUpdateObjectFeaturedMedia = (data) => {\n  const mapId = data.featured.mediaId || '';\n  const map = mapId ? getFeaturedMedia(mapId, data.media) || null : null;\n\n  const contactId = (data.featured.others && data.featured.others[0]) || '';\n  const contact = contactId\n    ? getFeaturedMedia(contactId, data.media) || null\n    : null;\n\n  data.featuredMedia.map = map;\n  data.featuredMedia.contact = contact;\n\n  if (map) {\n    data.featuredHotspots.push(getFeaturedHotspotItem(map));\n  }\n  if (contact) {\n    data.featuredHotspots.push(getFeaturedHotspotItem(contact));\n  }\n};\n","import { isArray } from 'lodash';\nimport HOTSPOT_TYPE from '../consts/hotspotType.const';\nimport MEDIA_TYPE from '../consts/mediaType.const';\nimport SCENE_TYPE from '../consts/sceneType.const';\nimport {\n  handleUpdateArrayFeaturedMedia,\n  handleUpdateObjectFeaturedMedia,\n} from './mediaHelper';\n\nexport const getPathFromJsonUrl = (url) => {\n  var path = url.split('/');\n  path.pop();\n  return path.join('/');\n};\n\nexport const getNewImgUrl = (path, imgUrl) => {\n  let newUrl = imgUrl.trim();\n  if (newUrl.indexOf('http://') === 0 || newUrl.indexOf('https://') === 0) {\n    return newUrl;\n  }\n  if (newUrl[0] !== '/') {\n    newUrl = '/' + newUrl;\n  }\n  return path + newUrl;\n};\n\nexport const convertImg = (img, path) => {\n  let newImg = img;\n  if (newImg) {\n    if (newImg.constructor === String) {\n      newImg = getNewImgUrl(path, newImg);\n    }\n    if (newImg.constructor === Array) {\n      newImg = newImg.map((img) => getNewImgUrl(path, img));\n    }\n  }\n  return newImg;\n};\n\nexport const formatJsonImgUrl = (url, jsonData) => {\n  if (jsonData.panoList) {\n    const path = getPathFromJsonUrl(url);\n    if (jsonData.brand && jsonData.brand.logo) {\n      jsonData.brand.logo = convertImg(jsonData.brand.logo, path);\n    }\n    jsonData.panoList.forEach((p) => {\n      Object.keys(p.images).forEach((type) => {\n        if (p.images[type]) {\n          Object.keys(p.images[type]).forEach((res) => {\n            if (p.images[type][res]) {\n              if (p.images[type][res].constructor === Array) {\n                p.images[type][res].forEach((img, index) => {\n                  p.images[type][res][index] = convertImg(img, path);\n                });\n              } else {\n                p.images[type][res] = convertImg(p.images[type][res], path);\n              }\n            }\n          });\n        }\n      });\n      if (p.hotspots) {\n        p.hotspots.forEach((h) => {\n          h.icons.unread = convertImg(h.icons.unread, path);\n          h.icons.read = convertImg(h.icons.read, path);\n          if (h.thumb) {\n            h.thumb = convertImg(h.thumb, path);\n          }\n        });\n      }\n    });\n  }\n  return jsonData;\n};\n\nexport const formatOldJson = (json) => {\n  const data = JSON.parse(JSON.stringify(json));\n  if (!data.panoList) {\n    return data;\n  }\n  const newJson = {};\n  newJson.media = [];\n  newJson.scenes = data.panoList.map((p) => {\n    const hotspots = [];\n    p.hotspots.forEach((h) => {\n      const hp = {\n        id: h.id,\n        type: h.type === 'pano' ? HOTSPOT_TYPE.SCENE : HOTSPOT_TYPE.MEDIA,\n        location: [h.location.x, h.location.y, h.location.z],\n        distance: h.type === 'pano' ? h.distance : null,\n        sceneLinkId: h.type === 'pano' ? h.panoId : null,\n        mediaLinkId: h.type !== 'pano' ? h.id : null,\n      };\n      hotspots.push(hp);\n      if (h.type !== 'pano' && !newJson.media.find((m) => m.id === h.id)) {\n        newJson.media.push({\n          id: h.id,\n          title: h.title,\n          friendlyName: h.id,\n          type:\n            h.type === 'youtube-video' ? MEDIA_TYPE.YOUTUBE : MEDIA_TYPE.IMAGE,\n          text: h.type === 'info-box' ? h.content.description : null,\n          imageURL: h.type === 'info-box' ? h.content.images[0] : null,\n          readMoreURL: h.type === 'info-box' ? h.content.moreInfoLink : null,\n          youtubeID: h.type === 'youtube-video' ? h.content : null,\n        });\n      }\n    });\n    const scene = {\n      id: p.id,\n      title: p.title,\n      friendlyName: p.id,\n      type: String(p.type || SCENE_TYPE.GROUND).toUpperCase(),\n      isDefault: p.default || false,\n      location: '',\n      viewingAngle: 70,\n      defaultOrientation: [\n        p.defaultOrientation.x,\n        p.defaultOrientation.y,\n        p.defaultOrientation.z,\n      ],\n      coordinates: [\n        (p.coordinates && p.coordinates.lng) || 0,\n        (p.coordinates && p.coordinates.lat) || 0,\n        (p.coordinates && p.coordinates.alt) || 0,\n      ],\n      lensFlareLocation: [p.lensflare.x, p.lensflare.y, p.lensflare.z],\n      noLensFlare: !(p.lensflare || p.lensflare.x) ? true : false,\n      yaw: '',\n      elevation: '',\n      previewImgUrl: p.thumb,\n      cubeMapImages: {\n        size1024: p.images.cube.low,\n        size2048: p.images.cube.high,\n      },\n      hotspots: hotspots,\n    };\n    return scene;\n  });\n  newJson.menu = data.menu.items.map((m, i) => ({\n    name: m.title,\n    order: i,\n    scenes: m.panos.map((p, j) => ({\n      id: p.id,\n      order: j,\n    })),\n  }));\n  return newJson;\n};\n\nconst fromCustomData = (media) => {\n  if (media.type === MEDIA_TYPE.CUSTOM) {\n    let customData = null;\n    try {\n      customData = JSON.parse(media.customData);\n      //Parse TypeForm\n      if (customData.type === MEDIA_TYPE.TYPEFORM && customData.url) {\n        media.type = MEDIA_TYPE.TYPEFORM;\n        media.typeForm = {\n          url: customData.url,\n        };\n      }\n      // Parse Logo Override\n      else if (customData.type === MEDIA_TYPE.LOGO_OVERRIDE && customData.url) {\n        media.type = MEDIA_TYPE.LOGO_OVERRIDE;\n        media.logoOverride = {\n          url: customData.url,\n        };\n      }\n\n      // Parse SKYtag\n      else if (\n        customData.type === MEDIA_TYPE.SKYTAG &&\n        customData.description\n      ) {\n        media.type = MEDIA_TYPE.SKYTAG;\n        media.skytag = {\n          description: customData.description,\n          readMoreURL: customData.readMoreURL || null,\n        };\n      }\n\n      // Parse Custom Html\n      else if (customData.type === MEDIA_TYPE.CUSTOM_HTML) {\n        media.type = MEDIA_TYPE.CUSTOM_HTML;\n        media.customHtml = {\n          html: customData.html,\n          libraryUrl: customData.libraryUrl,\n          scripts: customData.scripts,\n        };\n      } else if (customData.type === MEDIA_TYPE.SKETCH_FAB) {\n        media.type = MEDIA_TYPE.SKETCH_FAB;\n        media.sketchFab = {\n          src: customData.sketchFabUrl,\n        };\n      }\n\n      // AUDIO\n      else if (customData.type === MEDIA_TYPE.AUDIO) {\n        media.type = MEDIA_TYPE.AUDIO;\n        media.soundUrl = customData.soundUrl;\n        media.loop = customData.loop;\n      }\n      // VIDEO MEDIA\n      // Old Vimeo type\n      else if (customData.type === MEDIA_TYPE.VIMEO) {\n        media.type = MEDIA_TYPE.VIMEO;\n        media.videoUrl = customData.vimeoUrl;\n        media.videoPlatform = MEDIA_TYPE.VIMEO;\n        media.videoId = customData.vimeoId;\n      }\n      // New type Video\n      else if (customData.type === MEDIA_TYPE.VIDEO) {\n        media.type = MEDIA_TYPE.VIDEO;\n        media.videoUrl = customData.videoUrl;\n        media.videoPlatform = customData.videoPlatform;\n        media.videoId = customData.videoId;\n      }\n      // Tour Audio\n      else if (customData.type === MEDIA_TYPE.TOUR_AUDIO) {\n        media.type = MEDIA_TYPE.TOUR_AUDIO;\n        media.soundUrl = customData.soundUrl;\n      }\n    } catch (error) {\n      console.log('error parsing custom type from api response', error);\n    }\n  } else if (media.type === MEDIA_TYPE.YOUTUBE) {\n    media.type = MEDIA_TYPE.VIDEO;\n    media.videoUrl = media.youtubeId;\n    media.videoPlatform = MEDIA_TYPE.YOUTUBE;\n    media.videoId = '';\n  }\n};\n\nexport const parseMediaCustom = (listMedia) => {\n  if (listMedia) {\n    listMedia.forEach((m) => fromCustomData(m));\n  }\n};\n\nexport const updateDefaultValues = (data) => {\n  if (data.customer && data.tour) {\n    data.customer.brandColor1 = data.customer.brandColor1 || 'white';\n    data.tour.logoURL = data.tour.logoURL || data.customer.logoURL;\n    data.tour.tagline = data.tour.tagline || data.customer.companyTagline;\n    data.tour.menuHighlightColor = data.tour.menuHighlightColor || 'white';\n    data.tour.lightboxBackgroundColor1 =\n      data.tour.lightboxBackgroundColor1 || 'black';\n    data.tour.lightboxBackgroundColor2 =\n      data.tour.lightboxBackgroundColor2 || 'black';\n    data.tour.lightboxBackgroundColor3 =\n      data.tour.lightboxBackgroundColor3 || 'black';\n    data.tour.lightboxHeaderColor = data.tour.lightboxHeaderColor || 'white';\n    data.tour.audioAvailable = (data.media || []).find(\n      (m) => m.type === MEDIA_TYPE.AUDIO\n    )\n      ? true\n      : false;\n    const angle = data.tour.defaultViewingAngle;\n    data.tour.defaultViewingAngle = 20 > angle || angle > 120 ? 60 : angle;\n  }\n};\n\n/**\n * Update featured media data\n * @param {Object} data tour json data\n * @return {void}\n *\n * Currently, Tour support 3 type of feature media\n * 1. map: MAPFLOORPLAN\n * 2. contact: CONTACTFORM\n * 3. audio: TOUR_AUDIO\n */\nexport const updateFeaturedMedia = (data) => {\n  data.featuredMedia = {\n    map: null,\n    contact: null,\n    audio: null,\n  };\n  data.featuredHotspots = [];\n\n  if (data.featured) {\n    /**\n     * We support 2 type of data.featured\n     *\n     * 1. Array\n     * ```js\n     * featured: [{type: 'Map', id: 'xxxx'}]\n     * ```\n     *\n     * 2. Object\n     * ```js\n     * featured: {map: mapId, others: [otherId]}\n     * ```\n     */\n    if (isArray(data.featured)) {\n      handleUpdateArrayFeaturedMedia(data);\n    } else {\n      handleUpdateObjectFeaturedMedia(data);\n    }\n  }\n};\n\nexport const updateScenesAndHotspots = (data) => {\n  data.scenes.forEach((scene) => {\n    scene.sceneType = String(scene.type || SCENE_TYPE.GROUND).toUpperCase();\n    scene.hotspots.forEach((h) => {\n      if (h.type === HOTSPOT_TYPE.MEDIA) {\n        h.media = data.media.find((m) => m.id === h.mediaLinkId) || null;\n        if (h.media) {\n          h._id = h.media.id;\n          h.id = h.media.friendlyName;\n          h.friendlyName = h.media.friendlyName;\n        }\n      } else if (h.type === HOTSPOT_TYPE.SCENE) {\n        h.scene = data.scenes.find((s) => s.id === h.sceneLinkId) || null;\n        if (h.scene) {\n          h._id = h.scene.id;\n          h.id = h.scene.friendlyName;\n          h.friendlyName = h.scene.friendlyName;\n        }\n      }\n    });\n  });\n};\n\nexport const updateMenuItemsWithScene = (data) => {\n  data.menu.forEach((g) => {\n    g.scenes.forEach((s) => {\n      const scene = data.scenes.find((d) => d.id === s.id);\n      if (scene) {\n        window.logMessage('scene', { ...scene });\n        if (scene.tourGroupId && data.groups) {\n          const group = data.groups.find((g) => g.id === scene.tourGroupId);\n          if (group) {\n            s.groupId = group.friendlyName;\n          }\n        }\n        s._id = s.id;\n        s.id = scene.friendlyName;\n        s.title = s.title || scene.title;\n        s.friendlyName = scene.friendlyName;\n        s.type = String(scene.type || SCENE_TYPE.GROUND).toUpperCase();\n      }\n    });\n  });\n};\n\nexport const replaceItemIdWithFriendlyName = (list = []) => {\n  list.forEach((item) => {\n    if (item.friendlyName) {\n      item._id = item.id;\n      item.id = item.friendlyName;\n    }\n  });\n};\n\nconst replaceGroupIdWithFriendlyName = (data) => {\n  if (!data.groups || !data.groups.length) {\n    data.groups = [\n      {\n        _id: 'welcome',\n        id: 'welcome',\n      },\n    ];\n  }\n  data.scenes.forEach((scene) => {\n    let group = data.groups.find((g) => g.id === scene.tourGroupId);\n    if (!group) {\n      group = data.groups.find((g) => g.isDefault) || data.groups[0];\n    }\n    scene.groupId = group ? group.friendlyName : 'welcome';\n  });\n};\n\nexport const replaceLogoOverrideIdToURL = (data) => {\n  data.scenes.forEach((scene) => {\n    const mediaLogo = data.media.find((m) => m._id === scene.mediaLogoOverride);\n    if (mediaLogo && mediaLogo.logoOverride && mediaLogo.logoOverride.url) {\n      scene.mediaLogoOverride = mediaLogo.logoOverride.url;\n    } else {\n      scene.mediaLogoOverride = null;\n    }\n  });\n};\n\nexport const mapSceneVariantsToScene = (scene) => {\n  let defaultIndex = 0;\n  if (!scene.sceneVariants) {\n    scene.sceneVariants = [];\n  }\n  const newVariants = [\n    {\n      id: scene.id,\n      title: scene.variantTitle,\n      order: scene.variantOrder,\n      cubeMapImages: scene.cubeMapImages,\n      isDefault: false,\n      isPrimary: true,\n      lensFlareLocation: scene.lensFlareLocation,\n      noLensFlare: scene.noLensFlare,\n      previewImgUrl: scene.previewImgUrl,\n      useDefaultJumpSpot: true,\n      useDefaultLensflare: true,\n      useDefaultMediaSpot: true,\n    },\n    ...scene.sceneVariants.map((v, index) => {\n      if (v.isDefault) {\n        defaultIndex = index + 1;\n      }\n      return {\n        ...v,\n        isPrimary: false,\n        lensFlareLocation: v.useDefaultLensflare\n          ? scene.lensFlareLocation\n          : v.lensflare,\n        noLensFlare: v.useDefaultLensflare ? scene.noLensFlare : v.noLensFlare,\n      };\n    }),\n  ];\n\n  if (!newVariants.find((v) => v.isDefault)) {\n    newVariants[0].isDefault = true;\n  }\n  return {\n    variants: newVariants,\n    index: defaultIndex,\n  };\n};\n\nexport const replaceTitleToFriendlyName = (title) => {\n  return title.trim().toLowerCase().replaceAll(' ', '-');\n};\n\nexport const mapSceneAndVariantsToArray = (scenes) => {\n  scenes.forEach((s) => {\n    const { variants, index } = mapSceneVariantsToScene(s);\n    s.variants = variants;\n    s.defaultVariantIndex = index;\n  });\n};\n\n/**\n * Update Social Data for Json.Tour from Customer\n * @param {object} data Json Data\n */\nexport const updateSocialData = (data) => {\n  const { tour, customer } = data;\n  data.tour = {\n    ...tour,\n    websiteUrl: tour.websiteUrl || customer.websiteURL || '',\n    facebookUrl: tour.facebookUrl || customer.facebookURL || '',\n    instagramUrl: tour.instagramUrl || customer.instagramURL || '',\n    twitterUrl: tour.twitterUrl || customer.twitterURL || '',\n    snapchatUrl: tour.snapchatUrl || customer.snapchatURL || '',\n    youTubeUrl: tour.youTubeUrl || customer.youTubeURL || '',\n    pinterestUrl: tour.pinterestUrl || customer.pinterestURL || '',\n  };\n};\n\nexport const updateItemId = (data) => {\n  replaceItemIdWithFriendlyName(data.scenes);\n  replaceItemIdWithFriendlyName(data.media);\n  replaceLogoOverrideIdToURL(data);\n  mapSceneAndVariantsToArray(data.scenes);\n  replaceGroupIdWithFriendlyName(data);\n  replaceItemIdWithFriendlyName(data.groups);\n};\n","import qs from 'qs';\nimport {\n  formatJsonImgUrl,\n  formatOldJson,\n  updateDefaultValues,\n  updateScenesAndHotspots,\n  updateMenuItemsWithScene,\n  updateItemId,\n  parseMediaCustom,\n  updateFeaturedMedia,\n  updateSocialData,\n} from './jsonHelper';\nimport configs from '../configs';\n\nconst searchString =\n  (window.location.search && window.location.search.slice(1)) || '';\nconst searchData = qs.parse(searchString);\nwindow.logMessage('searchData', searchData);\nconst PANO_DATA_KEY = 'panoData';\nconst cachedPanoUrl = localStorage.getItem(PANO_DATA_KEY) || configs.tourJson;\nconst panoUrl = searchData[PANO_DATA_KEY] || cachedPanoUrl;\nif (searchData[PANO_DATA_KEY]) {\n  localStorage.setItem(PANO_DATA_KEY, searchData[PANO_DATA_KEY]);\n}\n\nexport const loadJson = async (url) => {\n  try {\n    const response = await fetch(url + '?v=' + new Date().getTime());\n    return await response.json();\n  } catch (error) {\n    window.logMessage('load.json.error:', error);\n    return null;\n  }\n};\n\nexport const ensureData = (data) => {\n  parseMediaCustom(data.media);\n  updateDefaultValues(data);\n  updateFeaturedMedia(data);\n  updateScenesAndHotspots(data);\n  updateMenuItemsWithScene(data);\n  updateSocialData(data);\n  updateItemId(data);\n  window.data = data;\n  window.logMessage('window.data', data);\n  return data;\n};\n\nexport const loadFromUrl = async (jsonUrl) => {\n  const json = await loadJson(jsonUrl);\n  if (json) {\n    const data = formatOldJson(formatJsonImgUrl(jsonUrl, json));\n    return ensureData(data);\n  }\n  return null;\n};\n\nexport const loadFromQueryString = () => {\n  return loadFromUrl(panoUrl);\n};\n\nexport const loadTourDetail = async (tourId) => {\n  const response = await fetch(`${configs.apiUrl}Tours/${tourId}/detail`);\n  const data = await response.json();\n  return data.data;\n};\n\nexport const loadTourJsons = async (tourId) => {\n  try {\n    const reqBody = {\n      tours: [tourId],\n    };\n    if (configs.viewMode) {\n      reqBody.isPublished = true;\n    }\n    const response = await fetch(`${configs.apiUrl}Tours/json`, {\n      method: 'PATCH',\n      body: JSON.stringify(reqBody),\n    });\n    const { data } = await response.json();\n    if (data && data.length) {\n      return data;\n    }\n  } catch (error) {\n    window.logMessage('loadTourJsons.error', error);\n    console.log(error);\n  }\n  return [];\n};\n\nexport const loadPreviewJson = async (tourId) => {\n  const data = await loadTourJsons(tourId);\n  if (data && data.length) {\n    return data.pop();\n  }\n  return null;\n};\n\nexport const loadPublishedJson = async (tourId) => {\n  const data = await loadTourJsons(tourId);\n  if (data && data.length) {\n    return data.find((d) => d.isPublished) || null;\n  }\n  return null;\n};\n\nvar parsePreloadJsonScript = (jsonStr) => {\n  const jsonStrFormatted = jsonStr\n    .replace(/__OPEN_TAG__/g, '<')\n    .replace(/__CLOSE_TAG__/g, '>');\n  return JSON.parse(jsonStrFormatted);\n};\n\nexport const loadTourJson = async (tourId) => {\n  const data = {\n    tour: null,\n    json: null,\n  };\n\n  try {\n    const jsonUrl = 'https://skynavimagetesting.blob.core.windows.net/skynavtesting-tour-json-history/daytona-beach_daytona-beach-cvb_2021-09-22_15-39-49.json';\n    const json = await loadFromUrl(jsonUrl);\n    if (json) {\n      data.tour = json.tour;\n      data.json = json;\n    }\n  } catch (error) {\n    window.logMessage('loadTourJson.error', error);\n  }\n  return data;\n};\n","import React from 'react';\n\nclass PanoErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    window.logMessage('componentDidCatch', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default PanoErrorBoundary;\n","import * as THREE from 'three';\n\nexport const getCameraPositionFromLookAtCoordinates = (x, y, z) => {\n  let newX = x,\n    newY = y,\n    newZ = z;\n  while (Math.abs(newX) >= 10 || Math.abs(newY) >= 10 || Math.abs(newZ) >= 10) {\n    newX = newX / 2;\n    newY = newY / 2;\n    newZ = newZ / 2;\n  }\n  return {\n    x: -1 * newX,\n    y: -1 * newY,\n    z: -1 * newZ,\n  };\n};\n\nexport const getSphericalPosition = function (x, y, w, h) {\n  const u = x / w;\n  const v = y / h;\n  const theta = u * 2 * Math.PI;\n  const phi = v * Math.PI;\n  return new THREE.Vector3(\n    Math.cos(theta) * Math.sin(phi),\n    Math.sin(theta) * Math.sin(phi),\n    Math.cos(phi)\n  );\n};\n\nwindow.getSphericalPosition = getSphericalPosition;\n\nexport const updatePositionOfHotspots = (hotspots, camera, width, height) => {\n  return hotspots.map((hotspot) => ({\n    ...hotspot,\n    position: !hotspot.location\n      ? {\n          visible: false,\n          x: -1000,\n          y: -1000,\n        }\n      : get2DScreenPosition(hotspot.location, camera, width, height),\n  }));\n};\n\nexport const get2DScreenPosition = (coord, camera, width, height) => {\n  if (!(coord && camera && width && height)) {\n    return {\n      visible: false,\n      x: -1000,\n      y: -1000,\n    };\n  }\n  const hpLocation = new THREE.Vector3(coord.x, coord.y, coord.z);\n  const vector = hpLocation.project(camera);\n  return {\n    visible: Math.abs(vector.z) <= 1,\n    x: ((vector.x + 1) / 2) * width,\n    y: (-(vector.y - 1) / 2) * height,\n  };\n};\n\nexport const distanceBetween2dCoordinates = (\n  coord1 = { x: 0, y: 0 },\n  coord2 = { x: 0, y: 0 }\n) => {\n  const xDiff = Math.abs(coord1.x - coord2.x),\n    yDiff = Math.abs(coord1.y - coord2.y);\n  return Math.sqrt(xDiff * xDiff + yDiff * yDiff);\n};\n","import * as THREE from 'three';\nTHREE.Cache.enabled = true;\nwindow.THREECache = THREE.Cache;\n\nconst textures = {};\n\nconst images = {};\n\nconst loader = new THREE.TextureLoader();\n\nconst imgLoader = new THREE.ImageBitmapLoader().setCrossOrigin('*');\n\nwindow.loadTest = (img) => {\n  const date = new Date();\n  imgLoader.load(img, (bitMap) => {\n    window.logMessage((new Date() - date) / 1000);\n  });\n};\n\nexport const loadImage = (img) =>\n  new Promise((resolve, reject) => {\n    if (img) {\n      if (images[img]) {\n        return resolve(images[img]);\n      } else {\n        imgLoader.load(\n          img,\n          (imageBitmap) => {\n            images[img] = imageBitmap;\n            resolve(images[img]);\n          },\n          null,\n          (err) => {\n            reject(err);\n          }\n        );\n      }\n    } else {\n      return reject('EMPTY');\n    }\n  });\n\nexport const loadImages = (imgs = []) =>\n  new Promise((resolve, reject) => {\n    const imgReqs = imgs.map((img) => loadImage(img));\n    Promise.all(imgReqs)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  });\n\n// const imgToTexture = (url, img, anisotropy = 8) => {\n//   const texture = new THREE.CanvasTexture(img);\n//   texture.center = new THREE.Vector2(0.5, 0.5);\n//   texture.rotation = Math.PI;\n//   texture.anisotropy = anisotropy;\n//   textures[url] = texture;\n//   return textures[url];\n// };\n\nexport const loadTexture = (img, anisotropy = 8, hdImgs = null) =>\n  new Promise((resolve, reject) => {\n    if (img) {\n      if (hdImgs && textures[hdImgs]) {\n        setTimeout(() => {\n          if (textures[img]) {\n            textures[img].dispose();\n            delete textures[img];\n          }\n          getTextureStatus();\n        });\n        return resolve(textures[hdImgs]);\n      } else if (textures[img]) {\n        getTextureStatus();\n        return resolve(textures[img]);\n      } else {\n        loader.load(img, (texture) => {\n          texture.anisotropy = anisotropy;\n          textures[img] = texture;\n          getTextureStatus();\n          resolve(textures[img]);\n        });\n      }\n    } else {\n      return reject('EMPTY');\n    }\n  });\n\nexport const loadHdTexture = (hdImg, anisotropy = 8, img = null) =>\n  new Promise((resolve, reject) => {\n    if (hdImg) {\n      loader.load(hdImg, (texture) => {\n        texture.anisotropy = anisotropy;\n        textures[hdImg] = texture;\n        setTimeout(() => {\n          if (textures[img]) {\n            textures[img].dispose();\n            delete textures[img];\n            getTextureStatus();\n          }\n        }, 100);\n        resolve(textures[hdImg]);\n      });\n    } else {\n      return reject('EMPTY');\n    }\n  });\n\nexport const loadTextures = (imgs = [], anisotropy = 8, hdImgs = []) =>\n  new Promise((resolve, reject) => {\n    const imgReqs = imgs.map((img, index) =>\n      loadTexture(img, anisotropy, hdImgs[index])\n    );\n    Promise.all(imgReqs)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  });\n\nexport const loadHdTextures = (hdImgs = [], anisotropy = 8, imgs = []) =>\n  new Promise((resolve, reject) => {\n    const imgReqs = hdImgs.map((img, index) =>\n      loadHdTexture(img, anisotropy, imgs[index])\n    );\n    Promise.all(imgReqs)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  });\n\nconst getTextureStatus = () => {\n  window.logMessage(\n    'status: ' + Object.keys(textures).length + ' textures cached!'\n  );\n};\n\nexport const cleanLoadTexture = (img, anisotropy = 8) =>\n  new Promise((resolve, reject) => {\n    if (img) {\n      loader.load(img, (texture) => {\n        texture.anisotropy = anisotropy;\n        resolve(texture);\n      });\n    } else {\n      return reject('EMPTY');\n    }\n  });\n\nexport const cleanLoadTextures = (imgs, anisotropy = 8) =>\n  new Promise((resolve, reject) => {\n    const imgReqs = imgs.map((img) => cleanLoadTexture(img, anisotropy));\n    Promise.all(imgReqs)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  });\n\nwindow.getTextureStatus = getTextureStatus;\n","import { extend } from '@react-three/fiber';\nimport * as THREE from 'three';\nexport default class SkynavFadeMaterial extends THREE.ShaderMaterial {\n  constructor() {\n    super({\n      uniforms: {\n        // lights: { value: false },\n        mixFactor: { value: 0 },\n        texture1: { type: 't', value: undefined },\n        texture2: { type: 't', value: undefined },\n      },\n      vertexShader: `\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }`,\n      fragmentShader: `\n        varying vec2 vUv;\n        uniform sampler2D texture1;\n        uniform sampler2D texture2;\n        uniform float mixFactor;\n        void main() {\n          vec4 _texture1 = texture2D(texture1, vUv);\n          vec4 _texture2 = texture2D(texture2, vUv);\n          vec4 finalTexture = mix(_texture1, _texture2, mixFactor);\n          gl_FragColor = finalTexture;\n        }\n      `,\n    });\n  }\n\n  get texture1() {\n    return this.uniforms.texture1.value;\n  }\n  set texture1(v) {\n    this.uniforms.texture1.value = v;\n  }\n  get texture2() {\n    return this.uniforms.texture2.value;\n  }\n  set texture2(v) {\n    this.uniforms.texture2.value = v;\n  }\n  get mixFactor() {\n    return this.uniforms.mixFactor.value;\n  }\n  set mixFactor(v) {\n    this.uniforms.mixFactor.value = v;\n  }\n}\n\n// register element in react-spring (a.fadeMaterial)\n// register element in r3f (<fadeMaterial />)\nextend({ SkynavFadeMaterial });\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\n\nimport { useThree } from '@react-three/fiber';\nimport { gsap } from 'gsap';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { setCenterLookat } from 'store/actions';\n\nimport configs from 'configs';\n\nimport './materials/fadeMaterial';\nimport { getCameraPositionFromLookAtCoordinates } from 'utils/positionHelper';\n\nconst obj = { factor: 0 };\n\nfunction CubeEffect(props) {\n  const { texture, texture2, mixFactor } = props;\n\n  const { camera, raycaster } = useThree();\n  const { controlMode } = useSelector((state) => state);\n  const dispatch = useDispatch();\n\n  const [factor, setFactor] = useState(0);\n\n  const meshRef = useRef(null);\n  const keepRef = useRef({});\n\n  const getCenterLookAt = useCallback(() => {\n    if (!camera || !raycaster || !meshRef.current) return null;\n    raycaster.setFromCamera({ x: 0, y: 0 }, camera);\n    const intersection = raycaster.intersectObject(meshRef.current);\n\n    if (intersection.length === 0) return null;\n    const { x, y, z } = intersection[0].point;\n    return getCameraPositionFromLookAtCoordinates(x, y, z);\n  }, [camera, raycaster]);\n\n  const handleGetCenterLookAtWhenChangeControlMode = () => {\n    const point = getCenterLookAt();\n    dispatch(setCenterLookat(point));\n  };\n\n  keepRef.current.getCenterLookAtRef =\n    handleGetCenterLookAtWhenChangeControlMode;\n\n  useEffect(() => {\n    if (controlMode === 'orbit') {\n      const { getCenterLookAtRef } = keepRef.current;\n      getCenterLookAtRef();\n    }\n  }, [controlMode]);\n\n  useEffect(() => {\n    obj.factor = factor;\n    gsap.to(obj, {\n      factor: mixFactor,\n      duration: configs.crossfadeSpeed,\n      onUpdate: () => setFactor(obj.factor),\n    });\n    // eslint-disable-next-line\n  }, [mixFactor]);\n  return (\n    <mesh\n      ref={meshRef}\n      position={[0, 0, 0]}\n      scale-x={-1}\n      onClick={(e) => props.onClick(e)}\n      onPointerDown={(e) => props.onPointerDown(e)}\n      onPointerUp={(e) => props.onPointerUp(e)}\n      onPointerMove={(e) => props.onPointerMove(e)}\n    >\n      <boxBufferGeometry\n        attach=\"geometry\"\n        args={[1000, 1000, 1000, 1, 1, 1]}\n      ></boxBufferGeometry>\n      {/* <meshStandardMaterial color=\"green\" side={1} /> */}\n      <skynavFadeMaterial\n        attachArray=\"material\"\n        side={1}\n        texture1={texture.px}\n        texture2={texture2.px}\n        mixFactor={factor}\n      />\n      <skynavFadeMaterial\n        attachArray=\"material\"\n        side={1}\n        texture1={texture.nx}\n        texture2={texture2.nx}\n        mixFactor={factor}\n      />\n      <skynavFadeMaterial\n        attachArray=\"material\"\n        side={1}\n        texture1={texture.py}\n        texture2={texture2.py}\n        mixFactor={factor}\n      />\n      <skynavFadeMaterial\n        attachArray=\"material\"\n        side={1}\n        texture1={texture.ny}\n        texture2={texture2.ny}\n        mixFactor={factor}\n      />\n      <skynavFadeMaterial\n        attachArray=\"material\"\n        side={1}\n        texture1={texture.pz}\n        texture2={texture2.pz}\n        mixFactor={factor}\n      />\n      <skynavFadeMaterial\n        attachArray=\"material\"\n        side={1}\n        texture1={texture.nz}\n        texture2={texture2.nz}\n        mixFactor={factor}\n      />\n    </mesh>\n  );\n}\n\nexport default CubeEffect;\n","import React, { useEffect, useState, useCallback } from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { gsap, Power4 } from 'gsap';\nimport Cube360 from './cube';\nimport configs from '../../../configs';\nimport { getCameraPositionFromLookAtCoordinates } from '../../../utils/positionHelper';\nimport { getCurvePoints } from './lookUtils';\n\nvar position;\nvar coords = [];\nvar startTime;\n\nconst updated = false;\n\nfunction Cube(props) {\n  const { introClosed } = props;\n  const threeContext = useThree();\n  const { camera } = threeContext;\n  const [isFirst, setIsFirst] = useState(true);\n\n  useFrame(({ gl, scene, camera }) => {\n    if (!window.gl) {\n      window.gl = gl;\n    }\n    gl.render(scene, camera);\n  }, true);\n\n  const setCamPosition = useCallback(\n    (x, y, z) => {\n      camera.position.set(x, y, z);\n    },\n    [camera.position]\n  );\n\n  const handleLinear = () => {\n    const { x, y, z } = position;\n    setCamPosition(x, y, z);\n    window.logMessage('position', x, y, z);\n  };\n\n  const linearUpdate = (newPos) => {\n    position = updated ? camera.position.clone() : { x: 0, y: 0, z: 1 };\n    window.logMessage('position, newPos', position, newPos);\n    gsap.to(position, {\n      x: newPos.x,\n      y: newPos.y,\n      z: newPos.z,\n      duration: configs.crossfadeSpeed,\n      onUpdate: handleLinear,\n      onComplete: () => {\n        window.logMessage('here');\n        props.onChangeLookAt();\n      },\n    });\n  };\n\n  const updateLookAt = ([x, y, z]) => {\n    window.logMessage('updateLookAt');\n    const newPos = getCameraPositionFromLookAtCoordinates(x, y, z);\n    linearUpdate(newPos);\n  };\n\n  const firstLinearUpdate = () => {\n    if (coords.length) {\n      var indexing = { i: coords.length - 1 };\n      gsap.to(indexing, {\n        i: 0,\n        duration: 2,\n        ease: Power4.easeInOut,\n        onUpdate: () => {\n          const round = Math.round(indexing.i);\n          if (indexing.i === round) {\n            const { x, y, z } = coords[round];\n            setCamPosition(x, y, z);\n          } else {\n            const ceil = Math.ceil(indexing.i);\n            const floor = Math.floor(indexing.i);\n            const cPercent = indexing.i - floor;\n            const fPercent = ceil - indexing.i;\n            const x = coords[ceil].x * cPercent + coords[floor].x * fPercent;\n            const y = coords[ceil].y * cPercent + coords[floor].y * fPercent;\n            const z = coords[ceil].z * cPercent + coords[floor].z * fPercent;\n            setCamPosition(x, y, z);\n          }\n        },\n        onComplete: props.onChangeLookAt,\n      });\n    } else {\n      props.onChangeLookAt();\n      window.logMessage('totalTime', new Date() - startTime);\n    }\n  };\n\n  const firstAnimateCamera = ([x, y, z]) => {\n    coords = getCurvePoints(x, y, z).map((p) =>\n      getCameraPositionFromLookAtCoordinates(p.x, p.y, p.z)\n    );\n    window.logMessage('coords', coords.length, coords);\n    coords.pop(); // last coord is wrong\n    position = coords.pop();\n    handleLinear();\n  };\n\n  useEffect(() => {\n    if (isFirst && introClosed && coords.length) {\n      window.logMessage('introClosed', introClosed);\n      startTime = new Date();\n      firstLinearUpdate();\n      setIsFirst(false);\n    }\n    // eslint-disable-next-line\n  }, [introClosed]);\n\n  const animateCamera = (lookAtCoords, firstLook = false) => {\n    if (firstLook) {\n      firstAnimateCamera(lookAtCoords);\n    } else {\n      updateLookAt(lookAtCoords);\n    }\n  };\n\n  return <Cube360 {...props} {...threeContext} animateCamera={animateCamera} />;\n}\n\nexport default Cube;\n","import * as APP_ACTION from './actionTypes';\n\nexport const initiate = () => ({ type: APP_ACTION.INITIATE });\nexport const updateDimentions = (payload) => ({\n  type: APP_ACTION.UPDATE_DIMENTIONS,\n  payload,\n});\nexport const togglePanoMode = (mode) => ({\n  type: APP_ACTION.TOGGLE_PANO_MODE,\n  payload: mode,\n});\nexport const toggleMenu = (isOpen) => ({\n  type: APP_ACTION.TOGGLE_MENU,\n  payload: isOpen,\n});\nexport const setMenuPosition = (payload) => ({\n  type: APP_ACTION.SET_MENU_POSITION,\n  payload,\n});\nexport const setTourData = (payload) => ({\n  type: APP_ACTION.SET_TOUR_DATA,\n  payload,\n});\nexport const setPanoData = (payload) => ({\n  type: APP_ACTION.SET_PANO_DATA,\n  payload,\n});\nexport const showHotspot = (hotspot) => ({\n  type: APP_ACTION.SHOW_HOTSPOT,\n  payload: { hotspot },\n});\nexport const closeHotspotPopup = () => ({\n  type: APP_ACTION.CLOSE_HOTSPOT_POPUP,\n});\nexport const goToScene = (groupId, id) => ({\n  type: APP_ACTION.GO_TO_PANO,\n  payload: { id, groupId },\n});\n\nexport const closeLanding = () => ({ type: APP_ACTION.CLOSE_LANDING });\nexport const setAerialMapData = (payload) => ({\n  type: APP_ACTION.SET_AERIAL_MAP_DATA,\n  payload,\n});\n\nexport const setAudioAvailable = (payload) => ({\n  type: APP_ACTION.SET_AUDIO_AVAILABLE,\n  payload,\n});\nexport const toggleAudio = (isOn) => ({\n  type: APP_ACTION.TOGGLE_AUDIO,\n  payload: isOn,\n});\nexport const goToVariants = (payload) => ({\n  type: APP_ACTION.GO_TO_VARIANTS,\n  payload,\n});\nexport const setControlMode = (payload) => ({\n  type: APP_ACTION.SET_CONTROL_MODE,\n  payload,\n});\nexport const toggleLanding = (payload) => ({\n  type: APP_ACTION.TOGGLE_LANDING,\n  payload,\n});\nexport const addHotspotHistory = (payload) => ({\n  type: APP_ACTION.ADD_HOTSPOT_HISTORY,\n  payload,\n});\nexport const setCenterLookat = (payload) => ({\n  type: APP_ACTION.SET_CENTER_LOOKAT,\n  payload,\n});\n","/* eslint-disable react/no-direct-mutation-state */\nimport React from 'react';\nimport * as THREE from 'three';\nimport configs from 'configs';\nimport { EVENT_TYPE, trackEventByType } from '../../../gaTracking';\nimport {\n  cleanLoadTexture,\n  cleanLoadTextures,\n} from '../../../utils/textureHelper';\nimport CubeEffect from './cubeEffect';\n\nconst indexToSide = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\nclass Cube360 extends React.Component {\n  queue = [];\n  toClean = [];\n  processQueue = false;\n  maxAnisotropy = 1;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstLook: false,\n      material0: {\n        px: null,\n        nx: null,\n        py: null,\n        ny: null,\n        pz: null,\n        nz: null,\n      },\n      material1: {\n        px: null,\n        nx: null,\n        py: null,\n        ny: null,\n        pz: null,\n        nz: null,\n      },\n      mixFactor: 1,\n      curMixFactor: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.props.gl.setPixelRatio(\n      window.devicePixelRatio ? window.devicePixelRatio : 1\n    );\n    this.maxAnisotropy = this.props.gl.capabilities.getMaxAnisotropy();\n    if (this.props.variantIndex === 0) {\n      this.loadImages(this.state.mixFactor);\n    } else {\n      this.loadVariantImages(this.state.mixFactor, this.props.variantIndex);\n    }\n    window.logMessage('window.devicePixelRatio', window.devicePixelRatio);\n    window.logMessage('this.maxAnisotropy', this.maxAnisotropy);\n  }\n\n  componentDidUpdate(preProps) {\n    const mixFactor = this.state.mixFactor ? 0 : 1;\n    if (preProps.pano && this.props.pano) {\n      if (preProps.pano.id !== this.props.pano.id) {\n        this.setState({ mixFactor });\n        this.loadImages(mixFactor);\n      } else if (preProps.variantIndex !== this.props.variantIndex) {\n        this.setState({ mixFactor });\n        // * When change scene, this still be called\n        // * not handle this yet\n        this.loadVariantImages(mixFactor);\n      }\n    }\n  }\n\n  loadImages = (mixFactor) => {\n    // stop all-loading\n    this.processQueue = false;\n    const { variantIndex, pano } = this.props;\n    const { id, variants, defaultOrientation } = pano;\n    const { cubeMapImages } = variants[variantIndex];\n    // load low & render low\n    this.loadImageAsTextures(\n      cubeMapImages.size1024,\n      id,\n      variantIndex,\n      mixFactor,\n      true\n    )\n      .then(this.props.onSDLoaded)\n      // show orientation\n      .then(() => window.logMessage('Set orientation'))\n      .then(() =>\n        this.props.animateCamera([...defaultOrientation], this.state.firstLook)\n      )\n      .then(() => window.logMessage('Finish set orientation'))\n      .then(() => this.setState({ firstLook: false }))\n      .then(this.cleanHdCache)\n      .then(() => window.waitASecond(1.5))\n      // show hotspots\n      .then(() => window.logMessage('Showing hotspots'))\n      .then(this.props.onShowHotspots)\n      .then(() => window.logMessage('Finished showing hotspots'))\n      .then(() => window.waitASecond(1.5))\n      .then(() => window.logMessage('load & render high'))\n      .then(() =>\n        this.loadImageAsTextures(\n          cubeMapImages.size2048,\n          id,\n          variantIndex,\n          mixFactor\n        )\n      )\n      .then(this.props.onHDLoaded)\n      .then(() => window.waitASecond(1))\n      // start loading\n      // load linked low\n      .then(() => {\n        if (!configs.preload) return;\n        if (id !== this.props.pano.id) {\n          return null;\n        }\n        window.logMessage('Start load linked images');\n        this.loadLinkedImages(() => {\n          window.logMessage('Finish load linked images');\n          // load other low\n          if (id !== this.props.pano.id) {\n            return null;\n          }\n          this.loadNonLinkedImages(() => {\n            window.logMessage('Finish load non-linked images');\n          });\n        });\n      });\n    // GA Tracking\n    trackEventByType(EVENT_TYPE.SCENE, id);\n  };\n\n  loadVariantImages = (mixFactor) => {\n    // stop all-loading\n    this.processQueue = false;\n    const { variantIndex, pano } = this.props;\n    const { id, variants } = pano;\n    const currentVariant = variants[variantIndex];\n    window.logMessage('CURRENT VARIANTS', currentVariant);\n    const { cubeMapImages } = currentVariant;\n    // load low & render low\n    this.loadImageAsTextures(\n      cubeMapImages.size1024,\n      id,\n      variantIndex,\n      mixFactor,\n      true\n    )\n      .then(() => window.waitASecond(0.5))\n      .then(() => window.logMessage('load & render high'))\n      .then(() =>\n        this.loadImageAsTextures(\n          cubeMapImages.size2048,\n          id,\n          variantIndex,\n          mixFactor\n        )\n      )\n      .then(() => window.waitASecond(0.5))\n      // show hotspots\n      .then(() => window.logMessage('Showing hotspots'))\n      .then(this.props.onShowHotspots);\n  };\n\n  loadLinkedImages = (callback) => {\n    const { id } = this.props.pano;\n    const linkedSceneIds = (this.props.pano.hotspots || [])\n      .filter((h) => h.sceneLinkId)\n      .map((h) => h.sceneLinkId);\n    // const menuScene = this.props.json\n    const panoList = this.props.scenes.filter((p) => p.id !== id);\n    const linkedScenes = panoList.filter(\n      (p) => linkedSceneIds.indexOf(p.id) !== -1\n    );\n\n    this.queue = [this.props.pano, ...linkedScenes];\n    this.processQueue = true;\n    this.loadQueue(callback);\n  };\n\n  loadNonLinkedImages = (callback) => {\n    const { id } = this.props.pano;\n    const linkedSceneIds = (this.props.pano.hotspots || [])\n      .filter((h) => h.sceneLinkId)\n      .map((h) => h.sceneLinkId);\n    const panoList = this.props.scenes.filter((p) => p.id !== id);\n    const otherScenes = panoList.filter(\n      (p) => linkedSceneIds.indexOf(p.id) === -1\n    );\n    this.queue = [...this.queue, ...otherScenes];\n    this.processQueue = true;\n    this.loadQueue(callback);\n  };\n\n  loadQueue = (callback) => {\n    if (this.processQueue) {\n      if (this.queue.length) {\n        const currQueueScene = this.queue.pop();\n        let imagesToLoad = [];\n        currQueueScene.variants.forEach((v, index) => {\n          const IdIndex = `${currQueueScene.id}-${index}`;\n          if (IdIndex === this.getCurrentIdIndex()) {\n            // skip current scene variants (already loaded)\n            return;\n          }\n          const size1024 = v.cubeMapImages.size1024 || [];\n          imagesToLoad = [...imagesToLoad, ...size1024];\n        });\n        cleanLoadTextures(imagesToLoad, this.maxAnisotropy)\n          .then(() => this.loadQueue(callback))\n          .catch(() => this.loadQueue(callback));\n      } else {\n        if (callback) {\n          callback();\n        }\n      }\n    }\n  };\n\n  getCurrentIdIndex = () => `${this.props.pano.id}-${this.props.variantIndex}`;\n\n  loadImageAsTextures = (\n    imgs,\n    panoId,\n    vaIndex,\n    mixFactor,\n    allAtOnce = false\n  ) => {\n    const IdIndex = `${panoId}-${vaIndex}`;\n    if (IdIndex !== this.getCurrentIdIndex()) {\n      return null;\n    }\n    window.logMessage(`Start loading ${allAtOnce ? 'low' : 'high'}`);\n    const time = new Date();\n    if (allAtOnce) {\n      return new Promise((resolve) => {\n        cleanLoadTextures(imgs, this.maxAnisotropy).then((res) => {\n          if (IdIndex === this.getCurrentIdIndex()) {\n            window.logMessage(\n              `Finished loading low. Tooks ${(new Date() - time) / 1000}s`\n            );\n            this.reloadState(res, mixFactor, () => {\n              resolve(res);\n            });\n          }\n        });\n      });\n    } else {\n      const reqs = imgs.map(\n        (img, index) =>\n          new Promise((resolve) => {\n            cleanLoadTexture(img, this.maxAnisotropy).then((texture) => {\n              if (IdIndex === this.getCurrentIdIndex()) {\n                window.logMessage(\n                  `Img ${img} tooks ${(new Date() - time) / 1000}s to load`\n                );\n                this.setState(\n                  {\n                    [`material${mixFactor}`]: {\n                      ...this.state[`material${mixFactor}`],\n                      [indexToSide[index]]: texture,\n                    },\n                  },\n                  () => resolve(texture)\n                );\n              } else {\n                window.logMessage(\n                  `Img ${img} tooks ${(new Date() - time) / 1000}s to load1`\n                );\n                resolve(texture);\n              }\n            });\n          })\n      );\n      return new Promise((resolve) => {\n        Promise.all(reqs).then((res) => {\n          if (IdIndex === this.getCurrentIdIndex()) {\n            window.logMessage(\n              `Finished loading high. Tooks ${(new Date() - time) / 1000}s`\n            );\n            resolve(res);\n            this.toClean = [...imgs];\n          }\n        });\n      });\n    }\n  };\n\n  reloadState = (textures, mixFactor, callBack) => {\n    const key = `material${mixFactor}`;\n    const material = { ...this.state[key] };\n    for (let i = 0; i < 6; i++) {\n      material[indexToSide[i]] = textures[i];\n    }\n    this.setState({ [key]: { ...material }, curMixFactor: mixFactor }, () => {\n      callBack();\n      window.logMessage(`Finished rendering textures`);\n    });\n  };\n\n  cleanHdCache = () => {\n    window.logMessage('remove previous scene high textures from cache');\n    while (this.toClean.length) {\n      const img = this.toClean.pop();\n      THREE.Cache.remove(img);\n    }\n  };\n\n  render() {\n    const { material0, material1, curMixFactor } = this.state;\n    return (\n      <CubeEffect\n        onClick={this.props.onClick}\n        onPointerDown={this.props.onPointerDown}\n        onPointerUp={this.props.onPointerUp}\n        onPointerMove={this.props.onPointerMove}\n        texture={material0}\n        texture2={material1}\n        mixFactor={curMixFactor}\n      />\n    );\n  }\n}\n\nexport default Cube360;\n","import * as THREE from 'three';\n\nconst TARGET_Y = 500;\n\nexport const rotate = (vec, angle) => {\n  const qua = new THREE.Quaternion();\n  qua.setFromAxisAngle(new THREE.Vector3(0, 1, 0), angle);\n  vec.applyQuaternion(qua);\n};\n\nexport const degInRad = (deg) => (deg * Math.PI) / 180;\n\nconst moveCloseToY = (vec, distance) => {\n  const toCal = new THREE.Vector3(vec.x, 0, vec.z);\n  toCal.normalize();\n  toCal.multiplyScalar(-1 * distance);\n  vec.add(toCal);\n};\n\nconst getPoints = (start, nRound) => {\n  const stepNum = nRound * 20;\n  const yStep = (TARGET_Y - start.y) / stepNum;\n  const totalDistance = start.distanceTo(new THREE.Vector3(0, start.y, 0));\n  const dStep = totalDistance / stepNum;\n  const points = [start];\n  const ang = -Math.PI / 10;\n  let i = 1;\n  const curPoint = new THREE.Vector3(start.x, start.y, start.z);\n  while (i <= nRound * 20) {\n    curPoint.y = curPoint.y + yStep;\n    moveCloseToY(curPoint, dStep);\n    rotate(curPoint, ang);\n    points.push(new THREE.Vector3(curPoint.x, curPoint.y, curPoint.z));\n    i++;\n  }\n  return points;\n};\n\nexport const getCurvePoints = (x, y, z) => {\n  const point = new THREE.Vector3(x, y, z);\n  const noRounds = 0.5;\n  const basePoints = getPoints(point, noRounds);\n  const curve = new THREE.CatmullRomCurve3(basePoints);\n  return curve.getPoints(500);\n};\n","import React from 'react';\nimport * as THREE from 'three';\nimport { extend } from '@react-three/fiber';\nimport { loadTextures } from '../../../utils/textureHelper';\nimport {\n  Lensflare,\n  LensflareElement,\n} from 'three/examples/jsm/objects/Lensflare';\nimport configs from '../../../configs';\n\nextend({ Lensflare, LensflareElement });\n\nclass LensflareComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.light = React.createRef();\n    this.lensflare = null;\n  }\n\n  componentDidMount() {\n    this.loadLenflare();\n    window.logMessage('lensflare did mount');\n  }\n\n  loadLenflare = () => {\n    const lensflareImgs = [\n      configs.baseUrl +\n        '/assets/images/lensflare/sunflare/sunflare-center-blur.png',\n      configs.baseUrl + '/assets/images/lensflare/sunflare/flare-red.png',\n      configs.baseUrl + '/assets/images/lensflare/sunflare/flare-yellow.png',\n      configs.baseUrl + '/assets/images/lensflare/sunflare/flare-green.png',\n      configs.baseUrl + '/assets/images/lensflare/sunflare/flare-blue.png',\n      configs.baseUrl + '/assets/images/lensflare/sunflare/rainbow-blur.png',\n    ];\n    loadTextures(lensflareImgs, 2).then((textures) => {\n      const [\n        flareSun,\n        flareRed,\n        flareYellow,\n        flareGreen,\n        flareBlue,\n        flareRainB,\n      ] = textures;\n\n      this.lensflare = new Lensflare();\n      var color = new THREE.Color(0xffffff);\n      this.lensflare.addElement(new LensflareElement(flareSun, 70, 0, color));\n      this.lensflare.addElement(new LensflareElement(flareRed, 40, 0.5));\n      this.lensflare.addElement(new LensflareElement(flareYellow, 40, 0.515));\n      this.lensflare.addElement(new LensflareElement(flareGreen, 40, 0.53));\n      this.lensflare.addElement(new LensflareElement(flareBlue, 50, 0.6));\n      this.lensflare.addElement(new LensflareElement(flareRainB, 1500, 0.4));\n      if (this.light.current) {\n        this.light.current.add(this.lensflare);\n      }\n    });\n  };\n\n  getLightPosition = () => {\n    const aspect = 0.99;\n    // const aspect = 1.1;\n    const [x, y, z] = this.props.position;\n    return {\n      x: x * aspect,\n      y: y * aspect,\n      z: z * aspect,\n    };\n  };\n\n  componentDidUpdate(preProps) {\n    if (\n      JSON.stringify(preProps.position) !== JSON.stringify(this.props.position)\n    ) {\n      window.logMessage('lensflare position updated!');\n      const { x, y, z } = this.getLightPosition();\n      if (this.light.current) {\n        this.light.current.position.set(x, y, z);\n      }\n    }\n  }\n\n  render() {\n    const { x, y, z } = this.getLightPosition();\n    return (\n      <pointLight\n        ref={this.light}\n        color={0xffffff}\n        intensity={1}\n        distance={2000}\n        decay={2}\n        position={[x, y, z]}\n      />\n    );\n  }\n}\n\nexport default LensflareComponent;\n","export const needLensflare = (pano, index) => {\n  if (!pano || !pano.variants || index < 0) return false;\n  const curVariant = pano.variants[index];\n  if (!curVariant || curVariant.noLensFlare) return false;\n  if (\n    typeof curVariant.lensFlareLocation[0] !== 'number' ||\n    typeof curVariant.lensFlareLocation[1] !== 'number' ||\n    typeof curVariant.lensFlareLocation[2] !== 'number'\n  ) {\n    return false;\n  }\n  return true;\n};\n\nexport const getLensflareLocation = (pano, index) => {\n  if (!pano || !pano.variants || index < 0) return null;\n  const curVariant = pano.variants[index];\n  if (!curVariant || curVariant.noLensFlare) return null;\n  const [x, y, z] = curVariant.lensFlareLocation;\n  if (typeof x !== 'number' || typeof y !== 'number' || typeof z !== 'number') {\n    return null;\n  }\n  return [x, y, z];\n};\n","import React, { useMemo } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport Lensflare from './lensflare';\nimport { getLensflareLocation } from './lensflareCheck';\n\nfunction WebLensflare(props) {\n  const { pano, variantIndex } = props;\n  const threeContext = useThree();\n  const lensflareLocation = useMemo(\n    () => getLensflareLocation(pano, variantIndex),\n    [pano, variantIndex]\n  );\n\n  if (!lensflareLocation) return null;\n\n  return <Lensflare position={lensflareLocation} {...threeContext} />;\n}\n\nexport default WebLensflare;\n","import React, { useRef, useMemo } from 'react';\nimport * as THREE from 'three';\nimport { useLoader, useThree, useFrame } from '@react-three/fiber';\nimport {\n  get2DScreenPosition,\n  distanceBetween2dCoordinates,\n} from '../../../utils/positionHelper';\nimport configs from '../../../configs';\nimport { getLensflareLocation } from './lensflareCheck';\n\nconst getWindowMinSize = () =>\n  // get min width from center to border\n  (window.innerWidth > window.innerHeight\n    ? window.innerHeight\n    : window.innerWidth) / 2;\n\nconst getCenterScreen = () => ({\n  x: window.innerWidth / 2,\n  y: window.innerHeight / 2,\n});\n\nfunction SunFlare(props) {\n  const [x, y, z] = props.position;\n  const ref = useRef();\n  const [texture] = useLoader(THREE.TextureLoader, [\n    configs.baseUrl + '/assets/images/lensflare/sunflare/sunflare.png',\n  ]);\n  const { camera } = useThree();\n  const curPosition = new THREE.Vector3(x, y, z);\n  const updatePosition = () =>\n    new Promise((resolve) => {\n      ref.current.lookAt(camera.position);\n      const xyLocation = get2DScreenPosition(\n        curPosition,\n        camera,\n        window.innerWidth,\n        window.innerHeight\n      );\n      if (!xyLocation || !xyLocation.visible) {\n        if (ref.current.material.opacity > 0) {\n          ref.current.material.opacity = 0;\n        }\n      } else {\n        const maxVisibleDistance = getWindowMinSize(),\n          centerArea = 50,\n          screenCenter = getCenterScreen();\n        const distance = distanceBetween2dCoordinates(xyLocation, screenCenter);\n        if (distance <= maxVisibleDistance) {\n          if (distance <= centerArea) {\n            if (ref.current.material.opacity !== 1) {\n              ref.current.material.opacity = 1;\n            }\n          } else {\n            const newOpacity =\n              1.0 - (distance - centerArea) / (maxVisibleDistance - centerArea);\n            ref.current.material.opacity =\n              newOpacity > 0 ? (newOpacity > 1 ? 1 : newOpacity) : 0;\n          }\n        } else if (\n          !ref.current.material.opacity ||\n          ref.current.material.opacity > 0\n        ) {\n          ref.current.material.opacity = 0;\n        }\n      }\n      resolve(true);\n    });\n  useFrame(() => updatePosition());\n\n  const meshPosition = useMemo(() => {\n    const k = 0.7;\n    return [x * k, y * k, z * k];\n  }, [x, y, z]);\n\n  const planeArgs = useMemo(() => [300, 300, 1, 1], []);\n\n  return (\n    <mesh ref={ref} position={meshPosition}>\n      <planeBufferGeometry attach=\"geometry\" args={planeArgs} />\n      <meshBasicMaterial\n        attach=\"material\"\n        map={texture}\n        side={THREE.DoubleSide}\n        depthWrite={false}\n        transparent={true}\n      />\n    </mesh>\n  );\n}\n\nfunction WebSunFlare(props) {\n  const { pano, variantIndex } = props;\n  const lensflareLocation = useMemo(\n    () => getLensflareLocation(pano, variantIndex),\n    [pano, variantIndex]\n  );\n  return lensflareLocation ? (\n    <SunFlare position={[...lensflareLocation]} />\n  ) : null;\n}\n\nexport default WebSunFlare;\n","import { useCallback } from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { addHotspotHistory } from 'store/actions';\nimport configs from 'configs';\n\nexport function useAddHotspotHistory() {\n  const dispatch = useDispatch();\n  const { media } = useSelector((state) => state.json);\n\n  return useCallback(\n    (hsId) => {\n      if ([configs.mapRoute, configs.socialRoute].includes(hsId)) return;\n      const mediaHotspot = media.find((m) => m.id === hsId);\n      if (mediaHotspot) dispatch(addHotspotHistory(mediaHotspot._id));\n    },\n    [dispatch, media]\n  );\n}\n","import { useMemo } from 'react';\n\nimport { useHistory } from 'react-router';\n\nexport function useParamsByLocation() {\n  const {\n    location: { pathname },\n  } = useHistory();\n\n  return useMemo(() => {\n    if (!pathname)\n      return { tourId: '', groupId: '', sceneId: '', hotspotId: '' };\n    const [, tourId, groupId, sceneId, hotspotId] = pathname.split('/');\n    return { tourId, groupId, sceneId, hotspotId };\n  }, [pathname]);\n}\n","export const CANVAS_H = 200;\n// because [tan(20deg) = CANVAS_W / CANVAS_H] so:\nexport const CANVAS_W = CANVAS_H * Math.tan(Math.PI / 9);\nconst OFFSET_X = CANVAS_W * 0.5;\n\nexport const CANVAS_STYLE = {\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  top: '0',\n  left: '0',\n};\n\nexport const getCanvasX = (x, w) => {\n  if (x <= w * 0.2) {\n    return CANVAS_W * 0.5 - OFFSET_X;\n  } else if (x >= w * 0.8) {\n    return CANVAS_W * 0.5 + OFFSET_X;\n  } else if (x === w * 0.5) {\n    return CANVAS_W * 0.5;\n  } else {\n    const diff = Math.abs(x - w * 0.5);\n    const totalDiff = w * 0.3;\n    const percent = diff / totalDiff;\n    const offsetX = OFFSET_X * percent;\n    if (x < w * 0.5) {\n      // left\n      return CANVAS_W * 0.5 - offsetX;\n    } else {\n      // right\n      return CANVAS_W * 0.5 + offsetX;\n    }\n  }\n};\n","import { Vector3, Vector2, PerspectiveCamera, OrthographicCamera } from 'three';\nimport React, { useRef, useState, useEffect, useMemo } from 'react';\nimport ReactDOM from 'react-dom';\nimport { useFrame, useThree } from '@react-three/fiber';\nimport { getCanvasX, CANVAS_W, CANVAS_H } from './utils';\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction calcXY({ x, y }, { width, height }) {\n  const halfW = width / 2;\n  const halfH = height / 2;\n  return [x * halfW + halfW, -(y * halfH) + halfH];\n}\n\nfunction calculatePosition1(el, camera, size = { width: 0, height: 0 }) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  return calcXY(objectPos, size);\n}\n\nfunction isVisibleInRange(x, y, w, h, percent) {\n  const min = 0 + percent,\n    max = 1 - percent;\n  return !(x < w * min || x > w * max || y < h * min || y > h * max);\n}\n\nconst OPACITY_RANGE = 0.1;\n\nfunction calcOpacityFloor(curPercent, percent) {\n  const evaluate = curPercent - percent;\n  return evaluate / OPACITY_RANGE;\n}\n\nfunction calcOpacityCeil(curPercent, percent) {\n  const maxRange = percent + OPACITY_RANGE;\n  const minPercent = 1 - maxRange;\n  const evaluate = curPercent - minPercent;\n  return 1 - evaluate / OPACITY_RANGE;\n}\n\nfunction getOpacityPercent(val, target) {\n  return Math.min(Math.max(val / target, 0), 1);\n}\n\nfunction calcOpacity(x, y, w, h, percent) {\n  const maxPercent = 1 - percent;\n  const curPercentX = getOpacityPercent(x, w);\n  const curPercentY = getOpacityPercent(y, h);\n  if (curPercentX < percent || curPercentY < percent) {\n    return 0;\n  }\n  if (curPercentX > maxPercent || curPercentY > maxPercent) {\n    return 0;\n  }\n  const opacityFloor = percent + OPACITY_RANGE;\n  const opacityCeil = 1 - opacityFloor;\n  const checkFloorX = Math.max(curPercentX, opacityFloor) === opacityFloor;\n  const checkCeilX = Math.min(curPercentX, opacityCeil) === opacityCeil;\n  const checkFloorY = Math.max(curPercentY, opacityFloor) === opacityFloor;\n  const checkCeilY = Math.min(curPercentY, opacityCeil) === opacityCeil;\n\n  const opacity = { x: 1, y: 1 };\n  if (checkFloorX) {\n    opacity.x = calcOpacityFloor(curPercentX, percent);\n  }\n  if (checkCeilX) {\n    opacity.x = calcOpacityCeil(curPercentX, percent);\n  }\n  if (checkFloorY) {\n    opacity.y = calcOpacityFloor(curPercentY, percent);\n  }\n  if (checkCeilY) {\n    opacity.y = calcOpacityCeil(curPercentY, percent);\n  }\n\n  return opacity.x < opacity.y ? opacity.x : opacity.y;\n}\n\nfunction isVisibleCheck(\n  x,\n  y,\n  size = { width: 0, height: 0 },\n  isBehind = false,\n  isSkytag = false\n) {\n  if (isBehind) return false;\n  const w = size.width,\n    h = size.height;\n  const percent = isSkytag ? 0.2 : 0.1;\n  return isVisibleInRange(x, y, w, h, percent);\n}\n\nfunction isBehindCheck(objectPos, camera) {\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction calculatePosition2(\n  el,\n  x,\n  y,\n  camera,\n  size = { width: 0, height: 0 },\n  isSkytag\n) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const isBehind = isBehindCheck(objectPos, camera);\n  const isVisible = isVisibleCheck(x, y, size, isBehind, isSkytag);\n  const percent = isSkytag ? 0.2 : 0.1;\n  const opacity = !isVisible\n    ? 0\n    : calcOpacity(x, y, size.width, size.height, percent);\n\n  return [isVisible, isBehind, opacity];\n}\n\nfunction calculatePosition(el, camera, size = { width: 0, height: 0 }) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const [x, y] = calcXY(objectPos, size);\n  const isBehind = isBehindCheck(objectPos, camera);\n  const isVisible = isVisibleCheck(x, y, size, isBehind);\n  const opacity = !isVisible\n    ? 0\n    : calcOpacity(x, y, size.width, size.height, 0.1);\n  return [x, y, isVisible, isBehind, opacity];\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof PerspectiveCamera) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = (camera.fov * Math.PI) / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    return 1 / (2 * Math.tan(vFOV / 2) * dist);\n  }\n  if (camera instanceof OrthographicCamera) return camera.zoom;\n  return 1;\n}\n\nconst objectZIndex = (el, camera, zIndexRange) => {\n  if (\n    camera instanceof PerspectiveCamera ||\n    camera instanceof OrthographicCamera\n  ) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n  return undefined;\n};\n\nconst ori = new Vector2(CANVAS_W / 2, CANVAS_H / 2);\n\nconst getPercent = (x, y, percent) => {\n  const tp = new Vector2(x - ori.x, y - ori.y);\n  tp.multiplyScalar(percent);\n  return { x: tp.x + ori.x, y: tp.y + ori.y };\n};\n\nconst ANIMATION_DURATION = 500;\n\nconst getElapsed = (time) => Math.min(new Date() - time, ANIMATION_DURATION);\n\nconst drawHsLinePercent = (ctx, toX, toY, visibleAt) => {\n  const elapsed = getElapsed(visibleAt);\n  if (elapsed < ANIMATION_DURATION) {\n    const percent = elapsed / ANIMATION_DURATION;\n    const { x, y } = getPercent(toX, toY, percent);\n    drawHsLine(ctx, x, y);\n  } else {\n    drawHsLine(ctx, toX, toY);\n  }\n};\n\nconst drawHsLine = (ctx, toX, toY) => {\n  ctx.beginPath();\n  ctx.moveTo(ori.x, ori.y);\n  ctx.lineTo(toX, toY);\n  ctx.lineWidth = 1;\n  ctx.strokeStyle = 'white';\n  ctx.stroke();\n};\n\nconst onPositionChanged = (\n  x,\n  isVisible,\n  size,\n  up,\n  cvRef,\n  hsRef,\n  visibleAt,\n  opacity = 1\n) => {\n  hsRef.parentNode.style.visibility = isVisible ? 'visible' : 'hidden';\n  cvRef.style.opacity = opacity;\n\n  const ctx = cvRef.getContext('2d');\n  ctx.clearRect(0, 0, CANVAS_W, CANVAS_H);\n  if (isVisible) {\n    const target = {\n      x: getCanvasX(x, size.width),\n      y: up ? 0 : CANVAS_H,\n    };\n    const hs2d = {\n      x: target.x - CANVAS_W / 2,\n      y: (up ? -1 : 1) * 0.5 * CANVAS_H,\n    };\n    drawHsLinePercent(ctx, target.x, target.y, visibleAt);\n    const elapsed = getElapsed(visibleAt);\n    if (elapsed < ANIMATION_DURATION) {\n      hsRef.style.opacity = '0';\n    } else {\n      hsRef.style.opacity = opacity;\n    }\n    hsRef.style.transform = `translate(${hs2d.x}px,${hs2d.y}px)`;\n  }\n};\n\nconst skytagTransition = (el, isVisible) => {\n  const childEl = el.querySelector('.PopOver');\n\n  childEl.style.opacity = isVisible ? '1' : '0';\n};\n\nexport default React.forwardRef(\n  (\n    {\n      children,\n      eps = 0.001,\n      style,\n      className,\n      prepend,\n      center,\n      fullscreen,\n      portal,\n      scaleFactor,\n      zIndexRange = [16777271, 0],\n      hotspotRef,\n      canvasRef,\n      isSkytag,\n      isAerialHs,\n      ...props\n    },\n    ref\n  ) => {\n    const { gl, scene, camera, size } = useThree();\n    const [el] = useState(() => document.createElement('div'));\n    const group = useRef(null);\n    const old = useRef([0, 0]);\n    const up = useMemo(() => {\n      if (isAerialHs) return true;\n      return props.position[1] > 0;\n    }, [props.position, isAerialHs]);\n    const target = portal?.current ?? gl.domElement.parentNode;\n    const interval = useRef(null);\n    const visibleAt = useRef(null);\n\n    useEffect(() => {\n      if (group.current) {\n        scene.updateMatrixWorld();\n        const [x, y, isVisible] = calculatePosition(\n          group.current,\n          camera,\n          size\n        );\n        if (canvasRef.current && hotspotRef.current) {\n          if (isVisible) {\n            visibleAt.current = visibleAt.current || new Date();\n          } else {\n            visibleAt.current = null;\n          }\n          onPositionChanged(\n            x,\n            isVisible,\n            size,\n            up,\n            canvasRef.current,\n            hotspotRef.current,\n            visibleAt.current\n          );\n        }\n        el.style.cssText = `position:absolute;top:0;left:0;transform:translate3d(${x}px,${y}px,0);transform-origin:0 0;`;\n        if (target) {\n          if (prepend) target.prepend(el);\n          else target.appendChild(el);\n        }\n        return () => {\n          if (target) target.removeChild(el);\n          ReactDOM.unmountComponentAtNode(el);\n        };\n      }\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [target]);\n\n    const styles = useMemo(\n      () => ({\n        position: 'absolute',\n        transform: center ? 'translate3d(-50%,-50%,0)' : 'none',\n        ...(fullscreen && {\n          top: -size.height / 2,\n          left: -size.width / 2,\n          width: size.width,\n          height: size.height,\n        }),\n        ...style,\n      }),\n      [style, center, fullscreen, size]\n    );\n\n    useEffect(\n      () =>\n        void ReactDOM.render(\n          <div\n            ref={ref}\n            style={styles}\n            className={className}\n            children={children}\n          />,\n          el\n        )\n    );\n\n    useFrame(() => {\n      if (group.current) {\n        const [x, y] = calculatePosition1(group.current, camera, size);\n        if (\n          Math.abs(old.current[0] - x) > eps ||\n          Math.abs(old.current[1] - y) > eps\n        ) {\n          const [isVisible, isBehind, opacity] = calculatePosition2(\n            group.current,\n            x,\n            y,\n            camera,\n            size,\n            isSkytag\n          );\n          el.style.visibility = isBehind ? 'hidden' : 'visible';\n          if (canvasRef.current && hotspotRef.current) {\n            if (isVisible) {\n              visibleAt.current = visibleAt.current || new Date();\n            } else {\n              visibleAt.current = null;\n            }\n            if (interval.current) {\n              clearInterval(interval.current);\n              interval.current = null;\n            }\n            onPositionChanged(\n              x,\n              isVisible,\n              size,\n              up,\n              canvasRef.current,\n              hotspotRef.current,\n              visibleAt.current,\n              opacity\n            );\n            if (interval.current === null) {\n              interval.current = setInterval(() => {\n                if (!canvasRef.current || !hotspotRef.current) {\n                  return clearInterval(interval.current);\n                }\n                const elapsed = getElapsed(visibleAt.current);\n                onPositionChanged(\n                  x,\n                  isVisible,\n                  size,\n                  up,\n                  canvasRef.current,\n                  hotspotRef.current,\n                  visibleAt.current,\n                  opacity\n                );\n                if (elapsed > ANIMATION_DURATION) {\n                  clearInterval(interval.current);\n                }\n              }, 10);\n            }\n          }\n          const scale =\n            scaleFactor === undefined\n              ? 1\n              : objectScale(group.current, camera) * scaleFactor;\n          isSkytag && skytagTransition(el, isVisible);\n          el.style.transform = `translate3d(${x}px,${y}px,0) scale(${scale})`;\n          el.style.zIndex = `${objectZIndex(\n            group.current,\n            camera,\n            zIndexRange\n          )}`;\n        }\n        old.current = [x, y];\n      }\n    });\n\n    return <group {...props} ref={group} />;\n  }\n);\n","import React from 'react';\nimport './hotspotContainer.scss';\n\nconst HotspotContainer = React.forwardRef((props, ref) => {\n  return (\n    <div className=\"hotspot-container\">\n      <div ref={ref} className=\"hotspot-transform\">\n        {props.children}\n      </div>\n    </div>\n  );\n});\n\nexport default React.memo(HotspotContainer);\n","import MobileDetect from 'mobile-detect';\n\nconst detector = new MobileDetect(window.navigator.userAgent);\n\nexport const isMobile = () => detector.mobile();\nexport const isTablet = () => detector.tablet();\nexport const isPhone = () => detector.phone();\nexport const isIOS = () => detector.os() === 'iOS';\n","const SCENE_TYPE = {\n  AERIAL: 'AERIAL',\n  AERIAL_MAP: 'AERIAL_MAP',\n  GROUND: 'GROUND',\n  LANDING: 'LANDING',\n};\n\nexport default SCENE_TYPE;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  // const borderColor = props.borderColor || '#447594';\n  // const color = props.color || '#326f3f';\n  return (\n    <svg\n      data-name=\"Aerial Map\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 113.5 113.5\"\n    >\n      <circle fill=\"#739da0\" opacity=\"0.75\" cx=\"56.67\" cy=\"56.83\" r=\"35.48\" />\n      <path\n        opacity=\"0.25\"\n        d=\"M983.35,538.71l-4.31-.89a3.43,3.43,0,0,0-.42-.94,3.18,3.18,0,0,0-2-1.37,2.81,2.81,0,0,0-.65-.07,3.2,3.2,0,0,0-2.51,1.22l-4.31-.89a3.66,3.66,0,0,0-.65-.06,3.19,3.19,0,0,0-2.69,4.93l-10.35-2.14a3.15,3.15,0,0,0,1.35-2,3.21,3.21,0,0,0-2.49-3.79l-4.3-.88a3.24,3.24,0,0,0-.43-1,3.13,3.13,0,0,0-2-1.37,2.88,2.88,0,0,0-.65-.07h0a3.21,3.21,0,0,0-2.51,1.23l-4.32-.89a2.79,2.79,0,0,0-.64-.07,3.2,3.2,0,0,0-.65,6.34l4,.82-.45,2.19a3.2,3.2,0,0,0,2.48,3.78l3.6.74a7.4,7.4,0,0,0-2,3.9,3.21,3.21,0,0,0,2.5,3.7H949a2.92,2.92,0,0,0,.54,0,3.19,3.19,0,0,0,3.14-2.63,1.11,1.11,0,0,1,.16-.39,10.14,10.14,0,0,0,5.39,3.06,9.76,9.76,0,0,0,2,.21,10.11,10.11,0,0,0,4.13-.88,1,1,0,0,1,0,.41,3.19,3.19,0,0,0,2.4,3.84h.08a3.39,3.39,0,0,0,.64.07,3.19,3.19,0,0,0,3.12-2.48,7.5,7.5,0,0,0-.32-4.38l3.59.74a3.48,3.48,0,0,0,.64.07,3.23,3.23,0,0,0,3.14-2.56l.45-2.19,4,.82a3.5,3.5,0,0,0,.65.07,3.2,3.2,0,0,0,.65-6.34Zm-.1,4.18a1.22,1.22,0,0,1-.24.1A1.22,1.22,0,0,0,983.25,542.89Zm-7.07-5.43a1.53,1.53,0,0,0-.37,0l.13,0Zm-.94.21a1.34,1.34,0,0,0-.2.21A1,1,0,0,1,975.24,537.67Zm.39-.18-.24.1Zm-.69.49a1.2,1.2,0,0,0-.17.42A1.2,1.2,0,0,1,974.94,538Zm-11,10.62-.24.12Zm-1.26.52h0Zm-1.07.25-.26,0Zm-1.08-2.29h0Zm.81-.09.16,0Zm.86-.23.16-.07Zm.66-.29.22-.12Zm.63-.38.22-.15Zm.61-.47.17-.15ZM960,547.09h0Zm-7.73-4a1.23,1.23,0,0,1,0-.38,1.23,1.23,0,0,0,0,.38c0,.14.09.28.13.43C952.35,543.38,952.29,543.24,952.26,543.1Zm-4.79-7.3L953.4,537a1.22,1.22,0,0,0,.38,0l-.13,0-.25,0-5.93-1.22-.62,3ZM954,537l.25-.1Zm.39-.18a1,1,0,0,0,.21-.21A1,1,0,0,1,954.34,536.82Zm.31-.31a1.28,1.28,0,0,0,.17-.42A1.2,1.2,0,0,1,954.65,536.51Zm11.93,10h0c.1-.12.2-.22.29-.35C966.78,546.24,966.68,546.34,966.58,546.46Zm7.58-5.15-5.93-1.23,5.93,1.23Zm-6.25-3.45.25-.1A1.09,1.09,0,0,0,967.91,537.86Zm.8-.13a1.61,1.61,0,0,0-.38,0l.14,0Zm-.94.21a1.39,1.39,0,0,0-.21.21A1.39,1.39,0,0,1,967.77,537.94Zm-.3.31a1.22,1.22,0,0,0-.18.42A1.22,1.22,0,0,1,967.47,538.25Zm-.18.89a1.09,1.09,0,0,0,.18.43A1.09,1.09,0,0,1,967.29,539.14Zm-20.16-7.67a.92.92,0,0,0-.37,0,.5.5,0,0,1,.13,0Zm-.94.21a1,1,0,0,0-.2.2A.76.76,0,0,1,946.19,531.68Zm.39-.18a.82.82,0,0,0-.24.1A.82.82,0,0,1,946.58,531.5Zm-.69.49a1.15,1.15,0,0,0-.17.41A1.15,1.15,0,0,1,945.89,532Zm-6.23-.25a1.21,1.21,0,0,0-.38,0l.14,0Zm-.94.21a1,1,0,0,0-.21.2A1,1,0,0,1,938.72,532Zm.39-.19a1.12,1.12,0,0,0-.25.11A1.12,1.12,0,0,1,939.11,531.76Zm-.69.5a1.17,1.17,0,0,0-.18.41A1.09,1.09,0,0,1,938.42,532.26Zm-.18.89a1.28,1.28,0,0,0,.17.42A1.28,1.28,0,0,1,938.24,533.15Zm11,16.08a1.14,1.14,0,0,0,.37,0l-.15,0Zm.54,0a.8.8,0,0,0,.25-.11A.8.8,0,0,1,949.82,549.19Zm.39-.19a1.39,1.39,0,0,0,.21-.21A1.39,1.39,0,0,1,950.21,549Zm.3-.32a1.13,1.13,0,0,0,.17-.42A1.13,1.13,0,0,1,950.51,548.68Zm.45-1.24a2.9,2.9,0,0,1,.49-.71A2.9,2.9,0,0,0,951,547.44Zm.81-1a2.9,2.9,0,0,1,.74-.44A2.9,2.9,0,0,0,951.77,546.44Zm1.57-.77a1,1,0,0,1-.41.19,1,1,0,0,0,.41-.19,9,9,0,0,0,1,1.29A9,9,0,0,1,953.34,545.67Zm6.07,3.79a7.76,7.76,0,0,1-.82-.13A7.76,7.76,0,0,0,959.41,549.46Zm.27,0c.18,0,.36,0,.55,0h0C960,549.5,959.86,549.48,959.68,549.47Zm7.77,3.49a1,1,0,0,1-.24,0,.92.92,0,0,0,.37,0A.5.5,0,0,1,967.45,553Zm.68-.23a.8.8,0,0,0,.21-.2A1,1,0,0,1,968.13,552.73Zm-.38.18a1.73,1.73,0,0,0,.24-.1Zm.69-.48a1.32,1.32,0,0,0,.18-.4A1.32,1.32,0,0,1,968.44,552.43Zm5.8-5.55a1,1,0,0,0,.38,0,.7.7,0,0,1-.14,0Zm.94-.21a1,1,0,0,0,.21-.2A1.31,1.31,0,0,1,975.18,546.67Zm-.39.18a1.09,1.09,0,0,0,.25-.1A1.09,1.09,0,0,1,974.79,546.85Zm7.67-3.83-5.94-1.22-.86,4.15a1.17,1.17,0,0,1-.18.41,1.17,1.17,0,0,0,.18-.41l.86-4.15,5.94,1.22a.92.92,0,0,0,.37,0,.5.5,0,0,1-.13,0Zm.94-.21a1.26,1.26,0,0,0,.2-.2A1.26,1.26,0,0,1,983.4,542.81Zm.47-.72a1.15,1.15,0,0,1-.17.41,1.15,1.15,0,0,0,.17-.41,1.11,1.11,0,0,0,0-.48A1.11,1.11,0,0,1,983.87,542.09Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M982.94,539.67,977,538.44l.12-.56a1.21,1.21,0,0,0-.94-1.42,1.2,1.2,0,0,0-1.41.94l-.12.56-5.94-1.23a1.21,1.21,0,0,0-1.42.94,1.2,1.2,0,0,0,.94,1.41l5.93,1.23-.61,3-26.7-5.51.62-3L953.4,536a1.2,1.2,0,0,0,.49-2.35L948,532.45l.12-.56a1.21,1.21,0,0,0-.94-1.42,1.18,1.18,0,0,0-1.41.93l-.12.56-5.94-1.22a1.2,1.2,0,0,0-1.42.93,1.21,1.21,0,0,0,.93,1.42l5.94,1.22-.85,4.16a1.18,1.18,0,0,0,.93,1.41l7.14,1.48a1.23,1.23,0,0,0-.07.74c0,.15.09.28.13.43h0a5.46,5.46,0,0,0-4,4.3,1.21,1.21,0,0,0,.94,1.39h0a1.2,1.2,0,0,0,1.4-1,3,3,0,0,1,2.25-2.4,1,1,0,0,0,.41-.19,8.12,8.12,0,0,0,11.52,2.38,1.07,1.07,0,0,0,.3.34,3,3,0,0,1,1.12,3.09,1.19,1.19,0,0,0,.9,1.44h0a1.21,1.21,0,0,0,1.41-.9,5.44,5.44,0,0,0-2-5.55l0,0c.1-.12.2-.22.29-.35a1.15,1.15,0,0,0,.23-.7l7.14,1.47a1.2,1.2,0,0,0,1.42-.93l.86-4.15,5.94,1.22a1.2,1.2,0,0,0,.48-2.35ZM959.08,546a5.77,5.77,0,0,1-4.39-4.13l10,2.07A5.76,5.76,0,0,1,959.08,546Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M959.67,501.86a38.44,38.44,0,0,0-28.23,64.58l-28,28a1.49,1.49,0,0,0,0,2.12,1.5,1.5,0,0,0,2.12,0l28-28a38.46,38.46,0,1,0,26.11-66.7Zm0,73.95a35.48,35.48,0,1,1,35.47-35.48A35.47,35.47,0,0,1,959.67,575.81Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill=\"none\"\n        d=\"M986,515.5a1.51,1.51,0,0,1-1.06-.44,1.49,1.49,0,0,1,0-2.12l29-29a1.5,1.5,0,0,1,2.12,2.12l-29,29A1.51,1.51,0,0,1,986,515.5Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  // const borderColor = props.borderColor || '#447594';\n  // const color = props.color || '#326f3f';\n  return (\n    <svg\n      data-name=\"Aerial Scene\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 113.5 113.5\"\n    >\n      <circle fill=\"#72a5bf\" opacity=\"0.75\" cx=\"56.67\" cy=\"56.83\" r=\"35.48\" />\n      <path\n        opacity=\"0.25\"\n        d=\"M983.35,538.71l-4.31-.89a3.43,3.43,0,0,0-.42-.94,3.18,3.18,0,0,0-2-1.37,2.81,2.81,0,0,0-.65-.07,3.2,3.2,0,0,0-2.51,1.22l-4.31-.89a3.66,3.66,0,0,0-.65-.06,3.19,3.19,0,0,0-2.69,4.93l-10.35-2.14a3.15,3.15,0,0,0,1.35-2,3.21,3.21,0,0,0-2.49-3.79l-4.3-.88a3.24,3.24,0,0,0-.43-1,3.13,3.13,0,0,0-2-1.37,2.88,2.88,0,0,0-.65-.07h0a3.21,3.21,0,0,0-2.51,1.23l-4.32-.89a2.79,2.79,0,0,0-.64-.07,3.2,3.2,0,0,0-.65,6.34l4,.82-.45,2.19a3.2,3.2,0,0,0,2.48,3.78l3.6.74a7.4,7.4,0,0,0-2,3.9,3.21,3.21,0,0,0,2.5,3.7H949a2.92,2.92,0,0,0,.54,0,3.19,3.19,0,0,0,3.14-2.63,1.11,1.11,0,0,1,.16-.39,10.14,10.14,0,0,0,5.39,3.06,9.76,9.76,0,0,0,2,.21,10.11,10.11,0,0,0,4.13-.88,1,1,0,0,1,0,.41,3.19,3.19,0,0,0,2.4,3.84h.08a3.39,3.39,0,0,0,.64.07,3.19,3.19,0,0,0,3.12-2.48,7.5,7.5,0,0,0-.32-4.38l3.59.74a3.48,3.48,0,0,0,.64.07,3.23,3.23,0,0,0,3.14-2.56l.45-2.19,4,.82a3.5,3.5,0,0,0,.65.07,3.2,3.2,0,0,0,.65-6.34Zm-.1,4.18a1.22,1.22,0,0,1-.24.1A1.22,1.22,0,0,0,983.25,542.89Zm-7.07-5.43a1.53,1.53,0,0,0-.37,0l.13,0Zm-.94.21a1.34,1.34,0,0,0-.2.21A1,1,0,0,1,975.24,537.67Zm.39-.18-.24.1Zm-.69.49a1.2,1.2,0,0,0-.17.42A1.2,1.2,0,0,1,974.94,538Zm-11,10.62-.24.12Zm-1.26.52h0Zm-1.07.25-.26,0Zm-1.08-2.29h0Zm.81-.09.16,0Zm.86-.23.16-.07Zm.66-.29.22-.12Zm.63-.38.22-.15Zm.61-.47.17-.15ZM960,547.09h0Zm-7.73-4a1.23,1.23,0,0,1,0-.38,1.23,1.23,0,0,0,0,.38c0,.14.09.28.13.43C952.35,543.38,952.29,543.24,952.26,543.1Zm-4.79-7.3L953.4,537a1.22,1.22,0,0,0,.38,0l-.13,0-.25,0-5.93-1.22-.62,3ZM954,537l.25-.1Zm.39-.18a1,1,0,0,0,.21-.21A1,1,0,0,1,954.34,536.82Zm.31-.31a1.28,1.28,0,0,0,.17-.42A1.2,1.2,0,0,1,954.65,536.51Zm11.93,10h0c.1-.12.2-.22.29-.35C966.78,546.24,966.68,546.34,966.58,546.46Zm7.58-5.15-5.93-1.23,5.93,1.23Zm-6.25-3.45.25-.1A1.09,1.09,0,0,0,967.91,537.86Zm.8-.13a1.61,1.61,0,0,0-.38,0l.14,0Zm-.94.21a1.39,1.39,0,0,0-.21.21A1.39,1.39,0,0,1,967.77,537.94Zm-.3.31a1.22,1.22,0,0,0-.18.42A1.22,1.22,0,0,1,967.47,538.25Zm-.18.89a1.09,1.09,0,0,0,.18.43A1.09,1.09,0,0,1,967.29,539.14Zm-20.16-7.67a.92.92,0,0,0-.37,0,.5.5,0,0,1,.13,0Zm-.94.21a1,1,0,0,0-.2.2A.76.76,0,0,1,946.19,531.68Zm.39-.18a.82.82,0,0,0-.24.1A.82.82,0,0,1,946.58,531.5Zm-.69.49a1.15,1.15,0,0,0-.17.41A1.15,1.15,0,0,1,945.89,532Zm-6.23-.25a1.21,1.21,0,0,0-.38,0l.14,0Zm-.94.21a1,1,0,0,0-.21.2A1,1,0,0,1,938.72,532Zm.39-.19a1.12,1.12,0,0,0-.25.11A1.12,1.12,0,0,1,939.11,531.76Zm-.69.5a1.17,1.17,0,0,0-.18.41A1.09,1.09,0,0,1,938.42,532.26Zm-.18.89a1.28,1.28,0,0,0,.17.42A1.28,1.28,0,0,1,938.24,533.15Zm11,16.08a1.14,1.14,0,0,0,.37,0l-.15,0Zm.54,0a.8.8,0,0,0,.25-.11A.8.8,0,0,1,949.82,549.19Zm.39-.19a1.39,1.39,0,0,0,.21-.21A1.39,1.39,0,0,1,950.21,549Zm.3-.32a1.13,1.13,0,0,0,.17-.42A1.13,1.13,0,0,1,950.51,548.68Zm.45-1.24a2.9,2.9,0,0,1,.49-.71A2.9,2.9,0,0,0,951,547.44Zm.81-1a2.9,2.9,0,0,1,.74-.44A2.9,2.9,0,0,0,951.77,546.44Zm1.57-.77a1,1,0,0,1-.41.19,1,1,0,0,0,.41-.19,9,9,0,0,0,1,1.29A9,9,0,0,1,953.34,545.67Zm6.07,3.79a7.76,7.76,0,0,1-.82-.13A7.76,7.76,0,0,0,959.41,549.46Zm.27,0c.18,0,.36,0,.55,0h0C960,549.5,959.86,549.48,959.68,549.47Zm7.77,3.49a1,1,0,0,1-.24,0,.92.92,0,0,0,.37,0A.5.5,0,0,1,967.45,553Zm.68-.23a.8.8,0,0,0,.21-.2A1,1,0,0,1,968.13,552.73Zm-.38.18a1.73,1.73,0,0,0,.24-.1Zm.69-.48a1.32,1.32,0,0,0,.18-.4A1.32,1.32,0,0,1,968.44,552.43Zm5.8-5.55a1,1,0,0,0,.38,0,.7.7,0,0,1-.14,0Zm.94-.21a1,1,0,0,0,.21-.2A1.31,1.31,0,0,1,975.18,546.67Zm-.39.18a1.09,1.09,0,0,0,.25-.1A1.09,1.09,0,0,1,974.79,546.85Zm7.67-3.83-5.94-1.22-.86,4.15a1.17,1.17,0,0,1-.18.41,1.17,1.17,0,0,0,.18-.41l.86-4.15,5.94,1.22a.92.92,0,0,0,.37,0,.5.5,0,0,1-.13,0Zm.94-.21a1.26,1.26,0,0,0,.2-.2A1.26,1.26,0,0,1,983.4,542.81Zm.47-.72a1.15,1.15,0,0,1-.17.41,1.15,1.15,0,0,0,.17-.41,1.11,1.11,0,0,0,0-.48A1.11,1.11,0,0,1,983.87,542.09Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M982.94,539.67,977,538.44l.12-.56a1.21,1.21,0,0,0-.94-1.42,1.2,1.2,0,0,0-1.41.94l-.12.56-5.94-1.23a1.21,1.21,0,0,0-1.42.94,1.2,1.2,0,0,0,.94,1.41l5.93,1.23-.61,3-26.7-5.51.62-3L953.4,536a1.2,1.2,0,0,0,.49-2.35L948,532.45l.12-.56a1.21,1.21,0,0,0-.94-1.42,1.18,1.18,0,0,0-1.41.93l-.12.56-5.94-1.22a1.2,1.2,0,0,0-1.42.93,1.21,1.21,0,0,0,.93,1.42l5.94,1.22-.85,4.16a1.18,1.18,0,0,0,.93,1.41l7.14,1.48a1.23,1.23,0,0,0-.07.74c0,.15.09.28.13.43h0a5.46,5.46,0,0,0-4,4.3,1.21,1.21,0,0,0,.94,1.39h0a1.2,1.2,0,0,0,1.4-1,3,3,0,0,1,2.25-2.4,1,1,0,0,0,.41-.19,8.12,8.12,0,0,0,11.52,2.38,1.07,1.07,0,0,0,.3.34,3,3,0,0,1,1.12,3.09,1.19,1.19,0,0,0,.9,1.44h0a1.21,1.21,0,0,0,1.41-.9,5.44,5.44,0,0,0-2-5.55l0,0c.1-.12.2-.22.29-.35a1.15,1.15,0,0,0,.23-.7l7.14,1.47a1.2,1.2,0,0,0,1.42-.93l.86-4.15,5.94,1.22a1.2,1.2,0,0,0,.48-2.35ZM959.08,546a5.77,5.77,0,0,1-4.39-4.13l10,2.07A5.76,5.76,0,0,1,959.08,546Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill=\"none\"\n        d=\"M986,515.5a1.51,1.51,0,0,1-1.06-.44,1.49,1.49,0,0,1,0-2.12l29-29a1.5,1.5,0,0,1,2.12,2.12l-29,29A1.51,1.51,0,0,1,986,515.5Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill=\"none\"\n        d=\"M904.5,597a1.51,1.51,0,0,1-1.06-.44,1.49,1.49,0,0,1,0-2.12l29-29a1.5,1.5,0,0,1,2.12,2.12l-29,29A1.51,1.51,0,0,1,904.5,597Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        opacity=\"0.75\"\n        fill={bgColor}\n        d=\"M959.67,504.86a35.48,35.48,0,1,1-35.48,35.47,35.47,35.47,0,0,1,35.48-35.47m0-3a38.48,38.48,0,1,0,38.47,38.47,38.52,38.52,0,0,0-38.47-38.47Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  // const borderColor = props.borderColor || '#447594';\n  // const color = props.color || '#326f3f';\n  return (\n    <svg\n      data-name=\"Ground Scene\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 113.5 113.5\"\n    >\n      <circle fill=\"#a6a6a6\" opacity=\"0.75\" cx=\"56.67\" cy=\"56.83\" r=\"35.48\" />\n      <path\n        fill=\"none\"\n        d=\"M986,515.5a1.51,1.51,0,0,1-1.06-.44,1.49,1.49,0,0,1,0-2.12l29-29a1.5,1.5,0,0,1,2.12,2.12l-29,29A1.51,1.51,0,0,1,986,515.5Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill=\"none\"\n        d=\"M904.5,597a1.51,1.51,0,0,1-1.06-.44,1.49,1.49,0,0,1,0-2.12l29-29a1.5,1.5,0,0,1,2.12,2.12l-29,29A1.51,1.51,0,0,1,904.5,597Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        opacity=\"0.75\"\n        fill={bgColor}\n        d=\"M959.67,504.86a35.48,35.48,0,1,1-35.48,35.47,35.47,35.47,0,0,1,35.48-35.47m0-3a38.48,38.48,0,1,0,38.47,38.47,38.52,38.52,0,0,0-38.47-38.47Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <g opacity=\"0.25\">\n        <path\n          d=\"M949.65,550.83,943.09,560a3,3,0,0,0,4.88,3.49l7.4-10.37.66-4.42-5.2-5.21Z\"\n          transform=\"translate(-903 -483.5)\"\n        />\n        <path\n          d=\"M976.65,537.78a3,3,0,0,0-1.71-1.53l-8.23-2.86-4-5.43-2.53,6.92,2.17,2.74.06.09a3,3,0,0,0,.94.81l.19.1a1.69,1.69,0,0,0,.28.12l9.15,3.18a3,3,0,0,0,3.68-4.14Z\"\n          transform=\"translate(-903 -483.5)\"\n        />\n        <path\n          d=\"M963.77,548l-6.09-6.4,4.77-13.49.07-.25.06-.23.25-1.37a6,6,0,1,0-4.43-1.95l-8,4.7-.21.14a2,2,0,0,0-.26.19l-.11.09a2.18,2.18,0,0,0-.21.22,1.8,1.8,0,0,0-.19.21l-.09.14a1.81,1.81,0,0,0-.17.29l-4.36,9.39a3,3,0,0,0,1.46,4,2.94,2.94,0,0,0,1.27.28,3,3,0,0,0,2.72-1.74l3.61-7.79-2.45,6.93a3.21,3.21,0,0,0-.16.87v.12a2.84,2.84,0,0,0,.17,1l0,.13a2.94,2.94,0,0,0,.42.72l6.54,6.9,3.33,11.5a3,3,0,0,0,2.88,2.16,3.4,3.4,0,0,0,.84-.11,3,3,0,0,0,2-3.72Z\"\n          transform=\"translate(-903 -483.5)\"\n        />\n      </g>\n      <circle fill={bgColor} cx=\"60.78\" cy=\"35.85\" r=\"4.43\" />\n      <path\n        fill={bgColor}\n        d=\"M952.07,550.42l-6.76,9.47a1.51,1.51,0,0,0,.35,2.1,1.54,1.54,0,0,0,.87.27,1.48,1.48,0,0,0,1.22-.62l7.19-10.08.49-3.32-2.59-2.59Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M975.44,536.67l-8.66-3-2.62-3.56-1.28,3.51,1.67,2.12,0,0a1.36,1.36,0,0,0,.5.45l.1,0,.13.06,9.15,3.18a1.4,1.4,0,0,0,.49.08,1.49,1.49,0,0,0,.49-2.91Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M963.43,547.79,957,541l5.09-14.41a.13.13,0,0,0,0-.06.83.83,0,0,0,0-.15h0a5,5,0,0,1-2.7-1.3l-7.33,4.31h0a1.06,1.06,0,0,0-.21.16h0a.52.52,0,0,1-.1.11l-.1.11v0a1.76,1.76,0,0,0-.14.23h0l-4.3,9.28a1.49,1.49,0,0,0,.73,2,1.38,1.38,0,0,0,.63.14,1.51,1.51,0,0,0,1.36-.87l4.1-8.86,3.86-2.27-4,11.4a1.63,1.63,0,0,0-.08.43v.07a1.36,1.36,0,0,0,.08.49.25.25,0,0,1,0,.07,1.82,1.82,0,0,0,.29.45v0l6.61,6.93,3.44,11.85a1.49,1.49,0,0,0,1.85,1,1.51,1.51,0,0,0,1-1.86Z\"\n        transform=\"translate(-903 -483.5)\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst CheckBox = (props) => {\n  const bgColor = props.bgColor || 'white';\n  const color = props.color || '#447594';\n  return (\n    <svg viewBox=\"0 0 500 500\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g>\n        <ellipse\n          fill={bgColor}\n          cx=\"250\"\n          cy=\"250\"\n          rx=\"245\"\n          ry=\"245\"\n          strokeWidth=\"10\"\n          stroke={color}\n        />\n        <path\n          fill={color}\n          d=\"m156.189188,312.046662l-0.425965,74.583859l199.351765,0l0,-303.2873l-74.969894,-0.851931l0,229.169336l-123.955905,0.386035z\"\n          transform=\"rotate(45 255.43911743164074,234.5608978271484)\"\n          strokeWidth=\"0\"\n        />\n      </g>\n    </svg>\n  );\n};\n\nexport default CheckBox;\n","import { LngLat } from 'mapbox-gl';\n\nexport const metersBetween = (coord1, coord2) => {\n  const lngLat1 = new LngLat(coord1[0], coord1[1]);\n  const lngLat2 = new LngLat(coord2[0], coord2[1]);\n  return lngLat1.distanceTo(lngLat2);\n};\n\nexport const validCoord = ([lng, lat]) =>\n  Number(lng) !== 0 && Number(lat) !== 0;\n\nexport const feetBetween = (coord1, coord2) => {\n  return validCoord(coord1) && validCoord(coord2)\n    ? metersBetween(coord1, coord2) / 0.3048\n    : 0;\n};\n\nconst FEET_PER_MILE = 5280;\n\nconst round = (num) => Math.round(num * 10) / 10;\n\nexport const getFriendlyDistance = (fts) => {\n  if (typeof fts === 'number') {\n    return fts <= 1000\n      ? `${round(fts)} FT`\n      : `${round(fts / FEET_PER_MILE)} Mi`;\n  }\n  return '';\n};\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { isMobile } from 'deviceDetect';\nimport './scene.scss';\nimport SCENE_TYPE from '../../scene.types';\nimport SCENE_TYPES from '../../../consts/sceneType.const';\nimport IconAerialMap from './iconAerialMap';\nimport IconAerialScene from './iconAerialScene';\nimport IconGroundScene from './iconGroundScene';\nimport CheckMark from '../../../components/icons/checked';\nimport {\n  getFriendlyDistance,\n  feetBetween,\n} from '../../../utils/distanceHelper';\n\nconst SceneHotspot = (props) => {\n  const hostpostRef = useRef();\n  const { currentSceneCoords, isActiveIcon } = props;\n  const { title, sceneType, previewImgUrl, coordinates } = props.data;\n  const [distance, setDistance] = useState('');\n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    if (sceneType !== SCENE_TYPES.GROUND && currentSceneCoords) {\n      const feet = feetBetween(currentSceneCoords, coordinates);\n      if (feet) {\n        const d = getFriendlyDistance(feet);\n        setDistance(d);\n      } else {\n        setDistance('');\n      }\n    } else {\n      setDistance('');\n    }\n  }, [currentSceneCoords, coordinates, sceneType]);\n\n  let Icon = IconGroundScene;\n  switch (sceneType) {\n    case SCENE_TYPE.AERIAL_MAP:\n      Icon = IconAerialMap;\n      break;\n    case SCENE_TYPE.AERIAL:\n    case SCENE_TYPES.AERIAL:\n      Icon = IconAerialScene;\n      break;\n    default:\n      Icon = IconGroundScene;\n      break;\n  }\n\n  const onClickHotspotParent = (e) => {\n    window.logMessage('onClickHotspotParent', e);\n    props.toggleHover(true);\n  };\n\n  const onClickHotspot = useCallback(\n    (e) => {\n      e.stopPropagation();\n      if (isMobile()) {\n        setCount((prevCount) => prevCount + 1);\n        if (count === 0) {\n          hostpostRef.current.classList.add('hovering');\n        } else {\n          hostpostRef.current.classList.remove('hovering');\n          props.onClick();\n        }\n      } else {\n        if (!props.isHover) {\n          props.toggleHover(true);\n        }\n        props.onClick();\n      }\n    },\n    [count, props]\n  );\n\n  useEffect(() => {\n    const hideFlyouts = () => {\n      setCount(0);\n      hostpostRef.current.classList.remove('hovering');\n    };\n\n    const handleClickOutside = (event) => {\n      if (!hostpostRef?.current?.contains(event.target)) {\n        hideFlyouts();\n      }\n    };\n\n    window.addEventListener('mousedown', handleClickOutside);\n    window.addEventListener('touchstart', handleClickOutside);\n    return () => {\n      window.removeEventListener('mousedown', handleClickOutside);\n      window.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <div\n      ref={hostpostRef}\n      className={`scene-hotspot ${props.isHover ? 'hovering' : ''}`}\n      onClick={onClickHotspotParent}\n      onMouseEnter={props.hoverIn}\n      onMouseLeave={props.hoverOut}\n    >\n      <div\n        className={`s-animation ${props.isMapFloorPlan && 'position-unset'}`}\n      >\n        <div\n          className={`s-animation-circle ${props.isHover ? '' : 'animating'}`}\n        >\n          &nbsp;\n        </div>\n      </div>\n      <div className=\"s-info\">\n        <div className=\"s-info-title\">\n          <p style={{ color: props.tour?.calloutHeaderColor || 'black' }}>\n            {title}\n          </p>\n        </div>\n        {distance && (\n          <div className=\"s-info-distance\">\n            <p style={{ color: props.tour?.calloutSubHeaderColor || 'white' }}>\n              {distance || 'N/A'}\n            </p>\n          </div>\n        )}\n      </div>\n      <div className=\"s-icon\" onClickCapture={onClickHotspot}>\n        {props.isMapFloorPlan && !isActiveIcon ? (\n          <span className=\"badge-scene-text position-absolute\">\n            {props.index}\n          </span>\n        ) : (\n          <Icon />\n        )}\n      </div>\n      {props.visited && (\n        <div className=\"s-visited\">\n          <CheckMark />\n        </div>\n      )}\n      {previewImgUrl && (\n        <img\n          src={previewImgUrl}\n          alt={title}\n          draggable={false}\n          onClickCapture={onClickHotspot}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default SceneHotspot;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  return (\n    <svg\n      data-name=\"Callout Info Box\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32.66 32.61\"\n    >\n      <path\n        fill={bgColor}\n        d=\"M973.15,528.72a16.32,16.32,0,0,0-11.59-5h-.2a16.38,16.38,0,0,0-16.3,15.65,16.55,16.55,0,0,0,4.63,12,16,16,0,0,0,11.64,5h.23a16.37,16.37,0,0,0,16.14-16.15A16,16,0,0,0,973.15,528.72Zm-11.59,24.62h-.23a13.3,13.3,0,1,1,0-26.6h.15a13.3,13.3,0,0,1,0,26.6Z\"\n        transform=\"translate(-945.05 -523.74)\"\n      />\n      <path\n        opacity=\"0.65\"\n        d=\"M972.07,529.77a14.85,14.85,0,0,0-10.53-4.53h-.17a14.89,14.89,0,0,0-14.82,14.2,15.07,15.07,0,0,0,4.22,10.91,14.56,14.56,0,0,0,10.56,4.49h.23a14.86,14.86,0,0,0,14.64-14.67A14.41,14.41,0,0,0,972.07,529.77Zm-10.7-3h.15c-.26,0-.51,0-.77,0C961,526.76,961.16,526.74,961.37,526.74Zm.19,26.6h-.23c-.24,0-.47,0-.71,0,.26,0,.52,0,.78,0a6.78,6.78,0,0,0,.78,0C962,553.32,961.77,553.34,961.56,553.34Z\"\n        transform=\"translate(-945.05 -523.74)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M961.52,526.74a13.3,13.3,0,1,0,13.18,13.4A13.36,13.36,0,0,0,961.52,526.74ZM958.41,548a1.82,1.82,0,0,1-.53-2.06c.33-1.41.66-2.82,1.06-4.22.22-.79,0-1.22-.78-1.4-.21,0-.55-.22-.54-.32a.93.93,0,0,1,.33-.64,6.68,6.68,0,0,1,3.9-1.29,1.68,1.68,0,0,1,1.78,2.25c-.31,1.38-.68,2.76-1,4.13-.29,1.2-.23,1.3.92,1.69a2,2,0,0,1,.42.25C963.31,547.92,959.62,549,958.41,548Zm4.2-12a2.51,2.51,0,1,1,2.44-2.53A2.5,2.5,0,0,1,962.61,536Z\"\n        transform=\"translate(-945.05 -523.74)\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  return (\n    <svg\n      data-name=\"Callout Video\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 42.43 32.61\"\n    >\n      <path\n        opacity=\"0.65\"\n        d=\"M975.2,525.24H947.49c-5.86,0-5.86,7.19-5.86,14.8,0,6.94,0,14.8,5.86,14.8H975.2c5.86,0,5.86-7.86,5.86-14.8S981.06,525.24,975.2,525.24Z\"\n        transform=\"translate(-940.13 -523.74)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M975.2,523.74H947.49c-7.36,0-7.36,8.66-7.36,16.3,0,7.27,0,16.3,7.36,16.3H975.2c7.36,0,7.36-9,7.36-16.3S982.56,523.74,975.2,523.74Zm0,31.1H947.49c-5.86,0-5.86-7.86-5.86-14.8,0-7.61,0-14.8,5.86-14.8H975.2c5.86,0,5.86,7.86,5.86,14.8S981.06,554.84,975.2,554.84Z\"\n        transform=\"translate(-940.13 -523.74)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M975.2,526.74H947.49c-4.36,0-4.36,6-4.36,13.3,0,6.65,0,13.3,4.36,13.3H975.2c4.36,0,4.36-6.65,4.36-13.3S979.56,526.74,975.2,526.74Zm-18.34,19.93V533.42l11,6.55Z\"\n        transform=\"translate(-940.13 -523.74)\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  return (\n    <svg\n      data-name=\"Layer 1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 41.83 29.5\"\n    >\n      <path\n        fill={bgColor}\n        d=\"M979.36,554.36a.74.74,0,0,1-.25-.05l-5.13-2.2v1.62a.64.64,0,0,1-.62.63.54.54,0,0,1-.25-.06l-5.46-2.39v1.82a.63.63,0,0,1-.62.63H940a.63.63,0,0,1-.63-.63v-27a.63.63,0,0,1,.63-.62h27a.62.62,0,0,1,.62.62v1.82l5.46-2.39a.53.53,0,0,1,.25,0,.59.59,0,0,1,.34.1.6.6,0,0,1,.28.52v1.62l5.13-2.19a.56.56,0,0,1,.25,0,.59.59,0,0,1,.34.1.62.62,0,0,1,.28.52v27a.64.64,0,0,1-.62.63Z\"\n        transform=\"translate(-938.78 -525.48)\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M979.36,526.73v27l-6-2.56v2.56L967,551v2.78H940v-27h27v2.78l6.33-2.78v2.57l6-2.57m0-1.25a1.19,1.19,0,0,0-.49.1l-4.26,1.82v-.67a1.24,1.24,0,0,0-1.75-1.14l-4.58,2v-.87a1.25,1.25,0,0,0-1.25-1.25H940a1.25,1.25,0,0,0-1.25,1.25v27A1.25,1.25,0,0,0,940,555h27a1.25,1.25,0,0,0,1.25-1.25v-.86l4.58,2a1.24,1.24,0,0,0,.5.1,1.25,1.25,0,0,0,1.25-1.25v-.67l4.26,1.82a1.19,1.19,0,0,0,.49.1,1.26,1.26,0,0,0,1.25-1.25v-27a1.26,1.26,0,0,0-1.25-1.25Z\"\n        transform=\"translate(-938.78 -525.48)\"\n      />\n      <polygon\n        fill={bgColor}\n        points=\"29.51 22.84 29.51 6.66 39.96 2.2 39.96 27.3 29.51 22.84\"\n      />\n      <path\n        d=\"M978.11,528.62v23.22l-9.2-3.93V532.56l9.2-3.94m1.25-1.89-11.7,5v17l11.7,5v-27Z\"\n        transform=\"translate(-938.78 -525.48)\"\n      />\n      <polygon\n        fill={bgColor}\n        points=\"23.81 22.84 23.81 6.66 33.96 2.21 33.96 27.29 23.81 22.84\"\n      />\n      <path\n        d=\"M972.11,528.64v23.18l-8.9-3.91V532.55l8.9-3.91m1.25-1.91-11.4,5v17l11.4,5v-27Z\"\n        transform=\"translate(-938.78 -525.48)\"\n      />\n      <rect fill={bgColor} x=\"1.87\" y=\"1.88\" width=\"25.75\" height=\"25.75\" />\n      <path\n        d=\"M965.78,528v24.5h-24.5V528h24.5m1.25-1.25H940v27h27v-27Z\"\n        transform=\"translate(-938.78 -525.48)\"\n      />\n      <polygon points=\"17.85 11.75 13.75 18.75 9.34 15.75 5.34 22.95 23.85 22.95 17.85 11.75\" />\n      <circle cx=\"10.43\" cy=\"10.31\" r=\"2.07\" />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  return (\n    <svg\n      data-name=\"Matterport\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32.43 32.43\"\n    >\n      <rect\n        fill=\"none\"\n        stroke={bgColor}\n        strokeMiterlimit=\"10\"\n        x=\"0.5\"\n        y=\"0.5\"\n        width=\"31.43\"\n        height=\"31.43\"\n        rx=\"3.64\"\n      />\n      <rect\n        opacity=\"0.5\"\n        x=\"0.99\"\n        y=\"0.99\"\n        width=\"30.45\"\n        height=\"30.45\"\n        rx=\"3.17\"\n      />\n      <rect\n        fill={bgColor}\n        x=\"2.41\"\n        y=\"2.41\"\n        width=\"27.62\"\n        height=\"27.62\"\n        rx=\"1.86\"\n      />\n      <polygon\n        fill=\"#d0002d\"\n        points=\"16.25 9.89 26.99 7.02 26.99 25.72 23.94 26.56 23.8 11.69 16.25 13.78 16.25 9.89\"\n      />\n      <polygon\n        fill=\"#ff0053\"\n        points=\"16.25 13.78 8.55 11.69 8.55 26.56 5.44 25.73 5.44 6.99 16.25 9.89 16.25 13.78\"\n      />\n      <polygon\n        fill=\"#d0002d\"\n        points=\"16.16 24.47 8.55 26.56 8.55 11.69 11.59 12.52 11.56 21.8 16.16 20.58 16.16 24.47\"\n      />\n      <polygon\n        fill=\"#ff0053\"\n        points=\"16.16 20.58 20.83 21.79 20.8 12.52 23.8 11.69 23.94 26.56 16.16 24.47 16.16 20.58\"\n      />\n      <polygon\n        fill=\"#ff6c86\"\n        points=\"8.51 6.17 16.2 8.23 23.94 6.17 26.99 7.02 16.25 9.89 5.44 6.99 8.51 6.17\"\n      />\n      <polygon\n        fill=\"#ff6c86\"\n        points=\"11.56 21.8 16.2 20.58 20.83 21.79 20.82 20.14 16.25 18.92 11.57 20.17 11.56 21.8\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  return (\n    <svg\n      data-name=\"Callout Map Floor Plan\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32.43 32.43\"\n    >\n      <rect\n        fill=\"none\"\n        stroke={bgColor}\n        strokeMiterlimit={10}\n        x=\"0.5\"\n        y=\"0.5\"\n        width=\"31.43\"\n        height=\"31.43\"\n        rx=\"3.64\"\n      />\n      <rect\n        opacity={0.5}\n        x=\"0.99\"\n        y=\"0.99\"\n        width=\"30.45\"\n        height=\"30.45\"\n        rx=\"3.17\"\n      />\n      <rect\n        fill={bgColor}\n        x=\"2.41\"\n        y=\"2.41\"\n        width=\"27.62\"\n        height=\"27.62\"\n        rx=\"1.86\"\n      />\n      <path\n        d=\"M968.35,530.82H951.52a.84.84,0,0,0-.84.84v16.83a.85.85,0,0,0,.84.84h9.67a.84.84,0,0,0,.6-.25l7.15-7.16a.82.82,0,0,0,.25-.59v-9.67A.84.84,0,0,0,968.35,530.82Zm-.84,6.48h-5a.84.84,0,0,0,0,1.68h5v2l-6.66,6.67h-4.37v-1.3a.84.84,0,0,0-1.68,0v1.3h-2.44V532.5h2.44v7.08a.84.84,0,0,0,1.68,0V532.5h11Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        d=\"M954.32,543a1.32,1.32,0,1,0,1.32-1.31A1.33,1.33,0,0,0,954.32,543Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        d=\"M967.65,546.73a1.32,1.32,0,1,0,1.31,1.32A1.32,1.32,0,0,0,967.65,546.73Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        d=\"M959.15,539.45a1.32,1.32,0,1,0-1.32-1.31A1.32,1.32,0,0,0,959.15,539.45Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  return (\n    <svg\n      data-name=\"Google Map 360\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32.43 32.43\"\n    >\n      <rect\n        fill=\"none\"\n        stroke={bgColor}\n        strokeMiterlimit=\"10\"\n        x=\"0.5\"\n        y=\"0.5\"\n        width=\"31.43\"\n        height=\"31.43\"\n        rx=\"3.64\"\n      />\n      <rect\n        opacity=\"0.5\"\n        x=\"0.99\"\n        y=\"0.99\"\n        width=\"30.45\"\n        height=\"30.45\"\n        rx=\"3.17\"\n      />\n      <polygon\n        fill={bgColor}\n        points=\"14.78 25.52 14.78 25.59 14.79 25.56 14.78 25.52\"\n      />\n      <path\n        fill={bgColor}\n        d=\"M971.89,526.29H948a1.86,1.86,0,0,0-1.86,1.85V552A1.86,1.86,0,0,0,948,553.9h23.9a1.86,1.86,0,0,0,1.86-1.86v-23.9A1.86,1.86,0,0,0,971.89,526.29ZM958,551.61l.37-1.53c-5.65-.26-10-1.9-10-3.88,0-1.21,1.63-2.29,4.19-3a9.38,9.38,0,0,0,.61.8c-2.18.52-3.56,1.28-3.56,2.08,0,1.33,3.82,2.56,8.79,2.76L958,547l3.09,2.3Zm4.7-1.61.09-1.25c4.33-.31,7.5-1.47,7.5-2.68,0-.79-1.34-1.54-3.46-2.06a8,8,0,0,0,.61-.8c2.51.72,4.1,1.79,4.1,3C971.53,548,967.76,549.58,962.69,550Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        fill=\"#ffba00\"\n        d=\"M955.74,537.13h0Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        fill=\"#ffba00\"\n        d=\"M955.84,536.92v0Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        fill=\"#ffba00\"\n        d=\"M955.53,537.79c0-.16.08-.3.13-.45h0l-2.35-1.75a7.37,7.37,0,0,0-.69,4.44,7.65,7.65,0,0,0,.65,2.21l2.37-1.74A4.78,4.78,0,0,1,955.53,537.79Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        fill=\"#fd2c25\"\n        d=\"M964.94,533.32a7,7,0,0,0-4.7-1.86,7.25,7.25,0,0,0-5.28,2,7.54,7.54,0,0,0-1.65,2.15l2.35,1.75h0a4.64,4.64,0,0,1,6-2.83,4,4,0,0,1,1.35.87l2-2Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        fill=\"#00ac47\"\n        d=\"M962.77,542.86c-.14.1-.29.19-.44.28a4.71,4.71,0,0,1-6.69-2.64l-2.37,1.74a7.24,7.24,0,0,0,2.07,2.56,7.44,7.44,0,0,0,6.06,1.54,6.94,6.94,0,0,0,3.59-1.68Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        fill=\"#3284fc\"\n        d=\"M967.14,538.09c0-.16-.06-.48-.23-.48h-6.86v2.85h4.22v.08a.24.24,0,0,1,0,.08,3.77,3.77,0,0,1-1.48,2.23l2.22,1.8a6.59,6.59,0,0,1-1.58,1.05,6.62,6.62,0,0,0,3.72-5.24c0-.38.07-.76.11-1.14V539C967.21,538.67,967.17,538.38,967.14,538.09Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nconst Icon = (props) => {\n  const bgColor = props.bgColor || 'white';\n  return (\n    <svg\n      data-name=\"Icon Media Typeform\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32.43 32.43\"\n    >\n      <rect\n        fill=\"none\"\n        stroke={bgColor}\n        strokeMiterlimit=\"10\"\n        x=\"0.5\"\n        y=\"0.5\"\n        width=\"31.43\"\n        height=\"31.43\"\n        rx=\"3.64\"\n      />\n      <rect\n        opacity=\"0.5\"\n        x=\"0.99\"\n        y=\"0.99\"\n        width=\"30.45\"\n        height=\"30.45\"\n        rx=\"3.17\"\n      />\n      <rect\n        fill={bgColor}\n        x=\"2.41\"\n        y=\"2.41\"\n        width=\"27.62\"\n        height=\"27.62\"\n        rx=\"1.86\"\n      />\n      <path\n        d=\"M962.81,545.53a.52.52,0,0,0,.27.07.67.67,0,0,0,.42-.16.63.63,0,0,0,.18-.67l-.72-2.12h.6a1.92,1.92,0,0,0,1.91-1.91v-8.36a1.91,1.91,0,0,0-1.91-1.91h-12a1.9,1.9,0,0,0-1.9,1.91v8.36a1.91,1.91,0,0,0,1.9,1.91h5.29Zm-11.9-4.79v-8.36a.65.65,0,0,1,.64-.65h12a.65.65,0,0,1,.65.65v8.36a.65.65,0,0,1-.65.65h-1.48a.62.62,0,0,0-.51.26.65.65,0,0,0-.09.57l.52,1.53-4.74-2.3a.67.67,0,0,0-.28-.06h-5.43A.65.65,0,0,1,950.91,540.74Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        d=\"M962.81,545.53a.52.52,0,0,0,.27.07.67.67,0,0,0,.42-.16.63.63,0,0,0,.18-.67l-.72-2.12h.6a1.92,1.92,0,0,0,1.91-1.91v-8.36a1.91,1.91,0,0,0-1.91-1.91h-12a1.9,1.9,0,0,0-1.9,1.91v8.36a1.91,1.91,0,0,0,1.9,1.91h5.29Zm-11.9-4.79v-8.36a.65.65,0,0,1,.64-.65h12a.65.65,0,0,1,.65.65v8.36a.65.65,0,0,1-.65.65h-1.48a.62.62,0,0,0-.51.26.65.65,0,0,0-.09.57l.52,1.53-4.74-2.3a.67.67,0,0,0-.28-.06h-5.43A.65.65,0,0,1,950.91,540.74Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n      <path\n        d=\"M968.32,536.84H965l-.37,5.29h-2.17l.56,2-7.13-2h-.74v4.23a1.15,1.15,0,0,0,1.14,1.15h1.49a.12.12,0,0,1,.1,0,.13.13,0,0,1,0,.12l-.52,1.52a.52.52,0,0,0,.14.54.5.5,0,0,0,.33.12.42.42,0,0,0,.22-.05l4.8-2.3h5.43a1.16,1.16,0,0,0,1.15-1.15V538A1.16,1.16,0,0,0,968.32,536.84Z\"\n        transform=\"translate(-943.72 -523.88)\"\n      />\n    </svg>\n  );\n};\n\nexport default Icon;\n","import React from 'react';\n\nfunction Icon() {\n  return (\n    <svg\n      data-name=\"Layer 1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 32.66 32.61\"\n    >\n      <path\n        fill=\"#fff\"\n        d=\"M971.74,528.78a16.29,16.29,0,0,0-11.59-5H960a16.39,16.39,0,0,0-16.31,15.65,16.57,16.57,0,0,0,4.63,12,16.08,16.08,0,0,0,11.64,4.95h.23a16.39,16.39,0,0,0,16.15-16.15A15.93,15.93,0,0,0,971.74,528.78ZM960.15,553.4h-.23a13.31,13.31,0,0,1,0-26.61h.15a13.31,13.31,0,0,1,0,26.61Z\"\n        transform=\"translate(-943.64 -523.79)\"\n      />\n      <path\n        opacity={0.65}\n        d=\"M970.66,529.82a14.85,14.85,0,0,0-10.53-4.53H960a14.87,14.87,0,0,0-14.81,14.2,15,15,0,0,0,4.21,10.91,14.57,14.57,0,0,0,10.56,4.5h.23a14.88,14.88,0,0,0,14.65-14.68A14.46,14.46,0,0,0,970.66,529.82Zm-10.7-3h.15c-.26,0-.51,0-.76,0C959.55,526.81,959.75,526.79,960,526.79Zm.19,26.61h-.23c-.24,0-.47,0-.7,0,.25,0,.51,0,.77,0s.52,0,.78,0C960.56,553.37,960.36,553.4,960.15,553.4Z\"\n        transform=\"translate(-943.64 -523.79)\"\n      />\n      <g id=\"KaEoSY.tif\">\n        <path\n          fill=\"#00acde\"\n          d=\"M946.73,540.52v-.93a13.39,13.39,0,0,1,13.85-12.88,15.1,15.1,0,0,1,2,.22,13.19,13.19,0,0,1,2.38.68,13.05,13.05,0,0,1,2.69,1.42,13.51,13.51,0,0,1,3.73,3.82A14,14,0,0,1,972.5,535a13.56,13.56,0,0,1,.78,2.64,14.54,14.54,0,0,1,.22,2.07,16.57,16.57,0,0,1-.06,1.73,15.38,15.38,0,0,1-.31,1.8,12.92,12.92,0,0,1-1.1,3,13.36,13.36,0,0,1-2.31,3.22,13.31,13.31,0,0,1-5,3.24,13.28,13.28,0,0,1-2.16.6,14.18,14.18,0,0,1-1.58.19l-.45,0h-.91a13.64,13.64,0,0,1-2.64-.35,13.28,13.28,0,0,1-3-1.11,13.5,13.5,0,0,1-6.46-7.3,12.32,12.32,0,0,1-.59-2.16,14.21,14.21,0,0,1-.2-1.58C946.74,540.82,946.73,540.67,946.73,540.52Zm6.43-4.6,0,0,1.73.91c.94.51,1.89,1,2.84,1.51l2.16,1.14a.08.08,0,0,0,.09,0L962.9,538l3.41-1.8.49-.27,0,0-2.36-1.37L960,532a.09.09,0,0,0-.11,0l-2.21,1.28-3.9,2.25Zm0,2.09v6.6a.16.16,0,0,0,.09.17l2.3,1.33L958.8,548l.15.08v-6.87a.07.07,0,0,0-.05-.08l-.49-.26-4.82-2.61Zm13.63,0-.08,0-5.62,3a.09.09,0,0,0-.05.08V548s0,0,0,.06l.1,0c.77-.45,1.54-.9,2.32-1.34l3.25-1.88a.13.13,0,0,0,.07-.13v-6.6Z\"\n          transform=\"translate(-943.64 -523.79)\"\n        />\n        <path\n          fill=\"#fff\"\n          d=\"M953.16,535.92l.65-.38,3.9-2.25,2.21-1.28a.09.09,0,0,1,.11,0l4.36,2.51,2.36,1.37,0,0-.49.27L962.9,538,960,539.51a.07.07,0,0,1-.09,0l-2.16-1.14c-.95-.5-1.9-1-2.84-1.51L953.2,536Z\"\n          transform=\"translate(-943.64 -523.79)\"\n        />\n        <path\n          fill=\"#fff\"\n          d=\"M953.18,538l.41.22,4.82,2.61.49.26a.07.07,0,0,1,.05.08v6.87l-.15-.08-3.23-1.86-2.3-1.33a.16.16,0,0,1-.09-.17V538Z\"\n          transform=\"translate(-943.64 -523.79)\"\n        />\n        <path\n          fill=\"#fff\"\n          d=\"M966.81,538.05v6.6a.13.13,0,0,1-.07.13l-3.25,1.88c-.78.44-1.55.89-2.32,1.34l-.1,0s0,0,0-.06v-6.78a.09.09,0,0,1,.05-.08l5.62-3Z\"\n          transform=\"translate(-943.64 -523.79)\"\n        />\n      </g>\n    </svg>\n  );\n}\n\nexport default Icon;\n","import React, {\n  useCallback,\n  useRef,\n  useState,\n  useEffect,\n  useMemo,\n} from 'react';\nimport { isMobile } from 'deviceDetect';\nimport './media.scss';\nimport MEDIA_TYPES from '../../../consts/mediaType.const';\nimport IconMediaInfo from './iconMediaInfo';\nimport IconMediaVideo from './iconMediaVideo';\nimport IconMediaGallery from './iconMediaGallery';\nimport IconMediaMatterport from './iconMediaMatterport';\nimport IconMedia2D from './iconMedia2D';\nimport IconMediaGoogle360 from './iconMedia360';\nimport IconMediaTypeForm from './iconMediaTypeForm';\nimport CheckMark from '../../../components/icons/checked';\nimport IconSketchFab from './iconMediaSketchFab';\n\nconst getIcon = (type) => {\n  switch (type) {\n    case MEDIA_TYPES.GALLERY:\n      return IconMediaGallery;\n    case MEDIA_TYPES.MATTERPORT:\n      return IconMediaMatterport;\n    case MEDIA_TYPES.MAPFLOORPLAN:\n      return IconMedia2D;\n    case MEDIA_TYPES.GOOGLE360:\n      return IconMediaGoogle360;\n    case MEDIA_TYPES.TYPEFORM:\n      return IconMediaTypeForm;\n    case MEDIA_TYPES.CUSTOM_HTML:\n      return IconMediaInfo;\n    case MEDIA_TYPES.SKETCH_FAB:\n      return IconSketchFab;\n    case MEDIA_TYPES.VIDEO:\n      return IconMediaVideo;\n    default:\n      return IconMediaInfo;\n  }\n};\n\nconst MediaHotspot = (props) => {\n  const hostpostRef = useRef();\n\n  const [count, setCount] = useState(0);\n\n  const { color } = props;\n  const { title, type } = props.data;\n\n  const Icon = getIcon(type);\n\n  const onClickHotspot = useCallback(\n    (e) => {\n      e.stopPropagation();\n      if (isMobile()) {\n        setCount((prevCount) => prevCount + 1);\n        if (count === 0) {\n          hostpostRef.current.classList.add('hovering');\n        } else {\n          hostpostRef.current.classList.remove('hovering');\n          props.onClick();\n        }\n      } else {\n        if (props.isHover) {\n          props.toggleHover(false);\n        }\n        props.onClick();\n      }\n    },\n    [count, props]\n  );\n\n  useEffect(() => {\n    const hideFlyouts = () => {\n      setCount(0);\n      hostpostRef.current.classList.remove('hovering');\n    };\n\n    const handleClickOutside = (event) => {\n      if (!hostpostRef?.current?.contains(event.target)) {\n        hideFlyouts();\n      }\n    };\n\n    window.addEventListener('mousedown', handleClickOutside);\n    window.addEventListener('touchstart', handleClickOutside);\n    return () => {\n      window.removeEventListener('mousedown', handleClickOutside);\n      window.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, []);\n\n  const mediaTypeStr = useMemo(() => {\n    if (type === MEDIA_TYPES.IMAGE) return 'INFO';\n    if (type === MEDIA_TYPES.CUSTOM_HTML) return '';\n    return type;\n  }, [type]);\n\n  return (\n    <div\n      ref={hostpostRef}\n      className={`media-hotspot ${props.isHover ? 'hovering' : ''}`}\n      onClick={() => props.toggleHover(true)}\n      onMouseEnter={props.hoverIn}\n      onMouseLeave={props.hoverOut}\n    >\n      <div className=\"m-info\">\n        {mediaTypeStr && (\n          <div className=\"m-type\">\n            <p style={color ? { color } : {}}>{mediaTypeStr}</p>\n          </div>\n        )}\n        <div className=\"m-title\">\n          <p>{title}</p>\n        </div>\n      </div>\n      <div className=\"m-icon\" onClickCapture={onClickHotspot}>\n        <Icon />\n      </div>\n      {props.visited && (\n        <div className=\"s-visited\">\n          <CheckMark />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MediaHotspot;\n","import React from 'react';\nimport HOTSPOT_TYPE from '../../../consts/hotspotType.const';\nimport SceneHotspotIcon from './scene';\nimport MediaHotspotIcon from './media';\n\nconst HotspotIcon = (props) => {\n  const { type, scene, media, index, tour, isActiveIcon } = props;\n  const Icon =\n    type === HOTSPOT_TYPE.SCENE ? SceneHotspotIcon : MediaHotspotIcon;\n  const data = type === HOTSPOT_TYPE.SCENE ? { ...scene } : { ...media };\n  return (\n    <Icon\n      {...props}\n      data={data}\n      index={index}\n      tour={tour}\n      isActiveIcon={isActiveIcon}\n    />\n  );\n};\n\nexport default HotspotIcon;\n","import React from 'react';\nimport './ReadMoreBtn.scss';\n\nfunction ReadMoreBtn(props) {\n  const { color, href, size } = props;\n  return (\n    <a\n      href={href}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      className=\"ReadMoreBtn\"\n      style={{\n        color: color,\n      }}\n    >\n      <span>Read More</span>\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        // stroke=\"currentColor\"\n        stroke={color || 'currentColor'}\n        strokeWidth=\"2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        className=\"feather feather-external-link\"\n        width={size}\n        height={size}\n      >\n        <path d=\"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\"></path>\n        <polyline points=\"15 3 21 3 21 9\"></polyline>\n        <line x1=\"10\" y1=\"14\" x2=\"21\" y2=\"3\"></line>\n      </svg>\n    </a>\n  );\n}\n\nexport default ReadMoreBtn;\n","import React, { useMemo } from 'react';\nimport ReadMoreBtn from './ReadMoreBtn';\nimport './popover.info.scss';\n\nfunction PopOverInfo(props) {\n  const { media, tour, position } = props;\n  const up = useMemo(() => position[1] > 0, [position]);\n\n  return (\n    <div className=\"Staging\">\n      <div\n        className=\"PopOver fade-in\"\n        style={{\n          bottom: up ? '0' : null,\n        }}\n      >\n        <div className=\"Wrapper\">\n          <h3 className=\"Wrapper--title\">{media.title}</h3>\n          <p className=\"Wrapper--description\">\n            {media.skytag.description.length <= 255\n              ? media.skytag.description\n              : media.skytag.description.substr(0, 255) + '...'}\n          </p>\n          {media?.skytag?.readMoreURL && (\n            <ReadMoreBtn\n              color={tour.menuHighlightColor}\n              href={media.skytag.readMoreURL}\n              size={12}\n            />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default PopOverInfo;\n","import React, { useState, useRef } from 'react';\nimport Html from './Html';\nimport CanvasCircle from './canvasCircle';\nimport Canvas from './canvas';\nimport { CANVAS_W, CANVAS_H } from './utils';\nimport HotspotContainer from './hotspotContainer';\nimport HotspotIcon from '../icons';\nimport PopOverInfo from '../popover/popover.info';\nimport MEDIA_TYPES from '../../../consts/mediaType.const';\nimport SCENE_TYPES from 'consts/sceneType.const';\n\nconst HOVERzINDEX = '100';\nconst zIndexRange1 = [50, 0];\nconst zIndexRangeHover = [100, 100];\n\nconst styles = {\n  width: `${CANVAS_W}px`,\n  height: `${CANVAS_H}px`,\n  pointerEvents: 'none',\n};\n\nconst LineSingle = (props) => {\n  const canvasRef = useRef();\n  const hotspotRef = useRef();\n\n  const elRef = useRef();\n  const [zIndex, setZIndex] = useState('0');\n  const [zIndexRange, setZIndexRange] = useState(zIndexRange1);\n  const [hovering, setHovering] = useState(false);\n  const hoverToggled = (isHover) => {\n    const parentNode = elRef.current && elRef.current.parentNode;\n    setHovering(Boolean(isHover));\n    if (isHover) {\n      setZIndexRange(zIndexRangeHover);\n      if (parentNode) {\n        setZIndex(parentNode.style.zIndex);\n        parentNode.style.zIndex = HOVERzINDEX;\n      }\n    } else {\n      setTimeout(() => {\n        if (elRef && elRef.current) {\n          setZIndexRange(zIndexRange1);\n          if (parentNode) {\n            parentNode.style.zIndex = zIndex;\n          }\n        }\n      }, 0);\n    }\n  };\n\n  return (\n    <Html\n      ref={elRef}\n      hotspotRef={hotspotRef}\n      canvasRef={canvasRef}\n      position={props.position}\n      center={true}\n      zIndexRange={zIndexRange}\n      style={styles}\n      isSkytag={props.media?.type === MEDIA_TYPES.SKYTAG}\n      isAerialHs={props?.scene?.sceneType === SCENE_TYPES.AERIAL}\n    >\n      <>\n        <HotspotContainer ref={hotspotRef}>\n          {props.media?.type === MEDIA_TYPES.SKYTAG ? (\n            <PopOverInfo\n              position={props.position}\n              media={props.media}\n              tour={props.tour}\n            />\n          ) : (\n            <HotspotIcon\n              type={props.type}\n              hotspot={props.hotspot}\n              currentSceneCoords={props.currentSceneCoords}\n              scene={props.scene}\n              media={props.media}\n              tour={props.tour}\n              onClick={props.onClick}\n              isHover={hovering}\n              toggleHover={(val) => hoverToggled(val)}\n              hoverIn={() => hoverToggled(true)}\n              hoverOut={() => hoverToggled(false)}\n              visited={props.visited}\n              color={props.color || ''}\n            />\n          )}\n        </HotspotContainer>\n      </>\n    </Html>\n  );\n};\n\nexport default React.memo(LineSingle);\n","import React, { useState, useEffect, useMemo } from 'react';\n\nimport { trackEventByType, EVENT_TYPE } from 'gaTracking';\nimport HOTSPOT_TYPE from 'consts/hotspotType.const';\nimport { useNavigateRoute } from 'common/hooks';\n\nimport LineSingle from './lineSingle';\nimport { useSelector } from 'react-redux';\n\nconst Line = (props) => {\n  const [handleUpdateRoute] = useNavigateRoute();\n\n  const [spots, setHotspots] = useState([]);\n  const { hotspots } = props;\n  const { hotspotHistory } = useSelector((state) => state);\n\n  const spotHistory = useMemo(() => {\n    return hotspotHistory.reduce((obj, key) => {\n      obj[key] = true;\n      return obj;\n    }, {});\n  }, [hotspotHistory]);\n\n  useEffect(() => {\n    setHotspots(\n      hotspots.filter((hs) => hs.scene || (hs.media && !hs.media.audio))\n    );\n  }, [hotspots]);\n\n  const onClickHotspot = (hs) => {\n    if (hs.type === HOTSPOT_TYPE.MEDIA) {\n      trackEventByType(EVENT_TYPE.HOTSPOT_FROM_HOTSPOT, hs.media.id);\n      handleUpdateRoute(hs.media.id);\n    } else {\n      trackEventByType(EVENT_TYPE.SCENE_FROM_HOTSPOT, hs.scene.id);\n      props.onClickJumpSpot(hs.scene.groupId, hs.scene.id);\n    }\n  };\n\n  if (!hotspots || !hotspots.length) {\n    return null;\n  }\n\n  return (\n    <>\n      {spots.map((hs) => (\n        <LineSingle\n          key={hs.id}\n          currentSceneCoords={props.currentSceneCoords}\n          position={hs.location}\n          hotspot={hs}\n          type={hs.type}\n          scene={hs.scene}\n          media={hs.media}\n          tour={props.tour}\n          color={props.brandColor}\n          visited={spotHistory[hs._id]}\n          onClick={() => onClickHotspot(hs)}\n        />\n      ))}\n    </>\n  );\n};\n\nexport default Line;\n","import { useCallback, useState } from 'react';\n\nimport { useHistory } from 'react-router-dom';\n\nimport { useAddHotspotHistory } from './useAddHotspotHistory';\nimport { useParamsByLocation } from './useParamsByLocation';\n\nexport const useNavigateRoute = () => {\n  const { tourId, groupId, sceneId } = useParamsByLocation();\n  const addHotspotHistory = useAddHotspotHistory();\n\n  const [activeHotspot, setActiveHotspot] = useState('');\n\n  const history = useHistory();\n\n  const handleUpdateRoute = useCallback(\n    (hsId = '') => {\n      if (hsId) {\n        history.push(`/${tourId}/${groupId}/${sceneId}/${hsId}`);\n        setActiveHotspot(hsId);\n        addHotspotHistory(hsId);\n        return;\n      }\n      history.push(`/${tourId}/${groupId}/${sceneId}`);\n      setActiveHotspot('');\n    },\n    [addHotspotHistory, groupId, history, sceneId, tourId]\n  );\n\n  return [handleUpdateRoute, activeHotspot];\n};\n","import { useSelector } from 'react-redux';\n\nimport { useParamsByLocation } from 'common/hooks';\n\nimport LineList from '../../hotspots/line';\n\nconst LineListHandler = ({ params, showHP, ...restProps }) => {\n  const { hotspotId: popupOpen } = useParamsByLocation();\n\n  const { isLandingOpen } = useSelector((state) => state);\n\n  if (!isLandingOpen && !popupOpen && showHP && restProps.hotspots.length) {\n    return <LineList {...restProps} />;\n  }\n\n  return null;\n};\n\nexport default LineListHandler;\n","import { Vector2 } from 'three';\n\n/**\n * Triangle blur shader\n * based on glfx.js triangle blur shader\n * https://github.com/evanw/glfx.js\n *\n * A basic blur filter, which convolves the image with a\n * pyramid filter. The pyramid filter is separable and is applied as two\n * perpendicular triangle filters.\n */\n\nconst TriangleBlurShader = {\n  uniforms: {\n    texture1: { value: null },\n    delta: { value: new Vector2(1, 1) },\n  },\n\n  vertexShader: /* glsl */ `\n\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }`,\n\n  fragmentShader: /* glsl */ `\n\n    #include <common>\n\n    #define ITERATIONS 10.0\n\n    uniform sampler2D texture1;\n    uniform vec2 delta;\n\n    varying vec2 vUv;\n\n    void main() {\n\n      vec4 color = vec4( 0.0 );\n\n      float total = 0.0;\n\n    // randomize the lookup values to hide the fixed number of samples\n\n      float offset = rand( vUv );\n\n      for ( float t = -ITERATIONS; t <= ITERATIONS; t ++ ) {\n\n        float percent = ( t + offset - 0.5 ) / ITERATIONS;\n        float weight = 1.0 - abs( percent );\n\n        color += texture2D( texture1, vUv + delta * percent ) * weight;\n        total += weight;\n\n      }\n\n      gl_FragColor = color / total;\n\n    }`,\n};\n\nexport { TriangleBlurShader };\n","import { useEffect, useMemo, useState } from 'react';\n\nimport { Vector2 } from 'three';\nimport { extend, useFrame, useThree } from '@react-three/fiber';\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer';\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass';\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass';\nimport { gsap } from 'gsap';\n\nimport { TriangleBlurShader } from './shaders/triangleShader';\nimport { useBlur } from 'common/hooks';\n\nextend({ EffectComposer, ShaderPass, RenderPass });\n\nconst RADIUS = 30;\nconst obj = { rad: RADIUS };\n\nfunction TriangleBlurEffect(props) {\n  const { onBlurStartChanging, onBlurChanged } = props;\n\n  const blur = useBlur();\n\n  const [isOn, setIsOn] = useState(true);\n  const [rad, setRad] = useState(RADIUS);\n  const { gl, scene, camera, size } = useThree();\n\n  const [final] = useMemo(() => {\n    const renderScene = new RenderPass(scene, camera);\n    const finalComposer = new EffectComposer(gl);\n    const fstPass = new ShaderPass(TriangleBlurShader, 'texture1');\n    fstPass.uniforms.delta.value = new Vector2(0, RADIUS / size.height);\n    const sndPass = new ShaderPass(TriangleBlurShader, 'texture1');\n    sndPass.uniforms.delta.value = new Vector2(RADIUS / size.width, 0);\n    finalComposer.addPass(renderScene);\n    finalComposer.addPass(fstPass);\n    finalComposer.addPass(sndPass);\n    return [finalComposer];\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    final.setSize(size.width, size.height);\n  }, [final, size]);\n\n  useEffect(() => {\n    window.logMessage('enabled', blur);\n    if (final && isOn !== blur) {\n      onBlurStartChanging && onBlurStartChanging();\n      obj.rad = blur ? 0 : RADIUS;\n      gsap.to(obj, {\n        rad: blur ? RADIUS : 0,\n        duration: 1.5,\n        onUpdate: () => {\n          setRad(obj.rad);\n          if (obj.rad === 0 || obj.rad === RADIUS) {\n            setIsOn(blur);\n          }\n        },\n        onComplete: () => onBlurChanged && onBlurChanged(),\n      });\n    }\n    // eslint-disable-next-line\n  }, [final, blur, isOn]);\n\n  useEffect(() => {\n    if (final) {\n      if (final.passes[1] instanceof ShaderPass) {\n        final.passes[1].uniforms.delta.value.y = rad / size.height;\n      }\n      if (final.passes[2] instanceof ShaderPass) {\n        final.passes[2].uniforms.delta.value.x = rad / size.width;\n      }\n    }\n  }, [final, rad, size]);\n\n  useFrame(() => {\n    if (isOn || blur) {\n      final.render();\n    }\n  }, 1);\n\n  return null;\n}\n\nexport default TriangleBlurEffect;\n","import { useEffect, useState } from 'react';\n\nimport { useSelector } from 'react-redux';\n\nimport { useParamsByLocation } from './useParamsByLocation';\n\nexport function useBlur() {\n  const { isLandingOpen, shouldBlur } = useSelector((state) => state);\n\n  const [blur, setBlur] = useState(() => isLandingOpen);\n  const { hotspotId } = useParamsByLocation();\n\n  useEffect(() => {\n    if (isLandingOpen || (hotspotId && shouldBlur)) {\n      setBlur(true);\n      return;\n    }\n    setBlur(false);\n  }, [hotspotId, isLandingOpen, shouldBlur]);\n\n  return blur;\n}\n","import React, { Suspense } from 'react';\n\nimport * as THREE from 'three';\nimport { connect, Provider, ReactReduxContext } from 'react-redux';\nimport { Canvas } from '@react-three/fiber';\nimport { Stats } from '@react-three/drei';\nimport { Router } from 'react-router-dom';\n\nimport configs from 'configs';\nimport { getCameraPositionFromLookAtCoordinates } from 'utils/positionHelper';\nimport HOTSPOT_TYPE from 'consts/hotspotType.const';\n\nimport Cube360 from './cube360';\nimport WebLensflare from './lensflare';\nimport WebSunFlare from './lensflare/sunflare';\nimport LineListHandler from './lineListHandler';\n\n// import Controls from '../controls';\nimport { VRCanvas, DefaultXRControllers } from '@react-three/xr'\nimport TriangleBlurEffect from '../effects/triangleBlurEffect';\n\nclass World3D extends React.Component {\n  state = {\n    hotspots: [],\n    linkedMedias: [],\n    linkedScenes: [],\n    showHP: false,\n    interactionOn: false,\n  };\n  camera = new THREE.Camera();\n  size = {\n    width: 0,\n    height: 0,\n  };\n  lastPanTime = null;\n  lastPos = {\n    x: 0,\n    y: 0,\n    z: 0,\n  };\n\n  onSelectPano = (pano) => {\n    this.props.onSwitchPano(pano);\n  };\n\n  onSelectPanoById = (gId, sId) => {\n    const scene = this.props.json.scenes.find(\n      ({ id, groupId }) => id === sId && groupId === gId\n    );\n    window.logMessage(gId, sId, scene);\n    this.onSelectPano(scene);\n  };\n\n  componentDidUpdate(preProps) {\n    if (\n      preProps.currentPano &&\n      this.props.currentPano &&\n      preProps.currentPano.id !== this.props.currentPano.id\n    ) {\n      this.setState({ hotspots: [], showHP: false, interactionOn: false });\n      this.updateHotspots();\n    }\n    if (!preProps.currentPano && this.props.currentPano) {\n      this.updateHotspots();\n    }\n  }\n\n  updateHotspots = () => {\n    const { variantIndex, currentPano } = this.props;\n    const { hotspots, variants } = currentPano;\n    if (hotspots && hotspots.constructor === Array) {\n      const allHotspots = hotspots.filter(\n        (hs) =>\n          (hs.type === HOTSPOT_TYPE.SCENE && hs.scene)\n      );\n      let selectedHotspots = [];\n      const defaultHotspots = allHotspots.filter((h) => !h.sceneVariantId);\n      const defaultJumpSpots = defaultHotspots.filter(\n        (hs) => hs.type === HOTSPOT_TYPE.SCENE\n      );\n      const defaultMediaSpots = defaultHotspots.filter(\n        (hs) => hs.type === HOTSPOT_TYPE.MEDIA\n      );\n      const selectedVariant = variants[variantIndex];\n      if (variantIndex === currentPano.defaultVariantIndex) {\n        selectedHotspots = defaultHotspots;\n      } else if (selectedVariant) {\n        selectedHotspots = allHotspots.filter(\n          (h) => h.sceneVariantId === selectedVariant.id\n        );\n        if (selectedVariant.useDefaultJumpSpot) {\n          selectedHotspots = [...selectedHotspots, ...defaultJumpSpots];\n        }\n        if (selectedVariant.useDefaultMediaSpot) {\n          selectedHotspots = [...selectedHotspots, ...defaultMediaSpots];\n        }\n      }\n      this.setState({ hotspots: selectedHotspots });\n    }\n  };\n\n  enableInteraction = () => {\n    this.setState({ interactionOn: true });\n  };\n\n  render() {\n    const { hotspots, showHP, interactionOn } = this.state;\n    const { currentPano, popupOpen, autoRotate } = this.props;\n    const { scenes, tour } = this.props.json;\n    const { defaultViewingAngle } = tour;\n\n    if (currentPano) {\n      const { x, y, z } = currentPano.defaultOrientation;\n      const camPos = getCameraPositionFromLookAtCoordinates(x, y, z);\n      return (\n        <div className=\"World-Canvas\">\n          <div className=\"Canvas-3D\">\n            <ReactReduxContext.Consumer>\n              {({ store }) => (\n                <VRCanvas\n                  camera={{\n                    position: [camPos.x, camPos.y, camPos.z],\n                    fov: defaultViewingAngle,\n                    zoom: 0.8,\n                  }}\n                >\n                  <Provider store={store}>\n                    <Router history={this.props.history}>\n                      <DefaultXRControllers />\n                      <Suspense fallback={null}>\n                        {interactionOn && (\n                          <WebLensflare\n                            pano={currentPano}\n                            variantIndex={this.props.variantIndex}\n                          />\n                        )}\n                      </Suspense>\n                      <Suspense fallback={null}>\n                        {interactionOn && (\n                          <WebSunFlare\n                            pano={currentPano}\n                            variantIndex={this.props.variantIndex}\n                          />\n                        )}\n                      </Suspense>\n                      <Suspense fallback={null}>\n                        <Cube360\n                          {...this.props.pointerEvents}\n                          variantIndex={this.props.variantIndex}\n                          pano={currentPano}\n                          scenes={scenes}\n                          introClosed={this.props.introClosed}\n                          onSDLoaded={this.props.onSDLoaded}\n                          onHDLoaded={this.props.onHDLoaded}\n                          onShowHotspots={() => this.updateHotspots()}\n                          onChangeLookAt={() => {\n                            this.enableInteraction();\n                            this.setState({ showHP: true });\n                          }}\n                        />\n                      </Suspense>\n                      <Suspense fallback={null}>\n                        <pointLight args={[0xffffff]} intensity={1} />\n                      </Suspense>\n                      <LineListHandler\n                        showHP={showHP}\n                        hotspots={hotspots}\n                        tour={tour}\n                        currentSceneCoords={currentPano.coordinates}\n                        hotspotHistory={this.props.hotspotHistory}\n                        onClickJumpSpot={this.onSelectPanoById}\n                        brandColor={\n                          this.props.tour && this.props.tour.menuHighlightColor\n                        }\n                      />\n                      <Suspense fallback={null}>\n                        <TriangleBlurEffect />\n                      </Suspense>\n                    </Router>\n                  </Provider>\n                </VRCanvas>\n              )}\n            </ReactReduxContext.Consumer>\n          </div>\n        </div>\n      );\n    }\n    return null;\n  }\n}\n\nconst mapStateToProps = ({ controlMode }) => ({\n  controlMode,\n});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(World3D);\n","import React from 'react';\n\nclass DomErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    window.logMessage('componentDidCatch', error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return null;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default DomErrorBoundary;\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst RouteHandler = ({ match }) => {\n  window.logMessage('match', match);\n  return <></>;\n};\n\nexport default withRouter(RouteHandler);\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst RouteHandler = ({ match }) => {\n  window.logMessage('match', match);\n  return <></>;\n};\n\nexport default withRouter(RouteHandler);\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst RouteHandler = ({ match }) => {\n  window.logMessage('match', match);\n  return <></>;\n};\n\nexport default withRouter(RouteHandler);\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\nconst RouteHandler = ({ match }) => {\n  window.logMessage('match', match);\n  return <></>;\n};\n\nexport default withRouter(RouteHandler);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport DomErrorBoundary from 'components/errors/domError';\nimport FirstRoute from './1stRoute';\nimport SecondRoute from './2ndRoute';\nimport ThirdRoute from './3rdRoute';\nimport FourthRoute from './4thRoute';\n\nconst RouteHandlers = (props) => (\n  <DomErrorBoundary>\n    <FirstRoute {...props} />\n    <SecondRoute {...props} />\n    <ThirdRoute {...props} />\n    <FourthRoute {...props} />\n  </DomErrorBoundary>\n);\n\nconst mapStateToProps = ({ json: { scenes, groups } }) => ({\n  scenes,\n  groups,\n});\n\nexport default connect(mapStateToProps)(RouteHandlers);\n","export default __webpack_public_path__ + \"static/media/loadingAnimation.0587ec81.gif\";","import React, { useEffect, useState } from 'react';\nimport './spinner.scss';\nimport loadingGif from './loadingAnimation.gif';\n\nconst Spinner = (props) => {\n  const { loaded, onClosing, onClosed } = props;\n  const [alpha, setAlpha] = useState(1);\n  const [opacity, setOpacity] = useState(1);\n  const [enabled, setEnabled] = useState(true);\n  useEffect(() => {\n    if (loaded) {\n      console.log('loaded');\n      setAlpha(0);\n      setTimeout(() => {\n        setOpacity(0);\n        onClosing && onClosing();\n        setTimeout(() => {\n          setEnabled(false);\n          onClosed && onClosed();\n          window.logMessage('spinner closed');\n        }, 1100);\n      }, 1100);\n    }\n    // eslint-disable-next-line\n  }, [loaded]);\n\n  if (!enabled) {\n    return '';\n  }\n\n  return (\n    <div\n      className=\"loading-spinner\"\n      style={{ background: `rgba(255,255,255,${alpha})` }}\n    >\n      <div className=\"loading-logo\" style={{ opacity }}>\n        <img src={loadingGif} alt=\"SKYNAV Loading Logo\" />\n      </div>\n    </div>\n  );\n};\n\nexport default Spinner;\n","const DIMENSION = {\n  PORTRAIT: 1,\n  LANDSCAPE: 2,\n};\n\nexport default DIMENSION;\n","import DIMENTIONS from '../consts/dimention.const';\n\nexport const isMenuLeft = ({ dimention, width }) =>\n  dimention === DIMENTIONS.LANDSCAPE || width > 575;\n","import React from 'react';\n\nconst Tip = () => (\n  <svg\n    data-name=\"Tip 1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 288 178\"\n  >\n    <path\n      fill=\"#fff\"\n      d=\"M821.22,594.44l8.9,27.82,8.9-27.82h5.53v34.1h-4.29V615.26l.4-13.31-8.92,26.59h-3.28l-8.88-26.49.4,13.21v13.28h-4.29v-34.1Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M868.27,612.77H856.21v12.09h14v3.68H851.92v-34.1H870v3.67H856.21v11h12.06Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M898,628.54H893.7l-13.65-26.28v26.28h-4.31v-34.1h4.31l13.7,26.39V594.44H898Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M925.76,594.44v24.24a10.29,10.29,0,0,1-2.81,7.58q-2.76,2.75-7.7,2.74t-7.73-2.68c-1.78-1.79-2.68-4.33-2.72-7.64V594.44h4.27v24a7.67,7.67,0,0,0,1.46,5.14q1.47,1.7,4.72,1.7c2.18,0,3.77-.57,4.74-1.7a7.67,7.67,0,0,0,1.47-5.14v-24Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <rect fill=\"#fff\" opacity=\"0\" width=\"288\" height=\"178\" />\n    <path\n      fill=\"#fff\"\n      d=\"M891.22,541.91l-6.84-3.74a13.25,13.25,0,0,1-.64,1.7c-.31.65-.61,1.18-.85,1.59-.06.12-.12.23-.17.35l1.71.93.38.23,1.53.94L884.75,545l-.55.36-6.15,3.85-22.2,13.9a2.42,2.42,0,0,1-1.31.46,2.12,2.12,0,0,1-1.16-.37q-11.16-7-22.34-14l-6.39-4c-.12-.08-.24-.16-.38-.27l-1.54-1.1,18.52-10.09,1-.57a17.63,17.63,0,0,1-5.13-1.69l0,0-.65.35L817.9,541.9a2.19,2.19,0,0,0-1.27,1.81,2.12,2.12,0,0,0,1.11,1.82q17.81,11.18,35.64,22.3a4.44,4.44,0,0,0,.94.39l.27.09.28-.11a6.09,6.09,0,0,0,1-.46q17.72-11.06,35.4-22.15a2.21,2.21,0,0,0,1.19-1.9A2.15,2.15,0,0,0,891.22,541.91Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M825.31,517.43a12.67,12.67,0,0,0,5.36,4,8,8,0,0,0,2.85.54h.17a21.75,21.75,0,0,0,1.55,1.63,17.26,17.26,0,0,0,4.29,3.08,11.49,11.49,0,0,0,5.13,1.33h.22a28,28,0,0,0,6.15,5.33,19.31,19.31,0,0,0,5.44,2.43,14.75,14.75,0,0,0,2.67.45,21,21,0,0,0,3.41,3.51,15,15,0,0,0,5.69,3,10.41,10.41,0,0,0,2.65.36,8.46,8.46,0,0,0,3.43-.71,14.23,14.23,0,0,0,1.55-.83l.34-.2a4.14,4.14,0,0,0,1.8-2.1c0-.06,0-.12.08-.19l.12-.2c.21-.37.46-.78.69-1.28a8.18,8.18,0,0,0,.64-2.15c.12-.8.19-1.57.23-2.15a12.08,12.08,0,0,0-.23-3.16c0-.24-.08-.47-.11-.71a10.39,10.39,0,0,0-.44-1.88l-.1-.31c-.27-.82-.56-1.67-.93-2.56a23.15,23.15,0,0,0-1.11-2.18l-.13-.24a24.11,24.11,0,0,0-2.87-4.06,20,20,0,0,0-3.32-3.09,19.32,19.32,0,0,0-.81-2.35.49.49,0,0,0,0-.11l-.1-.31c-.11-.33-.24-.73-.43-1.16-.24-.59-.58-1.35-1-2.13l0-.08c-.45-.87-.92-1.78-1.49-2.69s-1.08-1.64-1.62-2.4l-.4-.58c-.28-.4-.56-.74-.8-1l-.08-.09a28,28,0,0,0-2.83-3.06l-.32-.3c-.48-.45-1-.95-1.64-1.43a21.39,21.39,0,0,0-3.23-2.17c-.65-.34-1.31-.66-2-1a8.14,8.14,0,0,0-1.38-.51l-.26-.08a8,8,0,0,0-1.79-.49l-.18,0c-.33-.06-.66-.1-1-.15l-.31,0a3.64,3.64,0,0,0-.57,0h-.9a4.12,4.12,0,0,0-.86.09h-.08a8.48,8.48,0,0,0-.88.13,11.6,11.6,0,0,0-2.08.61,11.1,11.1,0,0,0-2.47,1.41,10.09,10.09,0,0,0-2,2l-.11.15-.11.15a9.87,9.87,0,0,0-1.87-.18,9.32,9.32,0,0,0-1.29.09,8,8,0,0,0-5,2.52,9.06,9.06,0,0,0-2.4-.25h-.4a4.22,4.22,0,0,0-2,.48l-.3.16a7.08,7.08,0,0,0-3.67,4.38,10.9,10.9,0,0,0-.15,5.58A16.68,16.68,0,0,0,825.31,517.43Zm.44-11.61a3.13,3.13,0,0,1,1.66-2l.28-.16a.44.44,0,0,1,.15-.05h0a5.87,5.87,0,0,1,2,.22,4.45,4.45,0,0,1,1.25.63,11.34,11.34,0,0,0,1.1.71c.11-.38.19-.78.34-1.16a2.93,2.93,0,0,1,.43-.63l.06-.06a3.94,3.94,0,0,1,3.12-2,5.81,5.81,0,0,1,.72-.05,5.73,5.73,0,0,1,2,.39c.56.2,1.1.48,1.64.73l.16.08c.16-.46.32-.9.48-1.34a6.18,6.18,0,0,1,1-1.58,5.36,5.36,0,0,1,1.16-1.17,6.16,6.16,0,0,1,1.53-.9,8.18,8.18,0,0,1,1.36-.41c.29-.05.57-.07.86-.11l.22,0h.9c.39.05.78.09,1.16.16a5.32,5.32,0,0,1,1.13.27c.48.21,1,.29,1.47.51s1.23.6,1.84.92a17.44,17.44,0,0,1,2.64,1.78c.6.47,1.15,1,1.71,1.52a24.19,24.19,0,0,1,2.43,2.63c.24.3.48.59.7.89.64.94,1.31,1.86,1.91,2.82.5.8.94,1.65,1.37,2.49.31.61.59,1.23.86,1.86.17.39.29.81.43,1.21a1.13,1.13,0,0,0,.08.24,19,19,0,0,1,1,3.16.49.49,0,0,0,.25.36,15.22,15.22,0,0,1,3.59,3.1,20.16,20.16,0,0,1,2.4,3.39c.37.67.75,1.33,1,2s.63,1.71.92,2.58a6.1,6.1,0,0,1,.27,1.12,15,15,0,0,1,.32,3c0,.16,0,.31,0,.47h0c0,.46-.08.92-.15,1.37a5.41,5.41,0,0,1-.12.55,3.2,3.2,0,0,1-.18.52c-.24.5-.55,1-.81,1.45a2.15,2.15,0,0,0-.15.38c0,.06-.06.14-.11.16a14.72,14.72,0,0,1-1.5.84,4.49,4.49,0,0,1-1.82.37,6.11,6.11,0,0,1-1.63-.23,11.12,11.12,0,0,1-4.18-2.26,18.59,18.59,0,0,1-3.8-4.31c-.06-.1-.12-.17-.24-.17h0a7.79,7.79,0,0,1-1.07.07,9.7,9.7,0,0,1-2.44-.34,15.06,15.06,0,0,1-4.31-1.94,25.16,25.16,0,0,1-5.91-5.32c-.22-.27-.44-.56-.67-.83a.3.3,0,0,0-.17-.08h0a5.32,5.32,0,0,1-1.73.29,7.58,7.58,0,0,1-3.35-.91,13.62,13.62,0,0,1-3.31-2.39,19.25,19.25,0,0,1-2.67-3.17l0-.06a9.24,9.24,0,0,1-1.06.41,2.94,2.94,0,0,1-.71.09,4.09,4.09,0,0,1-1.45-.3,8.77,8.77,0,0,1-3.67-2.78,12.7,12.7,0,0,1-2.71-5.5A6.93,6.93,0,0,1,825.75,505.82Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n  </svg>\n);\n\nexport default Tip;\n","import React from 'react';\n\nconst Tip = () => (\n  <svg\n    data-name=\"Tip 2D\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 288 178\"\n  >\n    <path\n      fill=\"#fff\"\n      d=\"M822.58,609.38h2.64a5,5,0,0,0,3.94-1.57,6.27,6.27,0,0,0,1.38-4.29q0-6-4.64-6a4.2,4.2,0,0,0-3.49,1.61,6.71,6.71,0,0,0-1.26,4.24H817a9.48,9.48,0,0,1,2.5-6.75,9.17,9.17,0,0,1,12.77-.14q2.37,2.5,2.37,7.13a8.41,8.41,0,0,1-1.23,4.41,7.57,7.57,0,0,1-3.2,3q4.83,1.79,4.83,8a10.21,10.21,0,0,1-2.54,7.27,9.59,9.59,0,0,1-13.19.14,9.48,9.48,0,0,1-2.49-6.9H821a6.65,6.65,0,0,0,1.31,4.32,4.4,4.4,0,0,0,3.59,1.61,4.69,4.69,0,0,0,3.69-1.57,7.14,7.14,0,0,0,1.37-4.78q0-6.21-5.88-6.21h-2.48Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M855.39,594.41v3.68h-.68a8.39,8.39,0,0,0-6.49,2.8q-2.34,2.7-2.69,8.14a7.08,7.08,0,0,1,5.8-2.86,7,7,0,0,1,6,3.1,13.75,13.75,0,0,1,2.21,8.14c0,3.58-.81,6.4-2.45,8.48a7.9,7.9,0,0,1-6.56,3.11,7.76,7.76,0,0,1-6.68-3.67q-2.54-3.68-2.53-9.77V613.9a33.64,33.64,0,0,1,1.52-11.2,12.32,12.32,0,0,1,4.49-6.19,13.15,13.15,0,0,1,7.36-2.1Zm-4.76,15.37a4.59,4.59,0,0,0-3.11,1.28,7.25,7.25,0,0,0-2.06,3.28v1.71a13.69,13.69,0,0,0,1.46,6.76c1,1.74,2.17,2.61,3.6,2.61a4,4,0,0,0,3.62-2.14,10.7,10.7,0,0,0,1.32-5.66,10.81,10.81,0,0,0-1.32-5.65A4,4,0,0,0,850.63,609.78Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M882.86,614q0,7.54-2.2,11.28a8.28,8.28,0,0,1-13.73.15q-2.25-3.58-2.34-10.77v-5.86q0-7.47,2.21-11.15a8.37,8.37,0,0,1,13.73-.18q2.21,3.48,2.33,10.56Zm-4.15-5.92q0-5.42-1.19-8A4.09,4.09,0,0,0,870,600a19.06,19.06,0,0,0-1.24,7.6v7q0,5.39,1.24,8.09a4,4,0,0,0,3.8,2.71,3.92,3.92,0,0,0,3.72-2.56q1.2-2.55,1.24-7.79Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M888.62,600.06a6,6,0,0,1,1.74-4.27,5.66,5.66,0,0,1,4.23-1.82,5.53,5.53,0,0,1,4.16,1.81,6.05,6.05,0,0,1,1.72,4.28,5.87,5.87,0,0,1-1.72,4.24,5.62,5.62,0,0,1-4.16,1.75,6,6,0,0,1-6-6Zm6,3a3,3,0,0,0,2.13-.82,2.86,2.86,0,0,0,.87-2.16,3,3,0,0,0-.87-2.23,2.9,2.9,0,0,0-2.13-.87,2.87,2.87,0,0,0-2.17.92,3.06,3.06,0,0,0-.87,2.18,2.86,2.86,0,0,0,.87,2.12A3,3,0,0,0,894.59,603.05Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <rect fill=\"#fff\" opacity=\"0\" width=\"288\" height=\"178\" />\n    <path\n      fill=\"#fff\"\n      d=\"M930,575.18c.44-.78.83-1.59,1.34-2.32a17.53,17.53,0,0,1,1.86-2.34q8.63-8.87,17.31-17.68a14.57,14.57,0,0,1,2.16-1.66,14.73,14.73,0,0,1,2.12-1.33,27,27,0,0,1,3.49-1.4,18.83,18.83,0,0,1,7.08-.75,17.54,17.54,0,0,1,5.39,1.23,31.05,31.05,0,0,1,3.19,1.52,12.07,12.07,0,0,1,2.71,2.23c.86.86,1.76,1.68,2.59,2.58a10.07,10.07,0,0,1,1.19,1.69,15.61,15.61,0,0,1,1.2,2.29,28.33,28.33,0,0,1,1.26,3.81,17.55,17.55,0,0,1,.08,7.8,27.81,27.81,0,0,1-1.17,3.84,18.9,18.9,0,0,1-1.25,2.56,9.7,9.7,0,0,1-1,1.47c-4.8,5.72-10.35,10.74-15.46,16.17-1,1-1.95,2.07-3,3a24,24,0,0,1-2.58,2,16.74,16.74,0,0,1-2.78,1.66,29.4,29.4,0,0,1-4.09,1.39,18.25,18.25,0,0,1-6.21.39,17.8,17.8,0,0,1-5.33-1.31,33.08,33.08,0,0,1-3.42-1.83A15.52,15.52,0,0,1,932.7,597a21,21,0,0,1-1.3-1.79c-.25-.36-.47-.73-.71-1.09a17.9,17.9,0,0,1-2.11-4.8,19.43,19.43,0,0,1-.64-7.35,19.08,19.08,0,0,1,1.26-5.21c.2-.54.47-1.06.71-1.58Zm47.83-1.08.09,0a6.25,6.25,0,0,1,.24-.6,14.56,14.56,0,0,0,1.3-5A15.47,15.47,0,0,0,976,557.29a15,15,0,0,0-4.74-4,15.33,15.33,0,0,0-4-1.48,15.63,15.63,0,0,0-10.93,1.5,14.64,14.64,0,0,0-3.6,2.67q-8.31,8.54-16.66,17a15.89,15.89,0,0,0-2.74,3.82,15.73,15.73,0,0,0-1.22,10.93,12.43,12.43,0,0,0,1.41,3.56,19.74,19.74,0,0,0,1.65,2.54,16.11,16.11,0,0,0,5.79,4.4,15.57,15.57,0,0,0,5.1,1.29,15.36,15.36,0,0,0,8.73-1.84,13.47,13.47,0,0,0,3.22-2.32l3.17-3.24,14.25-14.58a8.23,8.23,0,0,0,1-1.2C976.93,575.67,977.35,574.87,977.78,574.1Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M905.48,485.35c.49,1.78,1,3.55,1.48,5.33.08.29.18.58.24.88a1.71,1.71,0,0,1-1.18,2,1.67,1.67,0,0,1-2.17-1.07c-.25-.74-.44-1.5-.65-2.26L901,482.35a1.74,1.74,0,0,1,1.39-2.47l10.11-2.81a1.77,1.77,0,0,1,2.09,1.12,1.73,1.73,0,0,1-1.13,2.23c-1.06.32-2.13.6-3.19.89l-3.13.86.53.3,47.45,26.83L986.34,527l.63.39a1.69,1.69,0,0,1,.54,2.33,1.74,1.74,0,0,1-2.35.62L970.52,522,906,485.51l-.41-.23Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M1011.13,545l-.52-.3-11-6.24a1.74,1.74,0,0,1,1.16-3.23,3.86,3.86,0,0,1,1,.43l10.62,6,.44.25.18-.1a1.92,1.92,0,0,1-.23-.42q-.8-2.82-1.58-5.66a1.73,1.73,0,0,1,2-2.19,1.64,1.64,0,0,1,1.31,1.2l2.81,10.16a1.76,1.76,0,0,1-1.34,2.39L1006,550a1.77,1.77,0,0,1-2.27-.9,1.69,1.69,0,0,1,1.1-2.38c1.9-.54,3.81-1.06,5.71-1.59Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M968.92,565.36l-.33.38-6.46,6.6a2.12,2.12,0,0,1-2.68.44,2,2,0,0,1-.7-2.22,4.42,4.42,0,0,1,.74-1.1q3.12-3.23,6.26-6.42a2.11,2.11,0,0,1,2.72-.45,2,2,0,0,1,.7,2.19C969.1,565,969,565.13,968.92,565.36Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n  </svg>\n);\n\nexport default Tip;\n","import React from 'react';\n\nconst Tip = () => (\n  <svg\n    data-name=\"Tip 2M\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 288 178\"\n  >\n    <path\n      fill=\"#fff\"\n      d=\"M822.58,609.38h2.64a5,5,0,0,0,3.94-1.57,6.27,6.27,0,0,0,1.38-4.29q0-6-4.64-6a4.2,4.2,0,0,0-3.49,1.61,6.71,6.71,0,0,0-1.26,4.24H817a9.48,9.48,0,0,1,2.5-6.75,9.17,9.17,0,0,1,12.77-.14q2.37,2.5,2.37,7.13a8.41,8.41,0,0,1-1.23,4.41,7.57,7.57,0,0,1-3.2,3q4.83,1.79,4.83,8a10.21,10.21,0,0,1-2.54,7.27,9.59,9.59,0,0,1-13.19.14,9.48,9.48,0,0,1-2.49-6.9H821a6.65,6.65,0,0,0,1.31,4.32,4.4,4.4,0,0,0,3.59,1.61,4.69,4.69,0,0,0,3.69-1.57,7.14,7.14,0,0,0,1.37-4.78q0-6.21-5.88-6.21h-2.48Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M855.39,594.41v3.68h-.68a8.39,8.39,0,0,0-6.49,2.8q-2.34,2.7-2.69,8.14a7.08,7.08,0,0,1,5.8-2.86,7,7,0,0,1,6,3.1,13.75,13.75,0,0,1,2.21,8.14c0,3.58-.81,6.4-2.45,8.48a7.9,7.9,0,0,1-6.56,3.11,7.76,7.76,0,0,1-6.68-3.67q-2.54-3.68-2.53-9.77V613.9a33.64,33.64,0,0,1,1.52-11.2,12.32,12.32,0,0,1,4.49-6.19,13.15,13.15,0,0,1,7.36-2.1Zm-4.76,15.37a4.59,4.59,0,0,0-3.11,1.28,7.25,7.25,0,0,0-2.06,3.28v1.71a13.69,13.69,0,0,0,1.46,6.76c1,1.74,2.17,2.61,3.6,2.61a4,4,0,0,0,3.62-2.14,10.7,10.7,0,0,0,1.32-5.66,10.81,10.81,0,0,0-1.32-5.65A4,4,0,0,0,850.63,609.78Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M882.86,614q0,7.54-2.2,11.28a8.28,8.28,0,0,1-13.73.15q-2.25-3.58-2.34-10.77v-5.86q0-7.47,2.21-11.15a8.37,8.37,0,0,1,13.73-.18q2.21,3.48,2.33,10.56Zm-4.15-5.92q0-5.42-1.19-8A4.09,4.09,0,0,0,870,600a19.06,19.06,0,0,0-1.24,7.6v7q0,5.39,1.24,8.09a4,4,0,0,0,3.8,2.71,3.92,3.92,0,0,0,3.72-2.56q1.2-2.55,1.24-7.79Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M888.62,600.06a6,6,0,0,1,1.74-4.27,5.66,5.66,0,0,1,4.23-1.82,5.53,5.53,0,0,1,4.16,1.81,6.05,6.05,0,0,1,1.72,4.28,5.87,5.87,0,0,1-1.72,4.24,5.62,5.62,0,0,1-4.16,1.75,6,6,0,0,1-6-6Zm6,3a3,3,0,0,0,2.13-.82,2.86,2.86,0,0,0,.87-2.16,3,3,0,0,0-.87-2.23,2.9,2.9,0,0,0-2.13-.87,2.87,2.87,0,0,0-2.17.92,3.06,3.06,0,0,0-.87,2.18,2.86,2.86,0,0,0,.87,2.12A3,3,0,0,0,894.59,603.05Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <rect fill=\"#fff\" opacity=\"0\" width=\"288\" height=\"178\" />\n    <path\n      fill=\"#fff\"\n      d=\"M970.78,572.2c.76.36,1.47.62,2.1,1a7.15,7.15,0,0,1,1.65,10.86q-9.76,10.38-19.41,20.86a20.58,20.58,0,0,1-12.78,6.59,29.07,29.07,0,0,1-12.89-1.3,5.36,5.36,0,0,1-1.91-1.37l-13.72-12.73a9.86,9.86,0,0,1-3-5.86,27.34,27.34,0,0,1,.41-9.33,100.73,100.73,0,0,1,3.21-12c1.2-3.77,2.47-7.52,3.61-11.3.53-1.74.86-3.54,1.25-5.32a7.65,7.65,0,0,1,4.64-6,7.07,7.07,0,0,1,9.57,6.51q.06,3.11.14,6.21c0,.18,0,.36,0,.64.21-.21.36-.35.5-.51q12.81-13.76,25.6-27.53a7.21,7.21,0,0,1,10.66,0,7,7,0,0,1,0,9.45c-3.35,3.54-6.64,7.13-10,10.7-.15.15-.29.31-.49.54.23.1.39.18.57.24a7.2,7.2,0,0,1,4.8,8.07c-.06.36,0,.48.37.55a7.21,7.21,0,0,1,5.41,10.18C971.07,571.72,970.92,572,970.78,572.2Zm-42.31-22.12c-2.31-1.18-4.37-.48-5.22,1.66a19.12,19.12,0,0,0-.73,3,112.49,112.49,0,0,1-3.24,10.94c-1.49,4.56-3,9.11-4.06,13.8a32,32,0,0,0-1,8.71,7.48,7.48,0,0,0,2.21,5.46l13.78,12.79a2.3,2.3,0,0,0,.84.49,25.32,25.32,0,0,0,9.51,1.16,17.33,17.33,0,0,0,11.83-5.47q9.74-10.44,19.44-20.9a3.45,3.45,0,0,0,.64-3.91A3.68,3.68,0,0,0,969,575.7a3.42,3.42,0,0,0-2.47,1.21q-2.43,2.6-4.87,5.18a1.75,1.75,0,0,1-2.87-.42,1.83,1.83,0,0,1,.42-2.14c2.68-2.89,5.38-5.77,8-8.67a4,4,0,0,0,.81-1.29,3.54,3.54,0,0,0-1.64-4.31,3.4,3.4,0,0,0-4.34.68c-1.87,2-3.78,4-5.68,6.06a2.56,2.56,0,0,1-.73.58,1.73,1.73,0,0,1-2.19-.62,1.81,1.81,0,0,1,.21-2.24c2.45-2.64,4.91-5.27,7.35-7.91a3.59,3.59,0,0,0-4.11-5.65,8.29,8.29,0,0,0-1.78,1.47c-1.45,1.51-2.85,3-4.27,4.58a1.73,1.73,0,0,1-1.9.52,1.76,1.76,0,0,1-.65-3q9.69-10.44,19.4-20.87a3.59,3.59,0,1,0-5.48-4.63l-28.85,31a1.75,1.75,0,0,1-2,.61,1.78,1.78,0,0,1-1.19-1.77c-.05-1.77-.08-3.54-.12-5.32,0-2-.08-4.07-.15-6.1A3.07,3.07,0,0,0,928.47,550.08Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M905.55,485.75c.61,2.17,1.17,4.18,1.75,6.18a1.73,1.73,0,0,1-.27,1.6,1.65,1.65,0,0,1-1.61.68,1.61,1.61,0,0,1-1.38-1.07c-.06-.16-.11-.32-.15-.47q-1.39-4.92-2.77-9.82a1.75,1.75,0,0,1,1.35-2.38l10.1-2.85a1.82,1.82,0,0,1,2.09,1,1.75,1.75,0,0,1-.86,2.23,3.81,3.81,0,0,1-.57.19l-5.36,1.51-.57.19.65.36,78.38,43.95a8.3,8.3,0,0,1,.81.49,1.68,1.68,0,0,1,.56,2.33,1.72,1.72,0,0,1-2.38.59l-14.1-7.9-65-36.46Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M1013.09,541.88c-.15-.45-.32-.9-.45-1.35-.45-1.55-.89-3.1-1.31-4.65a1.72,1.72,0,0,1,1.1-2.19,1.74,1.74,0,0,1,2.23,1.17l2.82,10a1.76,1.76,0,0,1-1.36,2.46l-9.81,2.76a1.88,1.88,0,0,1-1.54-.08,1.72,1.72,0,0,1-.92-1.68,1.7,1.7,0,0,1,1.24-1.51c1.88-.54,3.77-1.07,5.65-1.59a2,2,0,0,1,.54,0l0-.26-.5-.29-10.93-6.12a1.66,1.66,0,0,1-.93-1.63,1.6,1.6,0,0,1,1.15-1.53,2.48,2.48,0,0,1,1.15,0,2.69,2.69,0,0,1,.8.39c3.5,1.95,7,3.92,10.49,5.88l.46.25Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n  </svg>\n);\n\nexport default Tip;\n","import React from 'react';\n\nconst Tip = (props) => (\n  <svg\n    data-name=\"Tip 3\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 288 178\"\n  >\n    <path\n      fill=\"#fff\"\n      d=\"M838,612.77H826v12.09h14v3.68H821.69v-34.1H839.8v3.67H826v11H838Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M855.09,607.5l6.42-13.06h5l-8.88,16.91,9.07,17.19h-5.08l-6.56-13.31-6.58,13.31h-5.08l9.11-17.19-8.93-16.91h5Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M876.21,615.19v13.35h-4.28v-34.1h10.86a9.82,9.82,0,0,1,7.47,2.84,10.48,10.48,0,0,1,2.72,7.58q0,4.92-2.59,7.57c-1.72,1.78-4.15,2.69-7.29,2.76Zm0-3.68h6.58a5.54,5.54,0,0,0,4.38-1.71,7.13,7.13,0,0,0,1.53-4.91,7.37,7.37,0,0,0-1.57-4.92,5.35,5.35,0,0,0-4.31-1.86h-6.61Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M902.82,624.86h13.37v3.68H898.51v-34.1h4.31Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M942,614.48q0,7-3,10.75a10.12,10.12,0,0,1-8.46,3.77,10.27,10.27,0,0,1-8.32-3.66Q919.14,621.68,919,615v-6.42q0-6.84,3-10.72a10.08,10.08,0,0,1,8.43-3.87,10.2,10.2,0,0,1,8.39,3.71q3,3.71,3.08,10.6Zm-4.28-6c0-3.6-.59-6.29-1.77-8a6.8,6.8,0,0,0-10.78,0c-1.21,1.78-1.82,4.41-1.83,7.87v6.11q0,5.22,1.81,8a6.09,6.09,0,0,0,5.42,2.74,6,6,0,0,0,5.34-2.53q1.74-2.53,1.81-7.75Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M958.88,614.74h-6v13.8h-4.31v-34.1h9.55c3.35,0,5.87.87,7.59,2.61s2.58,4.29,2.58,7.64a10.72,10.72,0,0,1-1.39,5.52,8.85,8.85,0,0,1-3.95,3.55l6.6,14.49v.29H965Zm-6-3.68h5.2a5.57,5.57,0,0,0,4.3-1.73,6.63,6.63,0,0,0,1.6-4.65q0-6.57-6-6.57h-5.15Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M990.38,612.77H978.32v12.09h14v3.68H974v-34.1h18.1v3.67H978.32v11h12.06Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <rect fill=\"#fff\" opacity=\"0\" width=\"288\" height=\"178\" />\n    <path\n      fill=\"#fff\"\n      d=\"M1093.5,489.7h-34.61c-9.2,0-9.2,10.82-9.2,20.36,0,9.07,0,20.36,9.2,20.36h34.61c9.19,0,9.19-11.29,9.19-20.36S1102.69,489.7,1093.5,489.7Zm0,38.85h-34.61c-7.32,0-7.32-9.82-7.32-18.49,0-9.51,0-18.49,7.32-18.49h34.61c7.32,0,7.32,9.83,7.32,18.49S1100.82,528.55,1093.5,528.55Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M1093.5,493.45h-34.61c-5.45,0-5.45,7.44-5.45,16.61,0,8.3,0,16.62,5.45,16.62h34.61c5.45,0,5.45-8.32,5.45-16.62S1099,493.45,1093.5,493.45Zm-22.91,24.89V501.79l13.7,8.19Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <circle\n      fill=\"none\"\n      stroke=\"#fff\"\n      strokeMiterlimit=\"10\"\n      strokeWidth=\"2px\"\n      cx=\"145.25\"\n      cy=\"102.75\"\n      r=\"7.75\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M867.69,472.81a44.5,44.5,0,1,1-44.5,44.5,44.5,44.5,0,0,1,44.5-44.5m0-3a47.5,47.5,0,1,0,47.5,47.5,47.56,47.56,0,0,0-47.5-47.5Z\"\n      transform=\"translate(-815.69 -451.31)\"\n    />\n    <g>\n      <clipPath id=\"circle-mask\">\n        <circle cx=\"52\" cy=\"66\" r=\"45\" opacity=\"0.5\" />\n      </clipPath>\n    </g>\n    {props.image && (\n      <image\n        href={props.image}\n        x=\"7\"\n        y=\"21\"\n        width=\"90\"\n        height=\"90\"\n        clipPath=\"url(#circle-mask)\"\n      />\n    )}\n    <circle fill=\"#fff\" cx=\"145.25\" cy=\"102.75\" r=\"2.75\" />\n    <line\n      fill=\"none\"\n      stroke=\"#fff\"\n      strokeMiterlimit=\"10\"\n      strokeWidth=\"2px\"\n      x1=\"152\"\n      y1=\"100\"\n      x2=\"234\"\n      y2=\"59\"\n    />\n    <line\n      fill=\"none\"\n      stroke=\"#fff\"\n      strokeMiterlimit=\"10\"\n      strokeWidth=\"2px\"\n      x1=\"95.26\"\n      y1=\"50.56\"\n      x2=\"204\"\n      y2=\"15\"\n    />\n    <circle\n      fill=\"none\"\n      stroke=\"#fff\"\n      strokeMiterlimit=\"10\"\n      strokeWidth=\"2px\"\n      cx=\"212.26\"\n      cy=\"12.06\"\n      r=\"7.75\"\n    />\n    <circle fill=\"#fff\" cx=\"212.26\" cy=\"12.06\" r=\"2.75\" />\n  </svg>\n);\n\nexport default Tip;\n","import React from 'react';\n\nconst Tip = () => (\n  <svg\n    data-name=\"Tip 4\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 288 178\"\n  >\n    <circle fill=\"none\" cx=\"145.25\" cy=\"102.75\" r=\"2.75\" />\n  </svg>\n);\n\nexport default Tip;\n","import React, { useRef } from 'react';\nimport Slider from 'react-slick';\nimport './introSlider.scss';\nimport Tip1 from './tip_1';\nimport Tip2D from './tip_2d';\nimport Tip2M from './tip_2m';\nimport Tip3 from './tip_3';\nimport Tip4 from './tip_4';\nimport LogoSvg from '../../components/powered/svg';\nimport 'slick-carousel/slick/slick.css';\nimport 'slick-carousel/slick/slick-theme.css';\n\nconst IntroSlider = (props) => {\n  const { phone, portrait, image, onClick } = props;\n  const listRef = useRef();\n  const slidePerPage = phone\n    ? window.innerWidth < window.innerHeight\n      ? 1\n      : 2\n    : 4;\n  const settings = {\n    dots: Boolean(phone),\n    arrows: false,\n    infinite: false,\n    adaptiveHeight: true,\n    speed: 500,\n    slidesToShow: slidePerPage,\n    slidesToScroll: slidePerPage,\n  };\n\n  return (\n    <div\n      className={`intro-slide-container ${phone ? 'phone' : 'desktop'} ${\n        portrait ? 'portrait' : 'landscape'\n      }`}\n      onClick={onClick}\n    >\n      <div ref={listRef} className=\"intro-slide-item-list\">\n        <Slider {...settings}>\n          <div className=\"intro-slide-item\">\n            <div className=\"intro-slide-item-body\">\n              <div className=\"intro-svg\">\n                <Tip1 />\n              </div>\n              <div className=\"intro-text\">\n                See a list of locations &amp; control viewing options with the\n                menu\n              </div>\n            </div>\n          </div>\n          <div className=\"intro-slide-item\">\n            <div className=\"intro-slide-item-body\">\n              <div className=\"intro-svg\">{phone ? <Tip2M /> : <Tip2D />}</div>\n              <div className=\"intro-text\">\n                Click and drag to rotate 360&deg; in any direction\n              </div>\n            </div>\n          </div>\n          <div className=\"intro-slide-item\">\n            <div className=\"intro-slide-item-body\">\n              <div className=\"intro-svg\">\n                <Tip3 image={image} />\n              </div>\n              <div className=\"intro-text\">\n                Fly between locations, open media &amp; see every detail\n              </div>\n            </div>\n          </div>\n          <div className=\"intro-slide-item\">\n            <div className=\"intro-slide-item-body pr-1\">\n              <div className=\"intro-svg ml-auto\">\n                <Tip4 />\n                {/* <div\n                  className=\"intro-logo\"\n                  onClickCapture={(e) => e.stopPropagation()}\n                >\n                  <a\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    alt=\"Open SKYNAV 360\"\n                    href=\"https://skynav360.com\"\n                  >\n                    <LogoSvg />\n                  </a>\n                </div> */}\n              </div>\n              <div className=\"intro-text text-right\">\n                More about the VIZION\n                <br />\n                experience platform\n              </div>\n            </div>\n          </div>\n        </Slider>\n      </div>\n    </div>\n  );\n};\n\nexport default IntroSlider;\n","import React from 'react';\n\nconst BtnGetStarted = () => (\n  <svg\n    data-name=\"Lets Get Started\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 220.49 56.61\"\n  >\n    <path\n      opacity=\"0.25\"\n      d=\"M1043.58,512c-31.8-.31-133.25-.33-165,0-17.73.18-30.11,15.65-27.3,33,2.17,13.41,13.93,23.2,28.21,23.29,15.5.09,12.63,0,28.13,0,15.73,0,119.46.1,135.19,0s28.42-12.54,28.56-28A28.06,28.06,0,0,0,1043.58,512Z\"\n      transform=\"translate(-850.83 -511.8)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M1011.19,535.06a2.79,2.79,0,0,0-1.9-.63h-2.54v4.65h2.48a2.73,2.73,0,0,0,1.9-.61,2.14,2.14,0,0,0,.69-1.68A2.3,2.3,0,0,0,1011.19,535.06Z\"\n      transform=\"translate(-850.83 -511.8)\"\n    />\n    <polygon\n      fill=\"#fff\"\n      points=\"143.58 29.39 147.6 29.39 145.59 23.64 143.58 29.39\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M1043,534.43h-1.69v10h1.57a3.64,3.64,0,0,0,2.92-1.19,5.17,5.17,0,0,0,1-3.4v-.78a5.35,5.35,0,0,0-1-3.45A3.49,3.49,0,0,0,1043,534.43Z\"\n      transform=\"translate(-850.83 -511.8)\"\n    />\n    <path\n      fill=\"#fff\"\n      d=\"M1043.58,512c-31.8-.31-133.25-.33-165,0-17.73.18-30.11,15.65-27.3,33,2.17,13.41,13.93,23.2,28.21,23.29,15.5.09,12.63,0,28.13,0,15.73,0,119.46.1,135.19,0s28.42-12.54,28.56-28A28.06,28.06,0,0,0,1043.58,512ZM882.43,546.36h-8.71V532.49h2.41v12h6.3Zm10.92,0h-9.07V532.49h9v1.94h-6.6v3.83h5.7v1.91h-5.7v4.27h6.66Zm12.18-11.93H901.2v11.93h-2.39V534.43h-4.29v-1.94h11Zm3.81-1.39a4.27,4.27,0,0,1-.5,2,4.76,4.76,0,0,1-1.23,1.59l-1.18-.74a4.77,4.77,0,0,0,.88-2.64v-1.5h2Zm10.58,12.49a5.8,5.8,0,0,1-3.61,1,6.82,6.82,0,0,1-2.77-.55,4.63,4.63,0,0,1-2-1.54,3.84,3.84,0,0,1-.7-2.29h2.41a2.24,2.24,0,0,0,.78,1.83,3.44,3.44,0,0,0,2.24.65,3,3,0,0,0,1.89-.51,1.65,1.65,0,0,0,.63-1.35,1.67,1.67,0,0,0-.64-1.41,7.82,7.82,0,0,0-2.32-1,11,11,0,0,1-2.67-1.13,3.56,3.56,0,0,1-1.89-3.1,3.4,3.4,0,0,1,1.36-2.77,5.58,5.58,0,0,1,3.55-1.08,6.11,6.11,0,0,1,2.59.53,4.27,4.27,0,0,1,1.78,1.52,3.93,3.93,0,0,1,.65,2.19h-2.41a2.14,2.14,0,0,0-.68-1.7,2.8,2.8,0,0,0-1.95-.62,2.93,2.93,0,0,0-1.83.51,1.7,1.7,0,0,0-.65,1.41,1.51,1.51,0,0,0,.7,1.27,8.14,8.14,0,0,0,2.33,1,10.56,10.56,0,0,1,2.6,1.1,4.23,4.23,0,0,1,1.44,1.41,3.72,3.72,0,0,1,.46,1.86A3.31,3.31,0,0,1,919.92,545.53Zm18.94-1a4.59,4.59,0,0,1-2.09,1.49,8.45,8.45,0,0,1-3,.5,6,6,0,0,1-3.09-.79,5.28,5.28,0,0,1-2.07-2.26,7.87,7.87,0,0,1-.76-3.43V539a7.28,7.28,0,0,1,1.51-4.91,5.21,5.21,0,0,1,4.2-1.77,5.52,5.52,0,0,1,3.68,1.15,4.94,4.94,0,0,1,1.64,3.3h-2.37a2.65,2.65,0,0,0-2.9-2.51,2.87,2.87,0,0,0-2.47,1.17,6,6,0,0,0-.87,3.42v1.07a5.66,5.66,0,0,0,1,3.49,3.12,3.12,0,0,0,2.64,1.24,3.49,3.49,0,0,0,2.63-.84v-2.71H933.6v-1.83h5.26Zm11.72,1.8h-9.07V532.49h9v1.94h-6.59v3.83h5.7v1.91h-5.7v4.27h6.66Zm12.18-11.93h-4.33v11.93H956V534.43h-4.29v-1.94h11Zm14.44,11.1a5.8,5.8,0,0,1-3.61,1,6.77,6.77,0,0,1-2.76-.55,4.66,4.66,0,0,1-2-1.54,3.91,3.91,0,0,1-.7-2.29h2.41a2.24,2.24,0,0,0,.78,1.83,3.46,3.46,0,0,0,2.24.65,3,3,0,0,0,1.9-.51,1.65,1.65,0,0,0,.63-1.35,1.7,1.7,0,0,0-.64-1.41,8,8,0,0,0-2.32-1,11,11,0,0,1-2.67-1.13,3.55,3.55,0,0,1-1.9-3.1,3.4,3.4,0,0,1,1.37-2.77,5.54,5.54,0,0,1,3.55-1.08,6.1,6.1,0,0,1,2.58.53,4.21,4.21,0,0,1,1.78,1.52,3.85,3.85,0,0,1,.65,2.19h-2.4a2.18,2.18,0,0,0-.68-1.7,2.83,2.83,0,0,0-2-.62,2.94,2.94,0,0,0-1.84.51,1.7,1.7,0,0,0-.65,1.41,1.52,1.52,0,0,0,.71,1.27,8.05,8.05,0,0,0,2.32,1,10.56,10.56,0,0,1,2.6,1.1,4.06,4.06,0,0,1,1.44,1.41,3.62,3.62,0,0,1,.46,1.86A3.29,3.29,0,0,1,977.2,545.53Zm9.15.83H984V534.43h-4.29v-1.94h11v1.94h-4.32Zm13.9,0-1.13-3.23h-5.38l-1.12,3.23h-2.51l5.24-13.87h2.16l5.26,13.87Zm14.55,0h-2.58l-2.78-5.33h-2.69v5.33h-2.41V532.49h4.88a5.65,5.65,0,0,1,3.7,1.08,3.82,3.82,0,0,1,1.31,3.12,3.91,3.91,0,0,1-.67,2.33,4.27,4.27,0,0,1-1.87,1.44l3.11,5.78Zm11.26-11.93h-4.32v11.93h-2.39V534.43h-4.29v-1.94h11Zm10.9,11.93h-9.07V532.49h9v1.94h-6.59v3.83h5.7v1.91h-5.7v4.27H1037Zm12.31-6.58a7.31,7.31,0,0,1-.79,3.47,5.5,5.5,0,0,1-2.23,2.3,6.74,6.74,0,0,1-3.34.81h-4V532.49h4.1a6.37,6.37,0,0,1,3.26.82,5.56,5.56,0,0,1,2.21,2.32,7.43,7.43,0,0,1,.78,3.45Z\"\n      transform=\"translate(-850.83 -511.8)\"\n    />\n  </svg>\n);\n\nexport default BtnGetStarted;\n","import React, { useMemo } from 'react';\nimport { connect } from 'react-redux';\nimport './introImage.scss';\n\nconst IntroImage = ({ img }) => {\n  const imageStyle = useMemo(\n    () => ({\n      backgroundImage: img ? `url(${img})` : 'none',\n    }),\n    [img]\n  );\n\n  return <div className=\"intro-img\" style={imageStyle}></div>;\n};\n\nconst mapStateToProps = ({ json }) => ({\n  img: (json && json.tour && json.tour.introImageUrl) || '',\n});\n\nexport default connect(mapStateToProps)(IntroImage);\n","import React, { useState, useEffect, useCallback } from 'react';\n\nimport { connect } from 'react-redux';\n\nimport { isMenuLeft } from 'utils/menuHelper';\nimport { isPhone } from 'deviceDetect';\n\nimport IntroSlider from './introSlider';\nimport BtnGetStarted from './btnGetStarted';\nimport IntroImage from './introImage';\n\nimport './intro.scss';\n\nconst PHONE = isPhone();\n\nexport const INTRO_STEP = {\n  RENDER: 0,\n  FADING_IN: 1,\n  FADED_IN: 2,\n  FADING_OUT: 3,\n  FADED_OUT: 4,\n};\n\nconst playAudio = (audioDomId) => {\n  const playPromise = document.getElementById(audioDomId).play();\n  if (playPromise !== undefined) {\n    playPromise\n      .catch((err) => {\n        console.log(err);\n        // Auto-play was prevented\n        // Show a UI element to let the user manually start playback\n      })\n      .then(() => {\n        // Auto-play started\n      });\n  }\n};\n\nconst playAudioFirstTime = () => {\n  // if (!window.globalAudioPlayed || !window.tourAudioPlayed) {\n  //   if (window.haveTourAudioSrc) {\n  //     playAudio('tourAudio');\n  //   } else {\n  //     playAudio('globalAudio');\n  //   }\n  //   if (window.haveAudioSrc) {\n  //     playAudio('sceneAudio');\n  //   }\n  // }\n};\n\nconst Intro = (props) => {\n  const { spinnerVisible, dimentions, onUpdate } = props;\n  const portrait = window.innerWidth < window.innerHeight;\n  const [step, setStep] = useState(INTRO_STEP.RENDER);\n  const [status, setStatus] = useState('out');\n  const [enabled, setEnabled] = useState(true);\n  useEffect(() => {\n    if (step === INTRO_STEP.FADING_IN) {\n      setStatus('in');\n      setTimeout(() => setStep(INTRO_STEP.FADED_IN), 1000);\n    }\n    if (step === INTRO_STEP.FADING_OUT) {\n      setStatus('out');\n      setTimeout(() => setStep(INTRO_STEP.FADED_OUT), 1000);\n    }\n    onUpdate(step);\n    // eslint-disable-next-line\n  }, [step]);\n  useEffect(() => {\n    if (!spinnerVisible && step === INTRO_STEP.RENDER) {\n      setStep(INTRO_STEP.FADING_IN);\n    }\n  }, [step, spinnerVisible]);\n  const onHide = useCallback(() => {\n    setEnabled(false);\n    setStep(INTRO_STEP.FADING_OUT);\n  }, []);\n\n  const onClickHide = useCallback(() => {\n    if (enabled) {\n      playAudioFirstTime();\n      onHide();\n    }\n  }, [enabled, onHide]);\n\n  return (\n    <>\n      <div className=\"landing-intro-back\">&nbsp;</div>\n      <div\n        className={`landing-intro ${status} menu-${\n          isMenuLeft(dimentions) ? 'left' : 'bottom'\n        } ${PHONE ? 'phone' : 'desktop'} ${\n          portrait ? 'portrait' : 'landscape'\n        }`}\n      >\n        <div className=\"intro-title\" onClick={onClickHide}>\n          <div className=\"intro-img-wp\">\n            <IntroImage />\n          </div>\n          <div className=\"intro-btn\" onClick={onClickHide}>\n            <BtnGetStarted />\n          </div>\n        </div>\n        <div className=\"intro-slide\">\n          <IntroSlider\n            onClick={onClickHide}\n            phone={PHONE}\n            portrait={portrait}\n            image={props.image}\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = ({ dimentions }) => ({\n  dimentions,\n});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Intro);\n","import React from 'react';\n\nimport { connect } from 'react-redux';\n\nimport { initTracking } from 'gaTracking';\nimport {\n  goToScene,\n  toggleMenu,\n  setTourData,\n  setPanoData,\n  showHotspot,\n  toggleLanding,\n  setAudioAvailable,\n} from 'store/actions';\nimport { loadTourJson } from 'utils/apiHelper';\nimport PanoErrorBoundary from 'components/errors/panoError';\nimport configs from 'configs';\n\nimport World3D from './world3d';\nimport RouteHandlers from './routes';\n\nimport LandingSpinner from '../landing/spinner';\nimport LandingIntro, { INTRO_STEP } from '../landing/intro';\n\nimport './style.scss';\n\nconst CONFIG_DELAY = 10000;\n\nclass World extends React.Component {\n  state = {\n    initiating: true,\n    json: null,\n    jsonInvalid: false,\n    tour: null,\n    autoRotate: false,\n    currentPano: null,\n    isPanning: false,\n    sdLoaded: false,\n    hdLoaded: false,\n    spinner: true,\n    showSpinner: true,\n    showIntro: false,\n    introStatus: 'in',\n    defaultScene: null,\n    popupOpen: false,\n    variantIndex: 0,\n  };\n  isPanning = false;\n  panCounter = 0;\n  disableRotate = false;\n  panTimer = null;\n  worldEl = null;\n  trackDeepLink = null;\n\n  componentDidMount() {\n    const { tourId, groupId, sceneId, hotspotId } = this.props.match.params;\n    window.logMessage('params', { tourId, groupId, sceneId, hotspotId });\n    if (sceneId || hotspotId) {\n      this.trackDeepLink = {\n        tour: tourId,\n        scene: sceneId,\n        hotspot: hotspotId,\n      };\n    }\n    this.loadData(tourId);\n  }\n\n  componentDidUpdate(preProps, preState) {\n    const { groupId, sceneId, hotspotId } = this.props.match.params;\n    if (sceneId && sceneId !== preProps.match.params.sceneId) {\n      this.selectSceneById(groupId, sceneId);\n    }\n\n    const { currentScene } = this.props;\n    if (\n      currentScene.id &&\n      (preProps.currentScene.id !== currentScene.id ||\n        preProps.currentScene.groupId !== currentScene.groupId)\n    ) {\n      this.selectSceneById(currentScene.groupId, currentScene.id);\n    }\n    if (!hotspotId && !preState.sdLoaded && this.state.sdLoaded) {\n      this.toggleIntro(true);\n    }\n    if (hotspotId && preState.showSpinner && !this.state.showSpinner) {\n      this.setState({ introStatus: 'out' });\n    }\n  }\n\n  navigateToRoute = (groupId = null, sceneId = null, hotspotId = null) => {\n    const { tourId } = this.props.match.params;\n    const routeParams = [];\n    if (!configs.singleTour) {\n      routeParams.push(tourId || 'SKYNAV');\n    }\n    if (groupId) {\n      routeParams.push(groupId);\n      if (sceneId) {\n        routeParams.push(sceneId);\n        if (hotspotId) {\n          routeParams.push(hotspotId);\n        }\n      }\n    }\n    this.props.history.push(`/${routeParams.join('/')}`);\n  };\n\n  dataArrived = (json) => {\n    window.logMessage('json', json);\n    if (!json.cubeMap) {\n      const { tour } = json;\n      initTracking(\n        tour.googleAnalyticTrackingID,\n        this.trackDeepLink,\n        tour.facebookPixelID\n      );\n      if (tour.audioAvailable) {\n        this.props.setAudioAvailable(true);\n      }\n      const autoRotate = Boolean(tour && tour.autoRotate);\n      const defaultScene = this.getDefaultScene(json);\n      this.setState(\n        { json, tour, autoRotate, defaultScene },\n        this.selectDefaultScene\n      );\n      document.title = tour.name ? `${tour.name} | SKYNAV` : 'SKYNAV';\n    } else {\n      this.setState({ jsonInvalid: true });\n    }\n  };\n\n  loadData = (tourId = null) => {\n    loadTourJson(tourId).then(\n      ({ json, tour }) => {\n        if (json) {\n          window.logMessage('Tour data:', tour, json);\n          this.props.setTourData(json);\n          this.dataArrived(json);\n        } else {\n          this.props.history.push(`/not-found`);\n        }\n      },\n      (err) => {\n        console.error('got error', err);\n        this.props.history.push(`/not-found`);\n      }\n    );\n  };\n\n  getDefaultScene = ({ scenes, groups }) => {\n    let defaultScene = scenes.find((p) => p.isDefault);\n    if (!defaultScene) {\n      const defaultGroup = groups.find((g) => g.isDefault);\n      if (defaultGroup) {\n        defaultScene = scenes.find((s) => s.groupId === defaultGroup.id);\n      }\n    }\n    return defaultScene;\n  };\n\n  selectDefaultScene = () => {\n    const { groupId, sceneId } = this.props.match.params;\n    const {\n      defaultScene,\n      json: { scenes, groups },\n    } = this.state;\n    let group = null;\n    if (groupId) {\n      group = groups.find((g) => g.id === groupId);\n      if (!group) {\n        group = groups.find((g) => g.isDefault) || groups[0];\n      }\n      if (group) {\n        let scene = null;\n        if (sceneId) {\n          scene = scenes.find((s) => s.id === sceneId);\n        }\n        if (!scene) {\n          scene = scenes.find((s) => s.groupId === group.id && s.isDefault);\n        }\n        if (!scene) {\n          scene = scenes.find((s) => s.groupId === group.id);\n        }\n        if (scene) {\n          return this.selectSceneById(scene.groupId, scene.id);\n        }\n      }\n    }\n    if (defaultScene) {\n      return this.selectSceneById(defaultScene.groupId, defaultScene.id);\n    }\n    // group not found and there is no group\n    this.selectSceneById(null); // which will redirect to 404\n  };\n\n  selectSceneById = (gId, sId) => {\n    if (!gId) {\n      console.error('missing gId', gId);\n      return this.props.history.push('/not-found');\n    }\n    const { groups } = this.state.json;\n    const group = groups.find((s) => s.id === gId);\n    if (!group) {\n      console.error('missing group', group);\n      return this.props.history.push('/not-found');\n    }\n    const { groupId, sceneId } = this.props.match.params;\n    window.logMessage('selectSceneById', gId, sId);\n    if (gId !== groupId || sceneId !== sId) {\n      this.navigateToRoute(gId, sId);\n    } else {\n      // groupId and sceneId did NOT change\n      // need to select scene and check to open lightbox\n      const { currentScene } = this.props;\n      if (currentScene.id === sId && currentScene.groupId === gId) {\n        this.loadSceneById(gId, sId);\n      } else {\n        this.props.goToScene(gId, sId);\n      }\n    }\n  };\n\n  loadSceneById = (groupId, sceneId) => {\n    const { scenes } = this.state.json;\n    const scene =\n      scenes.find((p) => p.id === sceneId && p.groupId === groupId) || null;\n    if (scene) {\n      this.setScene(scene);\n    } else {\n      console.error('missing scene', groupId, sceneId);\n      this.props.history.push('/not-found');\n    }\n  };\n\n  setScene = (currentPano) => {\n    window.logMessage('setScene', currentPano);\n    this.setState({\n      currentPano,\n      variantIndex: currentPano.defaultVariantIndex,\n    });\n    if (this.state.initiating) {\n      this.setState({ initiating: false });\n    }\n  };\n\n  toggleRotate = (isAutoRotate) => {\n    if (isAutoRotate === undefined) {\n      this.disableRotate = false;\n      this.resetTimer();\n    }\n    this.setState({\n      autoRotate:\n        isAutoRotate !== undefined ? isAutoRotate : !this.state.autoRotate,\n    });\n  };\n\n  onPointerClick = () => {\n    if (this.props.isNavOpen) {\n      this.props.toggleMenu(false);\n    }\n  };\n\n  onPointerDown = () => {\n    if (!this.isPanning) {\n      this.isPanning = true;\n      this.setState({ isPanning: true });\n    }\n  };\n\n  onPointerMove = () => {\n    if (this.isPanning) {\n      if (this.props.isNavOpen) {\n        this.props.toggleMenu(false);\n      }\n      this.panCounter += 1;\n      if (this.panCounter > 3) {\n        if (this.state.autoRotate) {\n          this.disableRotate = true;\n          this.toggleRotate(false);\n        }\n        if (this.disableRotate) {\n          this.resetTimer();\n        }\n      }\n    }\n  };\n\n  onPointerUp = () => {\n    if (this.isPanning) {\n      this.isPanning = false;\n      this.setState({ isPanning: false });\n      this.panCounter = 0;\n      if (this.disableRotate && !this.panTimer) {\n        this.panTimer = setTimeout(() => {\n          this.toggleRotate(true);\n          this.disableRotate = false;\n          this.panTimer = null;\n        }, CONFIG_DELAY);\n      }\n    }\n  };\n\n  resetTimer = () => {\n    if (this.panTimer) {\n      clearTimeout(this.panTimer);\n      this.panTimer = null;\n    }\n  };\n\n  pointerEvents = {\n    onClick: this.onPointerClick,\n    onPointerDown: this.onPointerDown,\n    onPointerUp: this.onPointerUp,\n    onPointerMove: this.onPointerMove,\n  };\n\n  onImageLoaded = (key) => {\n    if (!this.state[key]) {\n      this.setState({ [key]: true });\n    }\n  };\n\n  onSDLoaded = () => this.onImageLoaded('sdLoaded');\n  onHDLoaded = () => this.onImageLoaded('hdLoaded');\n\n  toggleIntro = (showIntro) => {\n    if (showIntro !== this.state.showIntro) {\n      this.setState({ showIntro });\n      this.props.toggleLanding(showIntro);\n    }\n  };\n\n  onUpdateIntroStep = (step) => {\n    if (step === INTRO_STEP.FADING_IN) {\n      this.setState({ introStatus: 'in' });\n    } else if (step === INTRO_STEP.FADING_OUT) {\n      this.setState({ introStatus: 'out' });\n    } else if (step === INTRO_STEP.FADED_OUT) {\n      this.toggleIntro(false);\n    }\n  };\n\n  renderLanding = () => {\n    const { defaultScene } = this.state;\n    const { sdLoaded, showIntro, showSpinner } = this.state;\n    return (\n      <>\n        {showIntro && (\n          <LandingIntro\n            spinnerVisible={showSpinner}\n            image={defaultScene ? defaultScene.previewImgUrl : null}\n            onUpdate={this.onUpdateIntroStep}\n          />\n        )}\n        <LandingSpinner\n          loaded={sdLoaded}\n          onClosing={() => this.setState({ spinner: false })}\n          onClosed={() => this.setState({ showSpinner: false })}\n        />\n      </>\n    );\n  };\n\n  render() {\n    const {\n      json,\n      currentPano,\n      isPanning,\n      autoRotate,\n      showSpinner,\n      spinner,\n      showIntro,\n      introStatus,\n      variantIndex,\n    } = this.state;\n    const { currentHotspot, panoMode, tour, customer } = this.props;\n    return (\n      <div className=\"World\">\n        {json && (\n          <>\n            <PanoErrorBoundary>\n              <World3D\n                ref={(ref) => {\n                  this.worldEl = ref;\n                }}\n                json={json}\n                tour={tour}\n                showSpinner={spinner}\n                showIntro={showIntro}\n                introClosed={!spinner && introStatus === 'out'}\n                autoRotate={\n                  showIntro ||\n                  (!showSpinner && !showIntro && !currentHotspot && autoRotate)\n                }\n                customer={customer}\n                panoMode={panoMode}\n                isPanning={isPanning}\n                currentPano={currentPano}\n                onSDLoaded={this.onSDLoaded}\n                onHDLoaded={this.onHDLoaded}\n                onSwitchPano={({ groupId, id }) =>\n                  this.selectSceneById(groupId, id)\n                }\n                pointerEvents={this.pointerEvents}\n                popupOpen={currentHotspot}\n                variantIndex={variantIndex}\n                history={this.props.history}\n              />\n            </PanoErrorBoundary>\n            <RouteHandlers />\n          </>\n        )}\n        {this.renderLanding()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (store) => ({\n  currentHotspot: store.currentHotspot,\n  currentScene: store.currentScene,\n  isNavOpen: store.menu.isOpen,\n  isMapOpen: store.menu.isoMetricMap,\n  mapPopupOpen: store.menu.isoMetricMap,\n  socialPopupOpen: store.menu.social,\n  contactPopupOpen: store.menu.contact,\n  hotspotHistory: store.hotspotHistory,\n  panoMode: store.panoMode,\n  customer: (store.json && store.json.customer) || null,\n  tour: store.tour,\n  shouldBlur: (store.tour && store.tour.lightboxBlur) || false,\n  featuredHotspots: (store.json && store.json.featuredHotspots) || [],\n});\n\nconst mapDispatchToProps = {\n  goToScene,\n  setTourData,\n  setPanoData,\n  toggleMenu,\n  showHotspot,\n  toggleLanding,\n  setAudioAvailable,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(World);\n","import React from 'react';\n\nfunction NotFound() {\n  return (\n    <div\n      className=\"NotFound\"\n      style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '200px',\n      }}\n    >\n      <h1\n        style={{\n          textAlign: 'center',\n          fontWeight: '300',\n          fontSize: '2em',\n          color: '#484848',\n        }}\n      >\n        Sorry! The Tour you are looking for is not found.\n      </h1>\n    </div>\n  );\n}\n\nexport default NotFound;\n","import React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { updateDimentions } from '../../store/actions';\nimport DIMENTION from '../../consts/dimention.const';\n\nfunction useWindowSize() {\n  const isClient = typeof window === 'object';\n  function getWinSize() {\n    return !isClient\n      ? {\n          width: 0,\n          height: 0,\n          dimention: DIMENTION.PORTRAIT,\n        }\n      : {\n          width: window.innerWidth,\n          height: window.innerHeight,\n          dimention:\n            window.innerWidth > window.innerHeight\n              ? DIMENTION.LANDSCAPE\n              : DIMENTION.PORTRAIT,\n        };\n  }\n  const [winSize, setWinDim] = useState(getWinSize);\n  useEffect(() => {\n    if (!isClient) {\n      return false;\n    }\n    function handleResize() {\n      setWinDim(getWinSize());\n    }\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n    // eslint-disable-next-line\n  }, []);\n  return winSize;\n}\n\nfunction SizeDetector(props) {\n  const currDimentions = useWindowSize();\n  useEffect(() => {\n    if (currDimentions.width) {\n      props.updateDimentions(currDimentions);\n    }\n  }, [props, currDimentions]);\n  return <></>;\n}\n\nconst mapDispatchToProps = {\n  updateDimentions,\n};\n\nexport default connect(null, mapDispatchToProps)(SizeDetector);\n","import React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport '@fortawesome/fontawesome-svg-core/styles.css';\nimport 'react-perfect-scrollbar/dist/css/styles.css';\nimport World from './containers/world';\nimport NotFound from './NotFound';\nimport SizeDetector from './containers/detectors/size.detector';\nimport './App.css';\nimport configs from './configs';\nimport { cleanLoadTexture } from './utils/textureHelper';\n\nwindow.defaultTexture = null;\ncleanLoadTexture(configs.baseUrl + '/assets/images/white-square.png').then(\n  (texture) => {\n    window.defaultTexture = texture;\n  }\n);\n\ndocument.title = 'SKYNAV';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <SizeDetector />\n      <BrowserRouter basename={configs.baseUrl}>\n        {(configs.singleTour && (\n          <Switch>\n            <Route exact path=\"/not-found\" component={NotFound} />\n            <Route path=\"/:sceneId/:hotspotId\" component={World} />\n            <Route path=\"/:sceneId\" component={World} />\n            <Route path=\"/\" component={World} />\n            <Route path=\"*\" component={NotFound} />\n          </Switch>\n        )) || (\n          <Switch>\n            <Route exact path=\"/not-found\" component={NotFound} />\n            <Route\n              path=\"/:tourId/:groupId/:sceneId/:hotspotId\"\n              component={World}\n            />\n            <Route\n              path=\"/:tourId/:groupId/:sceneId/:hotspotId\"\n              component={World}\n            />\n            <Route path=\"/:tourId/:groupId/:sceneId\" component={World} />\n            <Route path=\"/:tourId/:groupId\" component={World} />\n            <Route path=\"/:tourId\" component={World} />\n            <Route path=\"/\" component={NotFound} />\n            <Route path=\"*\" component={NotFound} />\n          </Switch>\n        )}\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","const initialState = {\n  ready: false,\n  tour: null,\n  json: null,\n  groups: [],\n  scenes: [],\n  panoMode: 'cube',\n  controlMode: 'orbit',\n  showLanding: true,\n  centerLookAt: null,\n  aerialMapData: [],\n  aerialDataReady: false,\n  menu: {\n    isOpen: false,\n    position: 'left',\n  },\n  currentScene: {},\n  hotspotHistory: [],\n  dimentions: {\n    width: 0,\n    height: 0,\n    dimention: 1,\n  },\n  shouldBlur: true,\n  audio: {\n    available: false,\n    enabled: true,\n  },\n  variantIndex: 0,\n  isLandingOpen: false,\n};\n\nexport default initialState;\n","import * as APP_ACTION from './actionTypes';\nimport initialState from './state';\n\nfunction appReducer(state = initialState, action) {\n  const { type, payload } = action;\n  window.logMessage('action.type', type, payload);\n  switch (type) {\n    case APP_ACTION.INITIATED:\n      return {\n        ...state,\n        ready: true,\n      };\n    case APP_ACTION.UPDATE_DIMENTIONS:\n      return {\n        ...state,\n        dimentions: { ...payload },\n      };\n    case APP_ACTION.TOGGLE_PANO_MODE:\n      return {\n        ...state,\n        panoMode: payload,\n      };\n    case APP_ACTION.TOGGLE_MENU:\n      return {\n        ...state,\n        menu: {\n          ...state.menu,\n          isOpen: payload,\n        },\n      };\n\n    case APP_ACTION.SET_MENU_POSITION:\n      return {\n        ...state,\n        menu: {\n          ...state.menu,\n          position: payload,\n        },\n      };\n    case APP_ACTION.SET_TOUR_DATA:\n      const { scenes, groups, tour } = payload;\n      return {\n        ...state,\n        json: { ...payload },\n        tour: { ...tour },\n        shouldBlur: tour.lightboxBlur || false,\n        groups: groups ? [...groups] : [],\n        scenes: [...scenes],\n      };\n    case APP_ACTION.GO_TO_PANO:\n      const scene = state.scenes.find(\n        (s) => s.id === payload.id && s.groupId === payload.groupId\n      );\n      return {\n        ...state,\n        currentScene: { ...scene },\n        currentHotspot: null,\n        menu: {\n          ...state.menu,\n          isOpen: false,\n          social: false,\n          contact: false,\n          isoMetricMap: false,\n        },\n        hotspotHistory: [...state.hotspotHistory, scene._id],\n      };\n    case APP_ACTION.ADD_HOTSPOT_HISTORY:\n      return { ...state, hotspotHistory: [...state.hotspotHistory, payload] };\n    case APP_ACTION.CLOSE_LANDING:\n      return {\n        ...state,\n        showLanding: false,\n        blur: false,\n      };\n    case APP_ACTION.SET_AERIAL_MAP_DATA:\n      return {\n        ...state,\n        aerialMapData: payload,\n        aerialDataReady: true,\n      };\n    case APP_ACTION.TOGGLE_BLUR:\n      return {\n        ...state,\n        blur: payload !== undefined ? payload : !state.blur,\n      };\n    case APP_ACTION.SET_AUDIO_AVAILABLE:\n      return {\n        ...state,\n        audio: {\n          ...state.audio,\n          available: payload,\n        },\n      };\n    case APP_ACTION.TOGGLE_AUDIO:\n      return {\n        ...state,\n        audio: {\n          ...state.audio,\n          enabled: payload,\n        },\n      };\n\n    case APP_ACTION.GO_TO_VARIANTS:\n      return {\n        ...state,\n        variantIndex: payload,\n      };\n\n    case APP_ACTION.SET_CONTROL_MODE:\n      return {\n        ...state,\n        controlMode: payload,\n      };\n    case APP_ACTION.TOGGLE_LANDING:\n      return {\n        ...state,\n        isLandingOpen: payload,\n      };\n    case APP_ACTION.SET_CENTER_LOOKAT:\n      return { ...state, centerLookAt: payload };\n    default:\n      return state;\n  }\n}\n\nexport default appReducer;\n","import { put } from 'redux-saga/effects';\nimport * as APP_ACTION from './actionTypes';\n\nfunction kickStart() {\n  return new Promise((resolve) => {\n    setTimeout(() => resolve('DONE'), 0);\n  });\n}\n\nfunction* initiate() {\n  try {\n    const result = yield kickStart();\n    window.logMessage('initiation: ' + result);\n    yield put({\n      type: APP_ACTION.INITIATED,\n    });\n  } catch (error) {}\n}\n\nconst middlewares = {\n  initiate,\n};\n\nexport default middlewares;\n","import { all, takeLatest } from 'redux-saga/effects';\nimport * as APP_ACTION from './actionTypes';\nimport middlewares from './middlewares';\n\nfunction* handleInit() {\n  yield takeLatest(APP_ACTION.INITIATE, middlewares.initiate);\n}\n\nexport default function* rootSaga() {\n  yield all([handleInit()]);\n}\n","import { createStore, applyMiddleware, compose } from 'redux';\nimport createSagaMiddleware from 'redux-saga';\nimport reducers from './reducers';\nimport rootSaga from './sagas';\n\nconst sagaMiddleware = createSagaMiddleware();\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n  reducers,\n  composeEnhancer(applyMiddleware(sagaMiddleware))\n);\n\nsagaMiddleware.run(rootSaga);\n\nexport default store;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { library, config } from '@fortawesome/fontawesome-svg-core';\nimport { fab } from '@fortawesome/free-brands-svg-icons';\nimport { fas } from '@fortawesome/free-solid-svg-icons';\nimport { far } from '@fortawesome/free-regular-svg-icons';\nimport './index.css';\nimport './utils/global.utils';\nimport App from './App';\nimport store from './store';\nimport reportWebVitals from './reportWebVitals';\n\nconfig.autoAddCss = false;\nlibrary.add(fab, fas, far);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Suspense fallback={null}>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </Suspense>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}